<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jerry&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhusas.github.io/"/>
  <updated>2018-08-02T09:09:16.508Z</updated>
  <id>https://zhusas.github.io/</id>
  
  <author>
    <name>Jerry Zhu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>脚本又见脚本</title>
    <link href="https://zhusas.github.io/2018/08/02/%E8%84%9A%E6%9C%AC%E5%8F%88%E8%A7%81%E8%84%9A%E6%9C%AC/"/>
    <id>https://zhusas.github.io/2018/08/02/脚本又见脚本/</id>
    <published>2018-08-02T09:07:00.000Z</published>
    <updated>2018-08-02T09:09:16.508Z</updated>
    
    <content type="html"><![CDATA[<p>创建一个10G分区，并格式为ext4文件系统；</p><p>(1) 要求其block大小为2048, 预留空间百分比为2, 卷标为MYDATA, 默认挂载属性包含acl；</p><p>(2) 挂载至/data/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳；<a id="more"></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># fdisk -l   #不写注释的都是耍流氓</span></span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 171.8 GB, 171798691840 bytes</span><br><span class="line">255 heads, 63 sectors/track, 20886 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00098b32</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *           1          64      512000   83  Linux</span><br><span class="line">Partition 1 does not end on cylinder boundary.</span><br><span class="line">/dev/sda2              64       20887   167259136   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 10.7 GB, 10737418240 bytes   <span class="comment">#创建一个10G分区</span></span><br><span class="line">255 heads, 63 sectors/track, 1305 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000 </span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_centos-lv_root: 170.2 GB, 170196467712 bytes</span><br><span class="line">255 heads, 63 sectors/track, 20691 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_centos-lv_swap: 1073 MB, 1073741824 bytes</span><br><span class="line">255 heads, 63 sectors/track, 130 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># fdisk /dev/sdb </span></span><br><span class="line">Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x248136bc.</span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">After that, of course, the previous content won<span class="string">'t be recoverable.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING: DOS-compatible mode is deprecated. It'</span>s strongly recommended to</span><br><span class="line">         switch off the mode (<span class="built_in">command</span> <span class="string">'c'</span>) and change display units to</span><br><span class="line">         sectors (<span class="built_in">command</span> <span class="string">'u'</span>).</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (1-4)</span><br><span class="line">p</span><br><span class="line">Partition number (1-4): 1</span><br><span class="line">First cylinder (1-1305, default 1): </span><br><span class="line">Using default value 1</span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-1305, default 1305): </span><br><span class="line">Using default value 1305</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): wq</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line">[root@centos ~]<span class="comment"># fdisk -l</span></span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 171.8 GB, 171798691840 bytes</span><br><span class="line">255 heads, 63 sectors/track, 20886 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00098b32</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *           1          64      512000   83  Linux</span><br><span class="line">Partition 1 does not end on cylinder boundary.</span><br><span class="line">/dev/sda2              64       20887   167259136   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 10.7 GB, 10737418240 bytes</span><br><span class="line">255 heads, 63 sectors/track, 1305 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x248136bc</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1               1        1305    10482381   83  Linux</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_centos-lv_root: 170.2 GB, 170196467712 bytes</span><br><span class="line">255 heads, 63 sectors/track, 20691 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/vg_centos-lv_swap: 1073 MB, 1073741824 bytes</span><br><span class="line">255 heads, 63 sectors/track, 130 cylinders</span><br><span class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># mkfs -b 2048 -t ext4 -L MYDATA -m 2 /dev/sdb1  #格式为ext4文件系统，其block大小为2048, 预留空间百分比为2, 卷标为MYDATA</span></span><br><span class="line">mke2fs 1.41.12 (17-May-2010)</span><br><span class="line">文件系统标签=MYDATA</span><br><span class="line">操作系统:Linux</span><br><span class="line">块大小=2048 (<span class="built_in">log</span>=1)</span><br><span class="line">分块大小=2048 (<span class="built_in">log</span>=1)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">655360 inodes, 5241190 blocks</span><br><span class="line">262059 blocks (5.00%) reserved <span class="keyword">for</span> the super user</span><br><span class="line">第一个数据块=0</span><br><span class="line">Maximum filesystem blocks=542113792</span><br><span class="line">320 block groups</span><br><span class="line">16384 blocks per group, 16384 fragments per group</span><br><span class="line">2048 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">16384, 49152, 81920, 114688, 147456, 409600, 442368, 802816, 1327104, </span><br><span class="line">2048000, 3981312</span><br><span class="line"></span><br><span class="line">正在写入inode表: 完成                            </span><br><span class="line">Creating journal (32768 blocks): 完成</span><br><span class="line">Writing superblocks and filesystem accounting information: 完成</span><br><span class="line"></span><br><span class="line">This filesystem will be automatically checked every 20 mounts or</span><br><span class="line">180 days, whichever comes first.  Use tune2fs -c or -i to override.</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># tune2fs -o acl /dev/sdb1  #默认挂载属性包含acl</span></span><br><span class="line">tune2fs 1.41.12 (17-May-2010)</span><br><span class="line">[root@centos ~]<span class="comment"># mkdir -p /data/mydata &amp;&amp; mount -o noexec,noatime /dev/sdb1 /data/mydata #挂载至/data/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳</span></span><br><span class="line">[root@centos ~]<span class="comment"># echo $? </span></span><br><span class="line">0</span><br><span class="line">[root@centos ~]<span class="comment"># cd /data/</span></span><br><span class="line">[root@centos data]<span class="comment"># ll</span></span><br><span class="line">总用量 2</span><br><span class="line">drwxr-xr-x 3 root root 2048 12月 26 17:36 mydata</span><br><span class="line">[root@centos data]<span class="comment"># cd mydata/</span></span><br><span class="line">[root@centos mydata]<span class="comment"># ll</span></span><br><span class="line">总用量 16</span><br><span class="line">drwx------ 2 root root 16384 12月 26 17:36 lost+found</span><br><span class="line">[root@centos mydata]<span class="comment"># df -h</span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg_centos-lv_root</span><br><span class="line">                      156G  3.8G  145G   3% /</span><br><span class="line">tmpfs                 1.9G   72K  1.9G   1% /dev/shm</span><br><span class="line">/dev/sda1             477M  160M  292M  36% /boot</span><br><span class="line">/dev/sdb1             9.8G   13M  9.3G   1% /data/mydata</span><br><span class="line">[root@centos mydata]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>2、创建一个大小为1G的swap分区，并创建好文件系统，并启用之；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># fdisk /dev/sdb </span></span><br><span class="line">Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x70af3aab.</span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">After that, of course, the previous content won<span class="string">'t be recoverable.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING: DOS-compatible mode is deprecated. It'</span>s strongly recommended to</span><br><span class="line">         switch off the mode (<span class="built_in">command</span> <span class="string">'c'</span>) and change display units to</span><br><span class="line">         sectors (<span class="built_in">command</span> <span class="string">'u'</span>).</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (1-4)</span><br><span class="line"></span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (1-4)</span><br><span class="line">p</span><br><span class="line">Partition number (1-4): 1</span><br><span class="line">First cylinder (1-130, default 1): </span><br><span class="line">Using default value 1</span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-130, default 130): </span><br><span class="line">Using default value 130</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line"> </span><br><span class="line">[root@centos ~]<span class="comment"># mkswap /dev/sdb1</span></span><br><span class="line">Setting up swapspace version 1, size = 1044188 KiB</span><br><span class="line">no label, UUID=85de9eea-a86d-48f4-a24d-00615a9812f8</span><br><span class="line">[root@centos ~]<span class="comment"># swapon /dev/sdb1 </span></span><br><span class="line">[root@centos ~]<span class="comment"># free -m</span></span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          3816        517       3299          1         27        289</span><br><span class="line">-/+ buffers/cache:        200       3615</span><br><span class="line">Swap:         1019          0       1019</span><br><span class="line">[root@centos ~]<span class="comment"># echo "/dev/sdb1 swap swap defaults 0 0" &gt;&gt; /etc/fstab #swap现已加入开机挂载全家桶！</span></span><br></pre></td></tr></table></figure><p>3、获取并列出当前系统上的所有磁盘设备；显示每个磁盘设备上每个分区相关的空间使用信息；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># cat DiskInfo_Jerry.sh  #马哥说过，脚本就是命令的拼凑，所以，命令学好，脚本风骚。</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Author: Jerry</span></span><br><span class="line">lsblk</span><br><span class="line">df -ahT</span><br><span class="line"></span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># bash DiskInfo_Jerry.sh </span></span><br><span class="line">NAME                          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda                             8:0    0   160G  0 disk </span><br><span class="line">├─sda1                          8:1    0   500M  0 part /boot</span><br><span class="line">└─sda2                          8:2    0 159.5G  0 part </span><br><span class="line">  ├─vg_centos-lv_root (dm-0)  253:0    0 158.5G  0 lvm  /</span><br><span class="line">  └─vg_centos-lv_swap (dm-1)  253:1    0     1G  0 lvm  </span><br><span class="line">sdb                             8:16   0    10G  0 disk </span><br><span class="line">└─sdb1                          8:17   0    10G  0 part </span><br><span class="line">  ├─vg_mage-mylv1-real (dm-3) 253:3    0     5G  0 lvm  </span><br><span class="line">  │ ├─vg_mage-mylv1 (dm-2)    253:2    0     5G  0 lvm  </span><br><span class="line">  │ └─vg_mage-snvg1 (dm-5)    253:5    0     5G  1 lvm  </span><br><span class="line">  └─vg_mage-snvg1-cow (dm-4)  253:4    0   160M  1 lvm  </span><br><span class="line">    └─vg_mage-snvg1 (dm-5)    253:5    0     5G  1 lvm  </span><br><span class="line">sdc                             8:32   0    60G  0 disk </span><br><span class="line">└─sdc1                          8:33   0    60G  0 part </span><br><span class="line"></span><br><span class="line">Filesystem           Type                 Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg_centos-lv_root</span><br><span class="line">                     ext4                 156G  3.4G  145G   3% /</span><br><span class="line">proc                 proc                    0     0     0    - /proc</span><br><span class="line">sysfs                sysfs                   0     0     0    - /sys</span><br><span class="line">devpts               devpts                  0     0     0    - /dev/pts</span><br><span class="line">tmpfs                tmpfs                1.9G   68K  1.9G   1% /dev/shm</span><br><span class="line">/dev/sda1            ext4                 477M   35M  418M   8% /boot</span><br><span class="line">/dev/mapper/vg_mage-mylv1</span><br><span class="line">                     ext4                 4.8G   10M  4.6G   1% /users</span><br><span class="line">none                 binfmt_misc             0     0     0    - /proc/sys/fs/binfmt_misc</span><br><span class="line">vmware-vmblock       fuse.vmware-vmblock     0     0     0    - /var/run/vmblock-fuse</span><br><span class="line"></span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>4、总结RAID的各个级别及其组合方式和性能的不同；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">RAID-0: </span><br><span class="line">读、写性能提升；</span><br><span class="line">可用空间：N*min(S1,S2,...)</span><br><span class="line">无容错能力</span><br><span class="line">最少磁盘数：2, 2+</span><br><span class="line"></span><br><span class="line">RAID-1：</span><br><span class="line">读性能提升、写性能略有下降；</span><br><span class="line">可用空间：1*min(S1,S2,...)</span><br><span class="line">有冗余能力</span><br><span class="line">最少磁盘数：2, 2+</span><br><span class="line"></span><br><span class="line">RAID-4：</span><br><span class="line">1101, 0110, 1011</span><br><span class="line"></span><br><span class="line">RAID-5：</span><br><span class="line">读、写性能提升</span><br><span class="line">可用空间：(N-1)*min(S1,S2,...)</span><br><span class="line">有容错能力：1块磁盘</span><br><span class="line">最少磁盘数：3, 3+</span><br><span class="line"></span><br><span class="line">RAID-6：</span><br><span class="line">读、写性能提升</span><br><span class="line">可用空间：(N-2)*min(S1,S2,...)</span><br><span class="line">有容错能力：2块磁盘</span><br><span class="line">最少磁盘数：4, 4+</span><br></pre></td></tr></table></figure><p>​        </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">混合类型</span><br><span class="line">RAID-10：</span><br><span class="line">读、写性能提升</span><br><span class="line">可用空间：N*min(S1,S2,...)/2</span><br><span class="line">有容错能力：每组镜像最多只能坏一块；</span><br><span class="line">最少磁盘数：4, 4+</span><br></pre></td></tr></table></figure><p>5、创建一个大小为10G的RAID1，要求有一个空闲盘，而且CHUNK大小为128k;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生产环境都是用服务器自带的磁盘阵列卡来做raid，具体详见各厂商的操作文档，此题我就跳过了，请老湿原谅我的直接。</span><br></pre></td></tr></table></figure><p>6、创建一个大小为4G的RAID5设备，chunk大小为256k，格式化ext4文件系统，要求可开机自动挂载至/backup目录，而且不更新访问时间戳，且支持acl功能；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">生产环境都是用服务器自带的磁盘阵列卡来做raid，具体详见各厂商的操作文档，此题我就跳过了，请老湿原谅我的直接。</span><br><span class="line">更新访问时间戳我要说一下，生产环境一般都是要更新访问时间戳的</span><br></pre></td></tr></table></figure><p>7、接受一个以上文件路径作为参数；显示每个文件拥有的行数；总结说明本次共为几个文件统计了其行数；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># bash Sum_wc-l.sh /etc/ssh/sshd_config /etc/fstab /etc/rc.local </span></span><br><span class="line">Number of rows <span class="keyword">in</span> /etc/ssh/sshd_config is 138</span><br><span class="line">Number of rows <span class="keyword">in</span> /etc/fstab is 16</span><br><span class="line">Number of rows <span class="keyword">in</span> /etc/rc.local is 7</span><br><span class="line">total of 3  files</span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># cat Sum_wc-l.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"At least one filesname "</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $*;<span class="keyword">do</span></span><br><span class="line">       line=$(cat <span class="variable">$i</span> | wc -l)</span><br><span class="line">       <span class="built_in">echo</span> <span class="string">"Number of rows in <span class="variable">$i</span> is <span class="variable">$line</span>"</span></span><br><span class="line">    <span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"total of <span class="variable">$#</span>  files"</span></span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>8、传递两个以上字符串当作用户名；创建这些用户；且密码同用户名；(总结说明共创建了几个用户；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># bash Creat_user.sh </span></span><br><span class="line">At least two username </span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># bash Creat_user.sh abb1 abb2 abb3 abb4</span></span><br><span class="line">Add user abb1 finished</span><br><span class="line">Add user abb2 finished</span><br><span class="line">Add user abb3 finished</span><br><span class="line">Add user abb4 finished</span><br><span class="line">total of Create 4 users</span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># cat Creat_user.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"At least two username "</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span>    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $*;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> grep <span class="string">"^<span class="variable">$i</span>\&gt;"</span> /etc/passwd &amp;&gt; /dev/null;<span class="keyword">then</span></span><br><span class="line">        </span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"User <span class="variable">$i</span> exists"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    useradd <span class="variable">$i</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$i</span> | passwd --stdin <span class="variable">$i</span> &amp;&gt; /dev/null</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"Add user <span class="variable">$i</span> finished"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">done</span> </span><br><span class="line">    </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"total of Create <span class="variable">$#</span> users"</span></span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>9、新建20个用户，visitor1-visitor20；计算他们的ID之和；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># bash sum_userid.sh </span></span><br><span class="line">The users ID sum is: 10330</span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment"># cat sum_userid.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">num=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..20&#125;;<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> id visitor<span class="variable">$i</span> &amp;&gt; /dev/null;<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"visitor<span class="variable">$i</span> exists"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            useradd visitor<span class="variable">$i</span></span><br><span class="line">        id=$(grep <span class="string">"^visitor<span class="variable">$i</span>\&gt;"</span> /etc/passwd | cut -d: -f 3)</span><br><span class="line">        <span class="built_in">let</span> num+=<span class="variable">$id</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The users ID sum is: <span class="variable">$num</span>"</span></span><br><span class="line">[root@centos gogogogogogogogoo]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>10、分别统计/etc/rc.d/rc.sysinit、/etc/rc.d/init.d/functions和/etc/fstab文件中以#号开头的行数之和，以及总的空白行数；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@centos jerry_go]<span class="comment"># cat title10-2.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Author:Jerry</span></span><br><span class="line"><span class="comment">#Description</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -e <span class="variable">$1</span> ]; <span class="keyword">then</span></span><br><span class="line">        jinghao1=$(grep <span class="string">"^#"</span> <span class="variable">$1</span> | wc -l)</span><br><span class="line">        blank_line1=$(grep <span class="string">"^$"</span> <span class="variable">$1</span> | wc -l)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$1</span> Jinghao_lines:<span class="variable">$jinghao1</span>    Blank_lines:<span class="variable">$blank_line1</span>  "</span> </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$1</span> no exist"</span></span><br><span class="line">        <span class="built_in">exit</span> 2</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [ -e <span class="variable">$2</span> ]; <span class="keyword">then</span></span><br><span class="line">        jinghao2=$(grep <span class="string">"^#"</span> <span class="variable">$2</span> | wc -l)</span><br><span class="line">        blank_line2=$(grep <span class="string">"^$"</span> <span class="variable">$2</span> | wc -l)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$2</span> Jinghao_lines:<span class="variable">$jinghao2</span>    Blank_lines:<span class="variable">$blank_line2</span>  "</span> </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$2</span> no exist"</span></span><br><span class="line">        <span class="built_in">exit</span> 2</span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span> [ -e <span class="variable">$3</span> ]; <span class="keyword">then</span></span><br><span class="line">        jinghao3=$(grep <span class="string">"^#"</span> <span class="variable">$3</span> | wc -l)</span><br><span class="line">        blank_line3=$(grep <span class="string">"^$"</span> <span class="variable">$3</span> | wc -l)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$3</span> Jinghao_lines:<span class="variable">$jinghao3</span>    Blank_lines:<span class="variable">$blank_line3</span>  "</span>  </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"The file <span class="variable">$3</span> no exist"</span></span><br><span class="line">        <span class="built_in">exit</span> 2</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Total jinghao lines: $[<span class="variable">$jinghao1</span>+<span class="variable">$jinghao2</span>+<span class="variable">$jinghao3</span>]"</span>   </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Total blank lines: $[<span class="variable">$blank_line1</span>+<span class="variable">$blank_line2</span>+<span class="variable">$blank_line3</span>]"</span> &amp;&amp; <span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><p>​    </p><p>​    </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">走一个！come on baby！</span><br><span class="line">[root@centos jerry_go]<span class="comment"># bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/functions /etc/fstab </span></span><br><span class="line">The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  </span><br><span class="line">The file /etc/rc.d/init.d/<span class="built_in">functions</span> Jinghao_lines:43    Blank_lines:105  </span><br><span class="line">The file /etc/fstab Jinghao_lines:8    Blank_lines:1  </span><br><span class="line">Total jinghao lines: 95</span><br><span class="line">Total blank lines: 206</span><br><span class="line">[root@centos jerry_go]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">异常的走一个！ 欧耶！</span><br><span class="line">[root@centos jerry_go]<span class="comment"># bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/funct234ions /etc/fstab </span></span><br><span class="line">The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  </span><br><span class="line">The file /etc/rc.d/init.d/funct234ions no exist</span><br><span class="line">[root@centos jerry_go]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">异常的再走一个！    </span><br><span class="line">[root@centos jerry_go]<span class="comment"># bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/functions /etc/fst123ab </span></span><br><span class="line">The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  </span><br><span class="line">The file /etc/rc.d/init.d/<span class="built_in">functions</span> Jinghao_lines:43    Blank_lines:105  </span><br><span class="line">The file /etc/fst123ab no exist</span><br><span class="line">[root@centos jerry_go]<span class="comment"># </span></span><br><span class="line">   </span><br><span class="line">最后发现井号的英文是well number ， 脚本里面用拼音实在是很low，不过我是刚开始嘛，who care......</span><br></pre></td></tr></table></figure><p>11、显示当前系统上所有默认shell为bash的用户的用户名、UID以及此类所有用户的UID之和；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@centos jerry_go]<span class="comment"># cat week7_title11.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Author:Jerry</span></span><br><span class="line"><span class="comment">#Description</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">grep <span class="string">"bin/bash$"</span> /etc/passwd  |cut -d<span class="string">":"</span> -f1,3</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `grep <span class="string">"bin/bash$"</span> /etc/passwd  |awk -F <span class="string">":"</span> <span class="string">'&#123;print $3&#125;'</span>`;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">let</span> sum+=<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">               </span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"Users ID sum is:<span class="variable">$sum</span>"</span></span><br><span class="line"></span><br><span class="line">[root@centos jerry_go]<span class="comment"># bash week7_title11.sh </span></span><br><span class="line">root:0</span><br><span class="line">magedu:500</span><br><span class="line">mamamamam:501</span><br><span class="line">magedu1:502</span><br><span class="line">abb1:503</span><br><span class="line">abb2:504</span><br><span class="line">abb3:505</span><br><span class="line">abb4:506</span><br><span class="line">visitor1:507</span><br><span class="line">visitor2:508</span><br><span class="line">visitor3:509</span><br><span class="line">visitor4:510</span><br><span class="line">visitor5:511</span><br><span class="line">visitor6:512</span><br><span class="line">visitor7:513</span><br><span class="line">visitor8:514</span><br><span class="line">visitor9:515</span><br><span class="line">visitor10:516</span><br><span class="line">visitor11:517</span><br><span class="line">visitor12:518</span><br><span class="line">visitor13:519</span><br><span class="line">visitor14:520</span><br><span class="line">visitor15:521</span><br><span class="line">visitor16:522</span><br><span class="line">visitor17:523</span><br><span class="line">visitor18:524</span><br><span class="line">visitor19:525</span><br><span class="line">visitor20:526</span><br><span class="line">Users ID sum is:13851</span><br></pre></td></tr></table></figure><p>12、显示当前系统上所有，拥有附加组的用户的用户名；并说明共有多少个此类用户；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@centos jerry_go]<span class="comment"># bash week7_title12.sh </span></span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">sys</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line">mail</span><br><span class="line">haldaemon</span><br><span class="line">This users has 7.</span><br><span class="line"></span><br><span class="line">[root@centos jerry_go]<span class="comment"># cat week7_title12.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Author:Jerry</span></span><br><span class="line"><span class="comment">#Description</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">grep -v <span class="string">":$"</span> /etc/group |awk -F <span class="string">":"</span> <span class="string">'&#123;print $1&#125;'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"This users has <span class="variable">$(grep -v ":$" /etc/group |awk -F ":" '&#123;print $1&#125;'|wc -l)</span>."</span></span><br></pre></td></tr></table></figure><p>13、创建一个由至少两个物理卷组成的大小为20G的卷组；要求，PE大小为8M；而在卷组中创建一个大小为5G的逻辑卷mylv1，格式化为ext4文件系统，开机自动挂载至/users目录，支持acl；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># pvdisplay   #先看看环境</span></span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda2</span><br><span class="line">  VG Name               vg_centos</span><br><span class="line">  PV Size               159.51 GiB / not usable 3.00 MiB</span><br><span class="line">  Allocatable           yes (but full)</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              40834</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          40834</span><br><span class="line">  PV UUID               1O2YO5-7puR-3Pfu-nR15-tqCc-JjPN-giIZeh</span><br><span class="line">   </span><br><span class="line">  <span class="string">"/dev/sdb1"</span> is a new physical volume of <span class="string">"10.00 GiB"</span></span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb1</span><br><span class="line">  VG Name               </span><br><span class="line">  PV Size               10.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0   </span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               dmUkps-1j6e-q50O-yOh8-nBlT-lw6t-nGKnat</span><br><span class="line">   </span><br><span class="line">  <span class="string">"/dev/sdc1"</span> is a new physical volume of <span class="string">"60.00 GiB"</span></span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdc1</span><br><span class="line">  VG Name               </span><br><span class="line">  PV Size               60.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0   </span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               WfoY2H-efkl-qx0z-Yetm-wyV0-3lUU-u815Aq</span><br><span class="line">   </span><br><span class="line">[root@centos ~]<span class="comment"># vgcreate -s 8m vg_mage /dev/sdb1 /dev/sdc1  #创建一个由至少两个物理卷组成的大小为20G的卷组，我这里不止了，无伤大雅。</span></span><br><span class="line">  Volume group <span class="string">"vg_mage"</span> successfully created</span><br><span class="line">[root@centos ~]<span class="comment"># lvcreate -L 5G -n mylv1 vg_mage &amp;&amp; mkfs.ext4 /dev/vg_mage/mylv1 #在卷组中创建一个大小为5G的逻辑卷mylv1，格式化为ext4文件系统</span></span><br><span class="line">[root@centos ~]<span class="comment"># mkdir /users &amp;&amp; echo "/dev/vg_mage/mylv1 /users ext4 defaults,acl 0 0" &gt;&gt; /etc/fstab  #自动挂载至/users目录，支持acl</span></span><br><span class="line">[root@centos ~]<span class="comment"># cat /etc/fstab </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># /etc/fstab</span></span><br><span class="line"><span class="comment"># Created by anaconda on Thu Jun 23 18:40:21 2016</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></span><br><span class="line"><span class="comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">/dev/mapper/vg_centos-lv_root /                       ext4    defaults        1 1</span><br><span class="line">UUID=7b714956-acd7-44cb-af53-4eacde793fd9 /boot                   ext4    defaults        1 2</span><br><span class="line"><span class="comment">#/dev/mapper/vg_centos-lv_swap swap                    swap    defaults        0 0</span></span><br><span class="line">tmpfs                   /dev/shm                tmpfs   defaults        0 0</span><br><span class="line">devpts                  /dev/pts                devpts  gid=5,mode=620  0 0</span><br><span class="line">sysfs                   /sys                    sysfs   defaults        0 0</span><br><span class="line">proc                    /proc                   proc    defaults        0 0</span><br><span class="line">/dev/vg_mage/mylv1 /users ext4 defaults,acl 0 0</span><br><span class="line"></span><br><span class="line"> [root@centos ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>14、新建用户magedu；其家目录为/users/magedu，而后su切换至此用户，复制多个文件至家目录；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># useradd magedu -d /users/magedu</span></span><br><span class="line">[root@centos ~]<span class="comment"># su - magedu</span></span><br><span class="line">[magedu@centos ~]$ cp /etc/*.conf ~</span><br><span class="line">[magedu@centos ~]$ ls -al</span><br><span class="line">总用量 188</span><br><span class="line">drwx------  4 magedu magedu  4096 12月 27 12:52 .</span><br><span class="line">drwxr-xr-x. 4 root   root    4096 12月 27 12:48 ..</span><br><span class="line">-rw-r--r--  1 magedu magedu   148 12月 27 12:52 asound.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu    18 5月  11 2016 .bash_logout</span><br><span class="line">-rw-r--r--  1 magedu magedu   176 5月  11 2016 .bash_profile</span><br><span class="line">-rw-r--r--  1 magedu magedu   124 5月  11 2016 .bashrc</span><br><span class="line">-rw-r--r--  1 magedu magedu  1780 12月 27 12:52 cas.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu 21214 12月 27 12:52 dnsmasq.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   519 12月 27 12:52 dracut.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu    20 12月 27 12:52 fprintd.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu     0 12月 27 12:52 gai.conf</span><br><span class="line">drwxr-xr-x  2 magedu magedu  4096 11月 12 2010 .gnome2</span><br><span class="line">-rw-r--r--  1 magedu magedu     9 12月 27 12:52 host.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu     0 12月 27 12:52 init.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  8120 12月 27 12:52 kdump.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   449 12月 27 12:52 krb5.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  1662 12月 27 12:52 latrace.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu    47 12月 27 12:52 ld.so.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  2293 12月 27 12:52 libuser.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   662 12月 27 12:52 logrotate.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu 10814 12月 27 12:52 ltrace.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   827 12月 27 12:52 mke2fs.conf</span><br><span class="line">drwxr-xr-x  4 magedu magedu  4096 6月  23 2016 .mozilla</span><br><span class="line">-rw-r--r--  1 magedu magedu  2620 12月 27 12:52 mtools.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  1688 12月 27 12:52 nsswitch.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  1698 12月 27 12:52 ntp.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   370 12月 27 12:52 pm-utils-hd-apm-restore.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   789 12月 27 12:52 prelink.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   966 12月 27 12:52 readahead.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu    81 12月 27 12:52 resolv.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  2875 12月 27 12:52 rsyslog.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   216 12月 27 12:52 sestatus.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  6717 12月 27 12:52 smartd.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   256 12月 27 12:52 sos.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  1800 12月 27 12:52 sysctl.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  1309 12月 27 12:52 tpvmlp.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu    45 12月 27 12:52 Trolltech.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   485 12月 27 12:52 updatedb.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu  3008 12月 27 12:52 warnquota.conf</span><br><span class="line">-rw-r--r--  1 magedu magedu   969 12月 27 12:52 yum.conf</span><br><span class="line">[magedu@centos ~]$</span><br></pre></td></tr></table></figure><p>​    </p><p>15、扩展mylv1至9G，确保扩展完成后原有数据完全可用；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lvextend -L +4G /dev/mapper/myvg-mylv1 </span><br><span class="line">resize2fs /dev/mapper/myvg-mylv1</span><br></pre></td></tr></table></figure><p>16、缩减mylv1至7G，确保缩减完成后原有数据完全可用；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># umount /dev/vg_mage/mylv1</span></span><br><span class="line"><span class="comment"># e2fsck -f /dev/vg_mage/mylv1</span></span><br><span class="line"><span class="comment"># resize2fs /dev/vg_mage/mylv11 7G</span></span><br><span class="line"><span class="comment"># lvreduce -L 7G /dev/vg_mage/mylv1</span></span><br><span class="line"><span class="comment"># mount /dev/vg_mage/mylv1 /users/</span></span><br></pre></td></tr></table></figure><p>17、对mylv1创建快照，并通过备份数据；要求保留原有的属主属组等信息；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos users]<span class="comment"># lvcreate -s -l 20 -n snvg1 -p r /dev/vg_mage/mylv1</span></span><br><span class="line">Logical volume <span class="string">"snvg1"</span> created.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;创建一个10G分区，并格式为ext4文件系统；&lt;/p&gt;
&lt;p&gt;(1) 要求其block大小为2048, 预留空间百分比为2, 卷标为MYDATA, 默认挂载属性包含acl；&lt;/p&gt;
&lt;p&gt;(2) 挂载至/data/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳；&lt;/p&gt;
    
    </summary>
    
    
      <category term="shell" scheme="https://zhusas.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Vim编辑器和脚本小试牛刀</title>
    <link href="https://zhusas.github.io/2018/08/02/Vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%92%8C%E8%84%9A%E6%9C%AC%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80/"/>
    <id>https://zhusas.github.io/2018/08/02/Vim编辑器和脚本小试牛刀/</id>
    <published>2018-08-02T08:44:00.000Z</published>
    <updated>2018-08-02T08:45:50.218Z</updated>
    
    <content type="html"><![CDATA[<p>VIM很强大，但是万变不离其宗，最核心的三模式以下图表示：</p><p><img src="http://i.imgur.com/6np2y0D.jpg" alt=""></p><h3 id="1、复制-etc-rc-d-rc-sysinit文件至-tmp目录，将-tmp-rc-sysinit文件中的以至少一个空白字符开头的行的行首加-；"><a href="#1、复制-etc-rc-d-rc-sysinit文件至-tmp目录，将-tmp-rc-sysinit文件中的以至少一个空白字符开头的行的行首加-；" class="headerlink" title="1、复制/etc/rc.d/rc.sysinit文件至/tmp目录，将/tmp/rc.sysinit文件中的以至少一个空白字符开头的行的行首加#；"></a>1、复制/etc/rc.d/rc.sysinit文件至/tmp目录，将/tmp/rc.sysinit文件中的以至少一个空白字符开头的行的行首加#；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/^[[:blank:]]\+.*/\0<span class="comment">#/g</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="2、复制-boot-grub-grub-conf至-tmp目录中，删除-tmp-grub-conf文件中的行首的空白字符；"><a href="#2、复制-boot-grub-grub-conf至-tmp目录中，删除-tmp-grub-conf文件中的行首的空白字符；" class="headerlink" title="2、复制/boot/grub/grub.conf至/tmp目录中，删除/tmp/grub.conf文件中的行首的空白字符；"></a>2、复制/boot/grub/grub.conf至/tmp目录中，删除/tmp/grub.conf文件中的行首的空白字符；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/^[[:space:]]\+//g</span><br></pre></td></tr></table></figure><h3 id="3、删除-tmp-rc-sysinit文件中的以-开头，且后面跟了至少一个空白字符的行行的-和空白字符"><a href="#3、删除-tmp-rc-sysinit文件中的以-开头，且后面跟了至少一个空白字符的行行的-和空白字符" class="headerlink" title="3、删除/tmp/rc.sysinit文件中的以#开头，且后面跟了至少一个空白字符的行行的#和空白字符"></a>3、删除/tmp/rc.sysinit文件中的以#开头，且后面跟了至少一个空白字符的行行的#和空白字符</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/^<span class="comment">#[[:blank:]]\+//g</span></span><br></pre></td></tr></table></figure><h3 id="4、为-tmp-grub-conf文件中前三行的行首加-号；"><a href="#4、为-tmp-grub-conf文件中前三行的行首加-号；" class="headerlink" title="4、为/tmp/grub.conf文件中前三行的行首加#号；"></a>4、为/tmp/grub.conf文件中前三行的行首加#号；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:1,3s/^/\0<span class="comment">#/g</span></span><br></pre></td></tr></table></figure><h3 id="5、将-etc-yum-repos-d-CentOS-Media-repo文件中所有的enabled-0或gpgcheck-0的最后的0修改为1；"><a href="#5、将-etc-yum-repos-d-CentOS-Media-repo文件中所有的enabled-0或gpgcheck-0的最后的0修改为1；" class="headerlink" title="5、将/etc/yum.repos.d/CentOS-Media.repo文件中所有的enabled=0或gpgcheck=0的最后的0修改为1；"></a>5、将/etc/yum.repos.d/CentOS-Media.repo文件中所有的enabled=0或gpgcheck=0的最后的0修改为1；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/\(enabled\|gpgcheck\)=0/\1=1/g</span><br></pre></td></tr></table></figure><h3 id="6、每4小时执行一次对-etc目录的备份，备份至-backup目录中，保存的目录名为形如etc-201504020202"><a href="#6、每4小时执行一次对-etc目录的备份，备份至-backup目录中，保存的目录名为形如etc-201504020202" class="headerlink" title="6、每4小时执行一次对/etc目录的备份，备份至/backup目录中，保存的目录名为形如etc-201504020202"></a>6、每4小时执行一次对/etc目录的备份，备份至/backup目录中，保存的目录名为形如etc-201504020202</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* */4 * * * /usr/bin/cp /etc /backup/etc-$(date +%Y%m%d%H%M)/</span><br></pre></td></tr></table></figure><h3 id="7、每周2，4，6备份-var-log-messages文件至-backup-messages-logs-目录中，保存的文件名形如messages-20150402"><a href="#7、每周2，4，6备份-var-log-messages文件至-backup-messages-logs-目录中，保存的文件名形如messages-20150402" class="headerlink" title="7、每周2，4，6备份/var/log/messages文件至/backup/messages_logs/目录中，保存的文件名形如messages-20150402"></a>7、每周2，4，6备份/var/log/messages文件至/backup/messages_logs/目录中，保存的文件名形如messages-20150402</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * 2,4,6   /usr/bin/cp /var/<span class="built_in">log</span>/messages /backupmessages_logs/messages-$(date +%Y%m%d)</span><br></pre></td></tr></table></figure><h3 id="8、每天每两小时取当前系统-proc-meminfo文件中的所有以S开头的信息至-stats-memory-txt文件中"><a href="#8、每天每两小时取当前系统-proc-meminfo文件中的所有以S开头的信息至-stats-memory-txt文件中" class="headerlink" title="8、每天每两小时取当前系统/proc/meminfo文件中的所有以S开头的信息至/stats/memory.txt文件中"></a>8、每天每两小时取当前系统/proc/meminfo文件中的所有以S开头的信息至/stats/memory.txt文件中</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* */2 * * * /usr/bin/grep -E <span class="string">"S.*"</span> /proc/meminfo&gt;&gt;/stats/memory.txt</span><br></pre></td></tr></table></figure><h3 id="9、工作日的工作时间内，每两小时执行一次echo-“howdy”"><a href="#9、工作日的工作时间内，每两小时执行一次echo-“howdy”" class="headerlink" title="9、工作日的工作时间内，每两小时执行一次echo “howdy”"></a>9、工作日的工作时间内，每两小时执行一次echo “howdy”</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 9-18/2 * * 1-5        /usr/bin/<span class="built_in">echo</span> <span class="string">"howdy"</span></span><br></pre></td></tr></table></figure><h2 id="脚本编程部分"><a href="#脚本编程部分" class="headerlink" title="脚本编程部分"></a>脚本编程部分</h2><h3 id="创建目录-tmp-testdir-当前日期时间-在此目录创建100个空文件：file1-file100"><a href="#创建目录-tmp-testdir-当前日期时间-在此目录创建100个空文件：file1-file100" class="headerlink" title="创建目录/tmp/testdir-当前日期时间; 在此目录创建100个空文件：file1-file100"></a>创建目录/tmp/testdir-当前日期时间; 在此目录创建100个空文件：file1-file100</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># cat testdir</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Author:Jerry</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp &amp;&amp; mkdir testdir-$(date +%Y%m%d%H%M%S)</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> testdir-$(date +%Y%m%d%H%M%S)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..100&#125;; <span class="keyword">do</span></span><br><span class="line">    touch file<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># bash testdir</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># ls /tmp/testdir-20161219144412/</span></span><br><span class="line">file1    file14  file2   file25  file30  file36  file41  file47  file52  file58  file63  file69  file74  file8   file85  file90  file96</span><br><span class="line">file10   file15  file20  file26  file31  file37  file42  file48  file53  file59  file64  file7   file75  file80  file86  file91  file97</span><br><span class="line">file100  file16  file21  file27  file32  file38  file43  file49  file54  file6   file65  file70  file76  file81  file87  file92  file98</span><br><span class="line">file11   file17  file22  file28  file33  file39  file44  file5   file55  file60  file66  file71  file77  file82  file88  file93  file99</span><br><span class="line">file12   file18  file23  file29  file34  file4   file45  file50  file56  file61  file67  file72  file78  file83  file89  file94</span><br><span class="line">file13   file19  file24  file3   file35  file40  file46  file51  file57  file62  file68  file73  file79  file84  file9   file95</span><br><span class="line">[root@centos7 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="12、显示-etc-passwd文件中位于第偶数行的用户的用户名；"><a href="#12、显示-etc-passwd文件中位于第偶数行的用户的用户名；" class="headerlink" title="12、显示/etc/passwd文件中位于第偶数行的用户的用户名；"></a>12、显示/etc/passwd文件中位于第偶数行的用户的用户名；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># sed -n '2~2p' /etc/passwd |cut -d ":" -f1</span></span><br><span class="line">bin</span><br><span class="line">adm</span><br><span class="line">sync</span><br><span class="line">halt</span><br><span class="line">operator</span><br><span class="line">ftp</span><br><span class="line">avahi-autoipd</span><br><span class="line">systemd-network</span><br><span class="line">polkitd</span><br><span class="line">apache</span><br><span class="line">abrt</span><br><span class="line">unbound</span><br><span class="line">saslauth</span><br><span class="line">amandabackup</span><br><span class="line">geoclue</span><br><span class="line">setroubleshoot</span><br><span class="line">ntp</span><br><span class="line">nfsnobody</span><br><span class="line">qemu</span><br><span class="line">mysql</span><br><span class="line">pulse</span><br><span class="line">gnome-initial-setup</span><br><span class="line">sshd</span><br><span class="line">tcpdump</span><br><span class="line">hadoop</span><br><span class="line">testbash</span><br><span class="line">nologin</span><br><span class="line">user1</span><br></pre></td></tr></table></figure><h3 id="13、创建10用户user10-user19；密码同用户名；"><a href="#13、创建10用户user10-user19；密码同用户名；" class="headerlink" title="13、创建10用户user10-user19；密码同用户名；"></a>13、创建10用户user10-user19；密码同用户名；</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> &#123;10..19&#125;;<span class="keyword">do</span></span><br><span class="line">            <span class="keyword">if</span> id user<span class="variable">$i</span> ;<span class="keyword">then</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">"user<span class="variable">$i</span> exists."</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                    useradd user<span class="variable">$i</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">"user<span class="variable">$i</span>"</span> | passwd --stdin user<span class="variable">$i</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="14、在-tmp-创建10个空文件file10-file19-把file10的属主和属组改为user10，依次类推。"><a href="#14、在-tmp-创建10个空文件file10-file19-把file10的属主和属组改为user10，依次类推。" class="headerlink" title="14、在/tmp/创建10个空文件file10-file19; 把file10的属主和属组改为user10，依次类推。"></a>14、在/tmp/创建10个空文件file10-file19; 把file10的属主和属组改为user10，依次类推。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">            <span class="built_in">cd</span> /tmp/</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> &#123;10..19&#125;;<span class="keyword">do</span></span><br><span class="line">            <span class="keyword">if</span> [ -e file<span class="variable">$i</span> ] ;<span class="keyword">then</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">"file<span class="variable">$i</span> exists."</span></span><br><span class="line">                    chown user<span class="variable">$i</span>:user<span class="variable">$i</span> file<span class="variable">$i</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">                    touch file<span class="variable">$i</span></span><br><span class="line">                    chown user<span class="variable">$i</span>:user<span class="variable">$i</span> file<span class="variable">$i</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;VIM很强大，但是万变不离其宗，最核心的三模式以下图表示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/6np2y0D.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;1、复制-etc-rc-d-rc-sysinit文件至-tmp目录，将-tmp-rc-sysinit文件中的以至少一个空白字符开头的行的行首加-；&quot;&gt;&lt;a href=&quot;#1、复制-etc-rc-d-rc-sysinit文件至-tmp目录，将-tmp-rc-sysinit文件中的以至少一个空白字符开头的行的行首加-；&quot; class=&quot;headerlink&quot; title=&quot;1、复制/etc/rc.d/rc.sysinit文件至/tmp目录，将/tmp/rc.sysinit文件中的以至少一个空白字符开头的行的行首加#；&quot;&gt;&lt;/a&gt;1、复制/etc/rc.d/rc.sysinit文件至/tmp目录，将/tmp/rc.sysinit文件中的以至少一个空白字符开头的行的行首加#；&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;:%s/^[[:blank:]]\+.*/\0&lt;span class=&quot;comment&quot;&gt;#/g&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="shell" scheme="https://zhusas.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>skr! grep~ skr~~find!</title>
    <link href="https://zhusas.github.io/2018/08/02/skr-grep-skr-find/"/>
    <id>https://zhusas.github.io/2018/08/02/skr-grep-skr-find/</id>
    <published>2018-08-02T08:32:00.000Z</published>
    <updated>2018-08-02T08:33:30.996Z</updated>
    
    <content type="html"><![CDATA[<p>1、显示当前系统上root、fedora或user1用户的默认shell；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">"^(root|hadoop|user1)\&gt;"</span> /etc/passwd |cut -d<span class="string">":"</span> -f1,7</span><br></pre></td></tr></table></figure><p>2、找出/etc/rc.d/init.d/functions文件中某单词后面跟一组小括号的行，形如：hello()；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># grep  -E -o "[_[:alnum:]]+\(\)"  /etc/rc.d/init.d/functions</span></span><br><span class="line">checkpid()</span><br><span class="line">__pids_var_run()</span><br><span class="line">__pids_pidof()</span><br><span class="line">daemon()</span><br><span class="line">killproc()</span><br><span class="line">pidfileofproc()</span><br><span class="line">pidofproc()</span><br><span class="line">status()</span><br><span class="line">echo_success()</span><br><span class="line">echo_failure()</span><br><span class="line">echo_passed()</span><br><span class="line">echo_warning()</span><br><span class="line">update_boot_stage()</span><br><span class="line">success()</span><br><span class="line">failure()</span><br><span class="line">passed()</span><br><span class="line">warning()</span><br><span class="line">action()</span><br><span class="line">strstr()</span><br><span class="line">is_ignored_file()</span><br><span class="line">is_true()</span><br><span class="line">is_false()</span><br><span class="line">apply_sysctl()</span><br></pre></td></tr></table></figure><a id="more"></a><p>3、使用echo命令输出一个绝对路径，使用grep取出其基名；扩展：取出其路径名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment">#  echo "/etc/rc.d/init.d/functions" |grep -E -o "[^/]+$"</span></span><br><span class="line"><span class="built_in">functions</span></span><br><span class="line"></span><br><span class="line">[root@centos7 /]<span class="comment">#  echo "/etc/rc.d/init.d/functions" |grep -E -o  "^/.*/"</span></span><br><span class="line">/etc/rc.d/init.d/</span><br></pre></td></tr></table></figure><p>4、找出ifconfig命令结果中的1-255之间数字；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | grep  -E  -o  <span class="string">"\&lt;([1-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;"</span></span><br></pre></td></tr></table></figure><p>5、挑战题：写一个模式，能匹配合理的IP地址；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E -o <span class="string">"\&lt;([0-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;.\&lt;([0-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;.\&lt;([0-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;.\&lt;([0-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;"</span></span><br></pre></td></tr></table></figure><p>6、挑战题：写一个模式，能匹配出所有的邮件地址；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E -o “\&lt;[a-z0-9A-Z._%+-]+@[a-z0-9A-Z.-]+\.[a-zA-Z]&#123;2,6&#125;\&gt;”</span><br></pre></td></tr></table></figure><p>7、查找/var目录下属主为root，且属组为mail的所有文件或目录；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># find /var/ -user root -a -group mail</span></span><br><span class="line">/var/spool/mail</span><br><span class="line">/var/spool/mail/root</span><br></pre></td></tr></table></figure><p>8、查找当前系统上没有属主或属组的文件；进一步：查找当前系统上没有属主或属组，且最近3天内曾被访问过的文件或目录；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -nouser -o -nogroup -atime 3</span><br></pre></td></tr></table></figure><p>9、查找/etc目录下所有用户都有写权限的文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc/ -perm -020</span><br></pre></td></tr></table></figure><p>10、查找/etc目录下大于1M，且类型为普通文件的所有文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc/ -size +1M -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure><p>11、查找/etc/init.d/目录下，所有用户都有执行权限，且其它用户有写权限的文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc/init.d/ -perm -111 -perm -002</span><br></pre></td></tr></table></figure><p>12、查找/usr目录下不属于root、bin或hadoop的文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># find /usr ! \( -user root -o -user bin -o -user hadoop \)</span></span><br><span class="line">/usr/share/polkit-1/rules.d</span><br><span class="line">/usr/libexec/abrt-action-install-debuginfo-to-abrt-cache</span><br></pre></td></tr></table></figure><p>13、查找/etc/目录下至少有一类用户没有写权限的文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># find /usr ! \( -user root -o -user bin -o -user hadoop \)</span></span><br><span class="line">/usr/share/polkit-1/rules.d</span><br><span class="line">/usr/libexec/abrt-action-install-debuginfo-to-abrt-cache</span><br><span class="line">[root@centos7 /]<span class="comment"># find /usr -not \( -user root -o -user bin -o -user hadoop \)</span></span><br><span class="line">/usr/share/polkit-1/rules.d</span><br><span class="line">/usr/libexec/abrt-action-install-debuginfo-to-abrt-cache</span><br><span class="line">[root@centos7 /]<span class="comment"># find /usr ! \( -user root -o -user bin -o -user hadoop \)</span></span><br><span class="line">/usr/share/polkit-1/rules.d</span><br><span class="line">/usr/libexec/abrt-action-install-debuginfo-to-abrt-cache</span><br><span class="line">[root@centos7 /]<span class="comment"># find /etc/ -not -perm /222</span></span><br><span class="line">/etc/pki/ca-trust/extracted/java/cacerts</span><br><span class="line">/etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt</span><br><span class="line">/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem</span><br><span class="line">/etc/pki/ca-trust/extracted/pem/email-ca-bundle.pem</span><br><span class="line">/etc/pki/ca-trust/extracted/pem/objsign-ca-bundle.pem</span><br><span class="line">/etc/gshadow</span><br><span class="line">/etc/openldap/certs/password</span><br><span class="line">/etc/shadow</span><br><span class="line">/etc/ld.so.conf.d/kernel-3.10.0-327.el7.x86_64.conf</span><br><span class="line">/etc/ld.so.conf.d/kernel-3.10.0-327.36.3.el7.x86_64.conf</span><br><span class="line">/etc/udev/hwdb.bin</span><br><span class="line">/etc/gshadow-</span><br><span class="line">/etc/dbus-1/system.d/cups.conf</span><br><span class="line">/etc/shadow-</span><br><span class="line">/etc/lvm/profile/cache-mq.profile</span><br><span class="line">/etc/lvm/profile/cache-smq.profile</span><br><span class="line">/etc/lvm/profile/command_profile_template.profile</span><br><span class="line">/etc/lvm/profile/metadata_profile_template.profile</span><br><span class="line">/etc/lvm/profile/thin-generic.profile</span><br><span class="line">/etc/lvm/profile/thin-performance.profile</span><br><span class="line">/etc/pam.d/cups</span><br><span class="line">/etc/machine-id</span><br><span class="line">/etc/sudoers</span><br></pre></td></tr></table></figure><p>14、查找/etc目录下最近一周内其内容被修改过，且不属于root或hadoop的文件；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc -mtime -7 ! \( -user root -o -user hadoop \)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1、显示当前系统上root、fedora或user1用户的默认shell；&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grep -E &lt;span class=&quot;string&quot;&gt;&quot;^(root|hadoop|user1)\&amp;gt;&quot;&lt;/span&gt; /etc/passwd |cut -d&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt; -f1,7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2、找出/etc/rc.d/init.d/functions文件中某单词后面跟一组小括号的行，形如：hello()；&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@centos7 /]&lt;span class=&quot;comment&quot;&gt;# grep  -E -o &quot;[_[:alnum:]]+\(\)&quot;  /etc/rc.d/init.d/functions&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;checkpid()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__pids_var_run()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__pids_pidof()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;daemon()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;killproc()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pidfileofproc()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pidofproc()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;status()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo_success()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo_failure()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo_passed()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo_warning()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;update_boot_stage()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;success()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;failure()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;passed()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;warning()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;action()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;strstr()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;is_ignored_file()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;is_true()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;is_false()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply_sysctl()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="linux" scheme="https://zhusas.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux一些基本操作</title>
    <link href="https://zhusas.github.io/2018/08/02/Linux%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <id>https://zhusas.github.io/2018/08/02/Linux一些基本操作/</id>
    <published>2018-08-02T07:47:08.000Z</published>
    <updated>2018-08-02T07:47:53.093Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可"><a href="#一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可" class="headerlink" title="一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可"></a>一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w -h | cut -d<span class="string">" "</span> -f1 | uniq</span><br><span class="line">who |cut -d<span class="string">" "</span> -f1|uniq</span><br></pre></td></tr></table></figure><h3 id="二，取出最后登录到当前系统的用户相关信息"><a href="#二，取出最后登录到当前系统的用户相关信息" class="headerlink" title="二，取出最后登录到当前系统的用户相关信息"></a>二，取出最后登录到当前系统的用户相关信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w| tail -n 1</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="三，取出当前系统上被用户当作默认shell的最多的那个shell"><a href="#三，取出当前系统上被用户当作默认shell的最多的那个shell" class="headerlink" title="三，取出当前系统上被用户当作默认shell的最多的那个shell"></a>三，取出当前系统上被用户当作默认shell的最多的那个shell</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd |cut -d <span class="string">":"</span> -f7|grep /bin/bash|uniq</span><br></pre></td></tr></table></figure><h3 id="四，将-etc-passwd中的第三个字段数值最大的后10个用户的信息全部改为大写后保存至-tmp-maxusers-txt文件中"><a href="#四，将-etc-passwd中的第三个字段数值最大的后10个用户的信息全部改为大写后保存至-tmp-maxusers-txt文件中" class="headerlink" title="四，将/etc/passwd中的第三个字段数值最大的后10个用户的信息全部改为大写后保存至/tmp/maxusers.txt文件中"></a>四，将/etc/passwd中的第三个字段数值最大的后10个用户的信息全部改为大写后保存至/tmp/maxusers.txt文件中</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t: -k3 -n /etc/passwd |tail -10|tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span> &gt; /tmp/maxusers.txt</span><br></pre></td></tr></table></figure><h3 id="五，取出当前主机的IP地址，提示：对ifconfig命令的结果进行切分。"><a href="#五，取出当前主机的IP地址，提示：对ifconfig命令的结果进行切分。" class="headerlink" title="五，取出当前主机的IP地址，提示：对ifconfig命令的结果进行切分。"></a>五，取出当前主机的IP地址，提示：对ifconfig命令的结果进行切分。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS7    </span><br><span class="line">ifconfig |grep inet |cut -d<span class="string">' '</span> -f10|head -1</span><br></pre></td></tr></table></figure><h3 id="六，列出-etc-目录下所有以-conf结尾的文件的文件名，并将其名字转换为大写后保存至-tmp-etc-conf文件中"><a href="#六，列出-etc-目录下所有以-conf结尾的文件的文件名，并将其名字转换为大写后保存至-tmp-etc-conf文件中" class="headerlink" title="六，列出/etc/目录下所有以.conf结尾的文件的文件名，并将其名字转换为大写后保存至/tmp/etc.conf文件中"></a>六，列出/etc/目录下所有以.conf结尾的文件的文件名，并将其名字转换为大写后保存至/tmp/etc.conf文件中</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /etc/*.conf|cut -d<span class="string">'/'</span> -f3|tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span> &gt;/tmp/etc.conf</span><br></pre></td></tr></table></figure><h3 id="七，显示-var目录下一级子目录或文件的总个数"><a href="#七，显示-var目录下一级子目录或文件的总个数" class="headerlink" title="七，显示/var目录下一级子目录或文件的总个数"></a>七，显示/var目录下一级子目录或文件的总个数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -al /var/|head -1|cut -d<span class="string">' '</span> -f2</span><br></pre></td></tr></table></figure><h3 id="八，取出-etc-group文件中第三个字段数值最小的10个组的名字"><a href="#八，取出-etc-group文件中第三个字段数值最小的10个组的名字" class="headerlink" title="八，取出/etc/group文件中第三个字段数值最小的10个组的名字"></a>八，取出/etc/group文件中第三个字段数值最小的10个组的名字</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t: -k3 -n /etc/group|head -10|cut -d<span class="string">':'</span> -f1</span><br></pre></td></tr></table></figure><h3 id="九，将-etc-fstab和-etc-issue文件的内容合并为同一个内容保存至-tmp-etc-test文件中"><a href="#九，将-etc-fstab和-etc-issue文件的内容合并为同一个内容保存至-tmp-etc-test文件中" class="headerlink" title="九，将/etc/fstab和/etc/issue文件的内容合并为同一个内容保存至/tmp/etc.test文件中"></a>九，将/etc/fstab和/etc/issue文件的内容合并为同一个内容保存至/tmp/etc.test文件中</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/fstab /etc/issue &gt; /tmp/etc.test</span><br></pre></td></tr></table></figure><h3 id="十，请总结描述用户和组管理类命令的使用方法并完成练习"><a href="#十，请总结描述用户和组管理类命令的使用方法并完成练习" class="headerlink" title="十，请总结描述用户和组管理类命令的使用方法并完成练习"></a>十，请总结描述用户和组管理类命令的使用方法并完成练习</h3><p>(1)、创建组distro，其GID为2016;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd distro -g 2016</span><br></pre></td></tr></table></figure><p>(2)、创建用户mandriva, 其ID号为1005；基本组为distro;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser mandriva -u 1005 -g distro</span><br></pre></td></tr></table></figure><p>(3)、创建用户mageia，其ID号为1100，家目录为/home/linux;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd mageia -u 1100 -d /home/linux</span><br></pre></td></tr></table></figure><p>(4)、给用户mageia添加密码，密码为mageedu;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 home]<span class="comment"># passwd mageia </span></span><br><span class="line">更改用户 mageia 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@centos7 home]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>(5)、删除mandriva，但保留其家目录;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel mandriva</span><br></pre></td></tr></table></figure><p>(6)、创建用户slackware，其ID号为2002，基本组为distro，附加组peguin;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd peguin &amp;&amp; useradd slackware -u 2002 -g distro -G peguin</span><br></pre></td></tr></table></figure><p>(7)、修改slackware的默认shell为/bin/tcsh;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s /usr/bin/tcsh slackware</span><br></pre></td></tr></table></figure><p>(8)、为用户slackware新增附加组admins;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd admins &amp;&amp; usermod -G admins slackware</span><br></pre></td></tr></table></figure><p>(9)、为slackware添加密码，且要求密码最短使用期限为3天，最长为180天，警告为3天;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"123456"</span> | passwd --stdin slackware</span><br><span class="line">passwd -n 3 -x 180 -w 3 slackware</span><br></pre></td></tr></table></figure><p>(10)、添加用户openstack，其ID号为3003, 基本组为clouds，附加组为peguin和nova;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd nova &amp;&amp; groupadd clouds &amp;&amp; useradd openstack -u 3003 -g clouds -G peguin,nova</span><br></pre></td></tr></table></figure><p>(11)、添加系统用户mysql，要求其shell为/sbin/nologin;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -s /sbin/nologin mysql</span><br></pre></td></tr></table></figure><p>(12)、使用echo命令，非交互式为openstack添加密码.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"123456"</span> | passwd –stdin openstack</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可&quot;&gt;&lt;a href=&quot;#一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可&quot; class=&quot;headerlink&quot; title=&quot;一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可&quot;&gt;&lt;/a&gt;一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;w -h | cut -d&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; -f1 | uniq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;who |cut -d&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; -f1|uniq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;二，取出最后登录到当前系统的用户相关信息&quot;&gt;&lt;a href=&quot;#二，取出最后登录到当前系统的用户相关信息&quot; class=&quot;headerlink&quot; title=&quot;二，取出最后登录到当前系统的用户相关信息&quot;&gt;&lt;/a&gt;二，取出最后登录到当前系统的用户相关信息&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;w| tail -n 1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux上的文件管理类命令其常用的使用方法及其相关示例演示</title>
    <link href="https://zhusas.github.io/2018/08/02/Linux%E4%B8%8A%E7%9A%84%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%B1%BB%E5%91%BD%E4%BB%A4%E5%85%B6%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/"/>
    <id>https://zhusas.github.io/2018/08/02/Linux上的文件管理类命令其常用的使用方法及其相关示例演示/</id>
    <published>2018-08-02T07:41:00.000Z</published>
    <updated>2018-08-02T07:43:17.404Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目录管理类的命令"><a href="#目录管理类的命令" class="headerlink" title="目录管理类的命令"></a>目录管理类的命令</h2><h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [选项]... 目录...</span><br></pre></td></tr></table></figure><p>选项： </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-p 递归创建多个目录</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># mkdir -p /tmp/jerry/2016/11/4</span></span><br><span class="line">[root@centos7 /]<span class="comment"># tree /tmp</span></span><br><span class="line"> /tmp</span><br><span class="line">├── akonadi-root.9I0Ba3</span><br><span class="line">├── anaconda.log</span><br><span class="line">├── hogsuspend</span><br><span class="line">├── hsperfdata_root</span><br><span class="line">│   └── 88148</span><br><span class="line">├── hsperfdata_user</span><br><span class="line">├── ifcfg.log</span><br><span class="line">├── jerry</span><br><span class="line">│   └── 2016</span><br><span class="line">│       └── 11</span><br><span class="line">│           └──4</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**注意：**</span><br><span class="line">**centos7&amp;6默认没有安装tree命令，记得yum install tree 就OK。**</span><br></pre></td></tr></table></figure><a id="more"></a><p>选项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-v 显示创建过程即命令执行过程</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># mkdir -pv /tmp/aaa/bbb/ccc/2016/11qa</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/aaa"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/aaa/bbb"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/aaa/bbb/ccc"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/aaa/bbb/ccc/2016"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/aaa/bbb/ccc/2016/11qa"</span></span><br></pre></td></tr></table></figure><p>选项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-m：设定目录权限，不加则为默认权限</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># mkdir -m 777 -pv /tmp/fbi/cia</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/fbi"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/fbi/cia"</span>    </span><br><span class="line">[root@centos7 /]<span class="comment"># ll /tmp/fbi</span></span><br><span class="line">总用量 0</span><br><span class="line">drwxrwxrwx. 2 root root 6 11月  4 15:52 cia</span><br><span class="line"></span><br><span class="line">[root@centos7 /]<span class="comment"># mkdir -m 775 -pv /tmp/hbo/oom/ubuntu</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/hbo"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/hbo/oom"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/hbo/oom/ubuntu</span></span><br><span class="line"><span class="string">[root@centos7 /]# ll /tmp/hbo/oom/</span></span><br><span class="line"><span class="string">总用量 0</span></span><br><span class="line"><span class="string">drwxrwxr-x. 2 root root 6 11月  4 16:00 ubuntu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：-m 参数设定的目录权限只对最后一级的目录生效，其上级目录均是默认的755。哈哈~~</span></span><br></pre></td></tr></table></figure><h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><p>用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir [选项]... 目录...</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    --ignore-fail-on-non-empty</span><br><span class="line">         忽略仅由目录非空产生的所有错误</span><br><span class="line">-p, --parents   remove DIRECTORY and its ancestors; e.g., <span class="string">'rmdir -p a/b/c'</span> is</span><br><span class="line">                similar to <span class="string">'rmdir a/b/c a/b a'</span></span><br><span class="line">-v, --verbose   output a diagnostic <span class="keyword">for</span> every directory processed</span><br><span class="line">    --<span class="built_in">help</span> 显示此帮助信息并退出</span><br><span class="line">    --version 显示版本信息并退出</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 tmp]<span class="comment"># rmdir -pv fbi/cia/</span></span><br><span class="line">rmdir: 正在删除目录 <span class="string">"fbi/cia/"</span></span><br><span class="line">rmdir: 正在删除目录 <span class="string">"fbi"</span></span><br></pre></td></tr></table></figure><h2 id="文件查看类命令"><a href="#文件查看类命令" class="headerlink" title="文件查看类命令"></a>文件查看类命令</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法：cat [选项]... [文件]...</span><br><span class="line">将[文件]或标准输入组合输出到标准输出。</span><br></pre></td></tr></table></figure><p>选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-A, --show-all           等于-vET</span><br><span class="line">-b, --number-nonblank    对非空输出行编号</span><br><span class="line">-e                       等于-vE</span><br><span class="line">-E, --show-ends          在每行结束处显示<span class="string">"$"</span></span><br><span class="line">-n, --number             对输出的所有行编号</span><br><span class="line">-s, --squeeze-blank      不输出多行空行</span><br><span class="line">-t                       与-vT 等价</span><br><span class="line">-T, --show-tabs          将跳格字符显示为^I</span><br><span class="line">-u                       (被忽略)</span><br><span class="line">-v, --show-nonprinting   使用^ 和M- 引用，除了LFD和 TAB 之外</span><br><span class="line">    --<span class="built_in">help</span>显示此帮助信息并退出</span><br><span class="line">    --version显示版本信息并退出</span><br></pre></td></tr></table></figure><p>平时可能用到的选项就是输出行号了，实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># cat -n /etc/rc.local </span></span><br><span class="line"> 1<span class="comment">#!/bin/bash</span></span><br><span class="line"> 2<span class="comment"># THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES</span></span><br><span class="line"> 3<span class="comment">#</span></span><br><span class="line"> 4<span class="comment"># It is highly advisable to create own systemd services or udev rules</span></span><br><span class="line"> 5<span class="comment"># to run scripts during boot instead of using this file.</span></span><br><span class="line"> 6<span class="comment">#</span></span><br><span class="line"> 7<span class="comment"># In contrast to previous versions due to parallel execution during boot</span></span><br><span class="line"> 8<span class="comment"># this script will NOT be run after all other services.</span></span><br><span class="line"> 9<span class="comment">#</span></span><br><span class="line">10<span class="comment"># Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure</span></span><br><span class="line">11<span class="comment"># that this script will be executed during boot.</span></span><br><span class="line">12</span><br><span class="line">13touch /var/lock/subsys/<span class="built_in">local</span></span><br><span class="line">[root@centos7 /]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h3><p>tac命令：与cat功能相近，只是逆序显示文件内容</p><h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">head [选项]... [文件]...</span><br><span class="line">查看文件的前N行，默认为10行</span><br></pre></td></tr></table></figure><p>选项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-n </span><br><span class="line">-#</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># head  /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@centos7 ~]<span class="comment"># head - 15 /etc/passwd</span></span><br><span class="line"></span><br><span class="line">[root@centos7 ~]<span class="comment"># head -15 /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">avahi-autoipd:x:170:170:Avahi IPv4LL Stack:/var/lib/avahi-autoipd:/sbin/nologin</span><br><span class="line">systemd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin</span><br></pre></td></tr></table></figure><h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><p>用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail [选项]... [文件]...</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-n：指定显示的行数。不加任何参数默认显示10行，从最后一行开始；</span><br><span class="line">-#：直接指定显示的行数，从最后一行开始；</span><br><span class="line">-f：查看文件尾部内容结束后不退出，跟随显示新增的行；</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># tail -2 /etc/passwd</span></span><br><span class="line">tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">user:x:1000:1000:user:/home/user:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]<span class="comment"># tail /etc/passwd</span></span><br><span class="line">mysql:x:27:27:MariaDB Server:/var/lib/mysql:/sbin/nologin</span><br><span class="line">pcp:x:988:985:Performance Co-Pilot:/var/lib/pcp:/sbin/nologin</span><br><span class="line">pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin</span><br><span class="line">gdm:x:42:42::/var/lib/gdm:/sbin/nologin</span><br><span class="line">gnome-initial-setup:x:987:982::/run/gnome-initial-setup/:/sbin/nologin</span><br><span class="line">avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">oprofile:x:16:16:Special user account to be used by OProfile:/var/lib/oprofile:/sbin/nologin</span><br><span class="line">tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">user:x:1000:1000:user:/home/user:/bin/bash</span><br></pre></td></tr></table></figure><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">more [选项] 文件...</span><br><span class="line">特点：翻屏至文件尾部后自动退出；</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-d        显示帮助，而不是响铃</span><br><span class="line">-f        统计逻辑行数而不是屏幕行数</span><br><span class="line">-l        抑制换页(form feed)后的暂停</span><br><span class="line">-p        不滚屏，清屏并显示文本</span><br><span class="line">-c        不滚屏，显示文本并清理行尾</span><br><span class="line">-u        抑制下划线</span><br><span class="line">-s        将多个空行压缩为一行</span><br><span class="line">-NUM      指定每屏显示的行数为 NUM</span><br><span class="line">+NUM      从文件第 NUM 行开始显示</span><br><span class="line">+/STRING  从匹配搜索字符串 STRING 的文件位置开始显示</span><br><span class="line">-V        输出版本信息并退出</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">略过，给你个眼神自己体会^_^</span><br></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p> 特点： 其实man读取帮助手册就是调用的less指令。所以less命令的操作方式同man</p><h2 id="文件管理类命令"><a href="#文件管理类命令" class="headerlink" title="文件管理类命令"></a>文件管理类命令</h2><h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">单源复制：cp [OPTION]... [-T] SOURCE DEST</span><br><span class="line">多源复制：cp [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">         cp [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line"></span><br><span class="line">单源复制：cp [OPTION]... [-T] SOURCE DEST</span><br><span class="line">         如果DEST不存在：则事先创建此文件，并复制源文件的数据流至DEST中；</span><br><span class="line">        如果DEST存在：</span><br><span class="line">            如果DEST是非目录文件：则覆盖目标文件；</span><br><span class="line">            如果DEST是目录文件：则先在DEST目录下创建一个与源文件同名的文件，并复制其数据流；</span><br><span class="line"></span><br><span class="line">多源复制：cp [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">         cp [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line"></span><br><span class="line">        如果DEST不存在：错误；</span><br><span class="line">        如果DEST存在：</span><br><span class="line">        如果DEST是非目录文件：错误；</span><br><span class="line">        如果DEST是目录文件：分别复制每个文件至目标目录中，并保持原名；</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-i：交互式复制，即覆盖之前提醒用户确认；</span><br><span class="line">-f：强制覆盖目标文件；</span><br><span class="line">-r, -R：递归复制目录；</span><br><span class="line">-d：复制符号链接文件本身，而非其指向的源文件；</span><br><span class="line">-a：-dR --preserve=all, archive，用于实现归档；</span><br><span class="line">--preserv=</span><br><span class="line">      mode：权限</span><br><span class="line">      ownership：属主和属组</span><br><span class="line">      timestamps: 时间戳</span><br><span class="line">      context：安全标签</span><br><span class="line">      xattr：扩展属性</span><br><span class="line">      links：符号链接</span><br><span class="line">      all：上述所有属性</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">`单源复制-目标文件不存在情况`</span><br><span class="line">[root@centos ~]<span class="comment"># ls /tmp/</span></span><br><span class="line">whatis.q3Uigb  yum.log</span><br><span class="line">[root@centos ~]<span class="comment"># cp /etc/issue /tmp</span></span><br><span class="line">[root@centos ~]<span class="comment"># ls /tmp/</span></span><br><span class="line">issue  whatis.q3Uigb  yum.log</span><br><span class="line">[root@centos ~]<span class="comment"># cat /tmp/issue </span></span><br><span class="line">CentOS release 6.5 (Final)</span><br><span class="line">Kernel \r on an \m</span><br><span class="line"></span><br><span class="line">`单源复制-目标文件已存在情况`</span><br><span class="line">[root@centos ~]<span class="comment"># cp /etc/hosts /tmp/issue </span></span><br><span class="line">cp: overwrite `/tmp/issue<span class="string">'? y</span></span><br><span class="line"><span class="string">[root@centos ~]# cat /tmp/issue </span></span><br><span class="line"><span class="string"> 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span></span><br><span class="line"><span class="string"> ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`多源复制-目标目录不存在情况`</span></span><br><span class="line"><span class="string">[root@centos ~]# cp /etc/hosts /etc/issue /tmp/x</span></span><br><span class="line"><span class="string">cp: target `/tmp/x'</span> is not a directory</span><br><span class="line"></span><br><span class="line">`多源复制-目标目录已存在情况`</span><br><span class="line">[root@centos ~]<span class="comment"># mkdir /tmp/x</span></span><br><span class="line">[root@centos ~]<span class="comment"># cp /etc/hosts /etc/issue /tmp/x</span></span><br><span class="line">[root@centos ~]<span class="comment"># ls /tmp/x</span></span><br><span class="line">hosts  issue</span><br><span class="line">[root@centos ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">`-r选项实例`</span><br><span class="line">[root@centos ~]<span class="comment"># mkdir -p /tmp/souce/x/y/z</span></span><br><span class="line">[root@centos ~]<span class="comment"># mkdir /tmp/dest</span></span><br><span class="line">[root@centos ~]<span class="comment"># cp -r /tmp/souce/ /tmp/dest/</span></span><br><span class="line">[root@centos ~]<span class="comment"># tree /tmp/dest/    /tmp/dest/</span></span><br><span class="line">└── souce</span><br><span class="line">    └── x</span><br><span class="line">        └── y</span><br><span class="line">            └── z</span><br><span class="line"></span><br><span class="line">4 directories, 0 files</span><br><span class="line">[root@centos ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">`--preserve选项实例`</span><br><span class="line">[root@centos ~]<span class="comment"># ls -l /tmp/ |grep liubin</span></span><br><span class="line">-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:56 liubin    </span><br><span class="line">[root@centos ~]<span class="comment"># cp --preserve=ownership /tmp/liubin /tmp/root</span></span><br><span class="line">[root@centos ~]<span class="comment"># ls -l /tmp/</span></span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x. 3 root   root   4096 Sep 27 04:53 dest</span><br><span class="line">-rw-r--r--. 1 root   root    158 Sep 27 04:43 issue    </span><br><span class="line">-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:56 liubin    </span><br><span class="line">-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:59 root    </span><br><span class="line">drwxr-xr-x. 3 root   root   4096 Sep 27 04:49 souce</span><br><span class="line">drwxr-xr-x. 2 root   root   4096 Sep 27 04:44 x</span><br><span class="line">-rw-------. 1 root   root      0 Sep 27 03:07 yum.log</span><br></pre></td></tr></table></figure><h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv [OPTION]... [-T] SOURCE DEST</span><br><span class="line">mv [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">mv [OPTION]... -t DIRECTORY SOURCE..</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-i：交互式    </span><br><span class="line">-f：强制移动</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># tree test</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">|-- 1p2a</span><br><span class="line">|-- 28pa</span><br><span class="line">|-- Pa99</span><br><span class="line">|-- cpdoc.txt</span><br><span class="line">|-- hahaha</span><br><span class="line">|   |-- cpdoc.txt</span><br><span class="line">|   |-- cpdoc1.txt</span><br><span class="line">|   `-- text.txt</span><br><span class="line">|-- p,a</span><br><span class="line">|-- pa</span><br><span class="line">|-- pa12</span><br><span class="line">`-- papi</span><br><span class="line"></span><br><span class="line">1 directory, 11 files</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># mv test/1p2a test/hahaha</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tree test</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">|-- 28pa</span><br><span class="line">|-- Pa99</span><br><span class="line">|-- cpdoc.txt</span><br><span class="line">|-- hahaha</span><br><span class="line">|   |-- 1p2a</span><br><span class="line">|   |-- cpdoc.txt</span><br><span class="line">|   |-- cpdoc1.txt</span><br><span class="line">|   `-- text.txt</span><br><span class="line">|-- p,a</span><br><span class="line">|-- pa</span><br><span class="line">|-- pa12</span><br><span class="line">`-- papi</span><br><span class="line"></span><br><span class="line">1 directory, 11 files</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># mv test/hahaha test/mvtest</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tree test</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">|-- 28pa</span><br><span class="line">|-- Pa99</span><br><span class="line">|-- cpdoc.txt</span><br><span class="line">|-- mvtest</span><br><span class="line">|   |-- 1p2a</span><br><span class="line">|   |-- cpdoc.txt</span><br><span class="line">|   |-- cpdoc1.txt</span><br><span class="line">|   `-- text.txt</span><br><span class="line">|-- p,a</span><br><span class="line">|-- pa</span><br><span class="line">|-- pa12</span><br><span class="line">`-- papi</span><br><span class="line"></span><br><span class="line">1 directory, 11 files</span><br></pre></td></tr></table></figure><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><p>用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [OPTION]... FILE...</span><br></pre></td></tr></table></figure><p>选项参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-i：interactive</span><br><span class="line">-f：force</span><br><span class="line">-r: recursive</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># ls /tmp</span></span><br><span class="line">dest  issue  liubin  root  souce  yum.log</span><br><span class="line">[root@centos ~]<span class="comment"># tree /tmp/souce/</span></span><br><span class="line">/tmp/souce/</span><br><span class="line">└── x</span><br><span class="line">    └── y</span><br><span class="line">        └── z    </span><br><span class="line">3 directories, 0 files</span><br><span class="line">[root@centos ~]<span class="comment"># rm -rf /tmp/souce/</span></span><br><span class="line">[root@centos ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  install.log  install.log.syslog</span><br><span class="line">[root@centos ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h2 id="bash的工作特性之命令执行状态返回值和命令行展开所涉及的内容及其示例演示。"><a href="#bash的工作特性之命令执行状态返回值和命令行展开所涉及的内容及其示例演示。" class="headerlink" title="bash的工作特性之命令执行状态返回值和命令行展开所涉及的内容及其示例演示。"></a>bash的工作特性之命令执行状态返回值和命令行展开所涉及的内容及其示例演示。</h2><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>echo $?：显示最近一条命令的执行结果</p><p>只能查看最近一条命令的执行的状态结果返回值</p><p>命令执行成功，则显示：0</p><p>命令执行失败，则显示：1-255之间的任意数字 </p><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># ls /var</span></span><br><span class="line">account  cache  db     games   kerberos  <span class="built_in">local</span>  <span class="built_in">log</span>   nis  preserve  spool   tmp  yp</span><br><span class="line">adm      crash  empty  gopher  lib       lock   mail  opt  run       target  www</span><br><span class="line">[root@centos7 ~]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@centos7 ~]<span class="comment"># ls /varte</span></span><br><span class="line">ls: 无法访问/varte: 没有那个文件或目录</span><br><span class="line">[root@centos7 ~]<span class="comment"># echo $?</span></span><br><span class="line">2</span><br><span class="line">[root@centos7 ~]<span class="comment"># lsd /var</span></span><br><span class="line">bash: lsd: 未找到命令...</span><br><span class="line">[root@centos7 ~]<span class="comment"># echo $?</span></span><br><span class="line">127</span><br><span class="line">[root@centos7 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="创建-tmp目录下的：a-c-a-d-b-c-b-d"><a href="#创建-tmp目录下的：a-c-a-d-b-c-b-d" class="headerlink" title="创建/tmp目录下的：a_c, a_d, b_c, b_d"></a>创建/tmp目录下的：a_c, a_d, b_c, b_d</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#  mkdir -v /tmp/&#123;a,b&#125;_&#123;c,d&#125;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/a_c"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/a_d"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/b_c"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/b_d"</span></span><br><span class="line">[root@centos7 ~]<span class="comment"># ls /tmp/</span></span><br><span class="line">a_c</span><br><span class="line">a_d</span><br><span class="line">anaconda.log</span><br><span class="line">b_c </span><br><span class="line">b_d</span><br></pre></td></tr></table></figure><h3 id="创建-tmp-mylinux目录下的："><a href="#创建-tmp-mylinux目录下的：" class="headerlink" title="创建/tmp/mylinux目录下的："></a>创建/tmp/mylinux目录下的：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mylinux</span><br><span class="line">├── bin</span><br><span class="line">├── boot</span><br><span class="line">│   └── grub</span><br><span class="line">├── dev</span><br><span class="line">├── etc</span><br><span class="line">│   ├── rc.d</span><br><span class="line">│   │   └── init.d</span><br><span class="line">│   └── sysconfig</span><br><span class="line">│       └── network-scripts</span><br><span class="line">├── lib</span><br><span class="line">│   └── modules</span><br><span class="line">├── lib64</span><br><span class="line">├── proc</span><br><span class="line">├── sbin</span><br><span class="line">├── sys</span><br><span class="line">├── tmp</span><br><span class="line">├── usr</span><br><span class="line">│   └── <span class="built_in">local</span></span><br><span class="line">│       ├── bin</span><br><span class="line">│       └── sbin</span><br><span class="line">└── var</span><br><span class="line">    ├── lock</span><br><span class="line">    ├── <span class="built_in">log</span></span><br><span class="line">    └── run</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment"># mkdir -pv /tmp/mylinux/&#123;bin,boot/grub,dev,etc/&#123;rc.d/init.d,sysconfig/network-scripts&#125;,lib/modules,lib64,proc,sbin,sys,tmp,usr/local/&#123;bin,sbin&#125;,var/&#123;lock,log,run&#125;&#125;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/bin"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/boot"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/boot/grub"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/dev"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/etc"</span> </span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/etc/rc.d"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/etc/rc.d/init.d"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/etc/sysconfig"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/etc/sysconfig/network-scripts"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/lib"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/lib/modules"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/lib64"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/proc"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/sbin"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/sys"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/tmp"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/usr"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/usr/local"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/usr/local/bin"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/usr/local/sbin"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/var"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/var/lock"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/var/log"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"/tmp/mylinux/var/run"</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="文件的元数据信息有哪些，分别表示什么含义，如何查看？如何修改文件的时间戳信息。"><a href="#文件的元数据信息有哪些，分别表示什么含义，如何查看？如何修改文件的时间戳信息。" class="headerlink" title="文件的元数据信息有哪些，分别表示什么含义，如何查看？如何修改文件的时间戳信息。"></a>文件的元数据信息有哪些，分别表示什么含义，如何查看？如何修改文件的时间戳信息。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 etc]<span class="comment"># stat /bin/bash</span></span><br><span class="line">文件：<span class="string">"/bin/bash"</span></span><br><span class="line">大小：960392    块：1880       IO 块：4096   普通文件</span><br><span class="line">设备：fd00h/64768dInode：67111627    硬链接：1</span><br><span class="line">权限：(0755/-rwxr-xr-x)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">环境：system_u:object_r:shell_exec_t:s0 </span><br><span class="line">最近访问：2016-11-06 13:06:17.318000042 +0800</span><br><span class="line">最近更改：2016-08-03 00:00:07.000000000 +0800</span><br><span class="line">最近改动：2016-11-03 13:47:45.414998262 +0800</span><br><span class="line">创建时间：-</span><br><span class="line"></span><br><span class="line">touch命令：</span><br><span class="line">touch - change file timestamps</span><br><span class="line"></span><br><span class="line">touch [OPTION]... FILE...</span><br><span class="line"> -c: 指定的文件路径不存在时不予创建；</span><br><span class="line"> -a: 仅修改access time；</span><br><span class="line"> -m：仅修改modify time；</span><br><span class="line"> -t STAMP</span><br><span class="line">[[CC]YY]MMDDhhmm[.ss]</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">实例一：创建不存在的文件</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line">touch log2012.log log2013.log</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># touch log2012.log log2013.log</span></span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"></span><br><span class="line">如果log2014.log不存在，则不创建文件</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># touch -c log2014.log</span></span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"></span><br><span class="line">实例二：更新log.log的时间和log2012.log时间戳相同</span><br><span class="line"></span><br><span class="line">命令：</span><br><span class="line">touch -r log.log log2012.log</span><br><span class="line">   </span><br><span class="line">输出：</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log.log</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># touch -r log.log log2012.log</span></span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log.log</span><br><span class="line"></span><br><span class="line">实例三：设定文件的时间戳</span><br><span class="line">   </span><br><span class="line">命令：</span><br><span class="line">touch -t 201211142234.50 log.log</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log.log</span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># touch -t 201211142234.50 log.log</span></span><br><span class="line">［root@localhost <span class="built_in">test</span>］<span class="comment"># ll</span></span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log</span><br><span class="line"> -rw-r--r-- 1 root root 0 2012-11-14 log.log</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line"> -t time 使用指定的时间值 time 作为指定文件相应时间戳记的新值．此处的 time规定为如下形式的十进制数：</span><br><span class="line">［［CC］YY］MMDDhhmm［.SS］</span><br><span class="line">   </span><br><span class="line"> 这里，CC为年数中的前两位，即”世纪数”；YY为年数的后两位，即某世纪中的年数．如果不给出CC的值，则touch 将把年数CCYY限定1969--2068之内．MM为月数，DD为天将把年数CCYY限定在1969--2068之内．MM为月数，DD为天数，hh 为小时数（几点），mm为分钟数，SS为秒数．此处秒的设定范围是0--61，这样可以处理闰秒．这些数字组成的时间是环境变量TZ指定的时区中的一个时 间．由于系统的限制，早于1970年1月1日的时间是错误的</span><br></pre></td></tr></table></figure><h3 id="如何定义一个命令的别名，如何在命令中引用另一个命令的执行结果？"><a href="#如何定义一个命令的别名，如何在命令中引用另一个命令的执行结果？" class="headerlink" title="如何定义一个命令的别名，如何在命令中引用另一个命令的执行结果？"></a>如何定义一个命令的别名，如何在命令中引用另一个命令的执行结果？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">命令别名查看：</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># alias</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cp=<span class="string">'cp -i'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> l.=<span class="string">'ls -d .* --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -l --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> mv=<span class="string">'mv -i'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">'rm -i'</span></span><br><span class="line"></span><br><span class="line">创建别名：</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># alias clear='cls'</span></span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># alias</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> clear=<span class="string">'cls'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cp=<span class="string">'cp -i'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> l.=<span class="string">'ls -d .* --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -l --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> mv=<span class="string">'mv -i'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">'rm -i'</span></span><br><span class="line"></span><br><span class="line">引用命令的执行结果：</span><br><span class="line"></span><br><span class="line"> 使用“引用：</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># echo `date`</span></span><br><span class="line"></span><br><span class="line">Tue Sep 27 06:45:08 CST 2016</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">使用$(COMMAND)引用</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment"># file $(which --skip-alias ls)</span></span><br><span class="line"></span><br><span class="line">/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), <span class="keyword">for</span> GNU/Linux 2.6.18, stripped</span><br><span class="line"></span><br><span class="line">[root@centos ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="显示var目录下所有以l开头，以一个小写字母结尾，且中间至少出现一位数字（可以有其它字符）的文件或目录。"><a href="#显示var目录下所有以l开头，以一个小写字母结尾，且中间至少出现一位数字（可以有其它字符）的文件或目录。" class="headerlink" title="显示var目录下所有以l开头，以一个小写字母结尾，且中间至少出现一位数字（可以有其它字符）的文件或目录。"></a>显示var目录下所有以l开头，以一个小写字母结尾，且中间至少出现一位数字（可以有其它字符）的文件或目录。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># ls -dl /var/l*[0-9]*[a-z]</span></span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l42opm</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l47wsd</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:38 /var/l9cxz</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 15:35 /var/ls4gs</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 15:34 /var/lw56tcp</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw89cxz</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw99cxz</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># ls -dl /var/l*[[:digit:]]*[[:alpha:]]</span></span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l42opm</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l47wsd</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:38 /var/l9cxz</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 15:35 /var/ls4gs</span><br><span class="line">drwxr-xr-x. 2 root root 6 11月  6 15:34 /var/lw56tcp</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw89cxz</span><br><span class="line">-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw99cxz</span><br></pre></td></tr></table></figure><h3 id="显示-etc目录下，以任意一个数字开头，且以非数字结尾的文件或目录。"><a href="#显示-etc目录下，以任意一个数字开头，且以非数字结尾的文件或目录。" class="headerlink" title="显示/etc目录下，以任意一个数字开头，且以非数字结尾的文件或目录。"></a>显示/etc目录下，以任意一个数字开头，且以非数字结尾的文件或目录。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># ls -dl /etc/[[:digit:]]*[[:alpha:]]</span></span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad</span><br><span class="line">-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd</span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg</span><br><span class="line">-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf</span><br></pre></td></tr></table></figure><p>​    </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]<span class="comment"># ls -dl /etc/[0-9]*[^0-9]</span></span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad</span><br><span class="line">-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd</span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg</span><br><span class="line">-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf</span><br></pre></td></tr></table></figure><h3 id="显示-etc目录下，以非字母开头，后面跟了一个字母以及其它任意长度任意字符的文件或目录。"><a href="#显示-etc目录下，以非字母开头，后面跟了一个字母以及其它任意长度任意字符的文件或目录。" class="headerlink" title="显示/etc目录下，以非字母开头，后面跟了一个字母以及其它任意长度任意字符的文件或目录。"></a>显示/etc目录下，以非字母开头，后面跟了一个字母以及其它任意长度任意字符的文件或目录。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 /]# ls -dl /etc/[^a-z]*[a-z]</span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad</span><br><span class="line">-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd</span><br><span class="line">drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg</span><br><span class="line">-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf</span><br></pre></td></tr></table></figure><h3 id="在-tmp目录下创建以tfile开头，后跟当前日期和时间的文件，文件名形如：tfile-2016-05-27-09-32-22。"><a href="#在-tmp目录下创建以tfile开头，后跟当前日期和时间的文件，文件名形如：tfile-2016-05-27-09-32-22。" class="headerlink" title="在/tmp目录下创建以tfile开头，后跟当前日期和时间的文件，文件名形如：tfile-2016-05-27-09-32-22。"></a>在/tmp目录下创建以tfile开头，后跟当前日期和时间的文件，文件名形如：tfile-2016-05-27-09-32-22。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch /tmp/tfile-$(date +%F-%H-%M-%S)</span><br></pre></td></tr></table></figure><h3 id="复制-etc目录下所有以p开头，以非数字结尾的文件或目录到-tmp-mytest1目录中。"><a href="#复制-etc目录下所有以p开头，以非数字结尾的文件或目录到-tmp-mytest1目录中。" class="headerlink" title="复制/etc目录下所有以p开头，以非数字结尾的文件或目录到/tmp/mytest1目录中。"></a>复制/etc目录下所有以p开头，以非数字结尾的文件或目录到/tmp/mytest1目录中。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /tmp/mytest1 &amp;&amp; cp -r /etc/p*[^0-9] /tmp/mytest1/</span><br></pre></td></tr></table></figure><h3 id="复制-etc目录下所有以-d结尾的文件或目录至-tmp-mytest2目录中。"><a href="#复制-etc目录下所有以-d结尾的文件或目录至-tmp-mytest2目录中。" class="headerlink" title="复制/etc目录下所有以.d结尾的文件或目录至/tmp/mytest2目录中。"></a>复制/etc目录下所有以.d结尾的文件或目录至/tmp/mytest2目录中。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /tmp/mytest2 &amp;&amp; cp -r /etc/*.d /tmp/mytest2/</span><br></pre></td></tr></table></figure><h3 id="复制-etc-目录下所有以l或m或n开头，以-conf结尾的文件至-tmp-mytest3目录中。"><a href="#复制-etc-目录下所有以l或m或n开头，以-conf结尾的文件至-tmp-mytest3目录中。" class="headerlink" title="复制/etc/目录下所有以l或m或n开头，以.conf结尾的文件至/tmp/mytest3目录中。"></a>复制/etc/目录下所有以l或m或n开头，以.conf结尾的文件至/tmp/mytest3目录中。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /tmp/mytest3 &amp;&amp; cp  /etc/[lmn]*.conf /tmp/mytest3/</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;目录管理类的命令&quot;&gt;&lt;a href=&quot;#目录管理类的命令&quot; class=&quot;headerlink&quot; title=&quot;目录管理类的命令&quot;&gt;&lt;/a&gt;目录管理类的命令&lt;/h2&gt;&lt;h3 id=&quot;mkdir&quot;&gt;&lt;a href=&quot;#mkdir&quot; class=&quot;headerlink&quot; title=&quot;mkdir&quot;&gt;&lt;/a&gt;mkdir&lt;/h3&gt;&lt;p&gt;用法：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir [选项]... 目录...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;选项： &lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-p 递归创建多个目录&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实例：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@centos7 ~]&lt;span class=&quot;comment&quot;&gt;# mkdir -p /tmp/jerry/2016/11/4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@centos7 /]&lt;span class=&quot;comment&quot;&gt;# tree /tmp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── akonadi-root.9I0Ba3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── anaconda.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── hogsuspend&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── hsperfdata_root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── 88148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── hsperfdata_user&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── ifcfg.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── jerry&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       └── 11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│           └──4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;**注意：**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;**centos7&amp;amp;6默认没有安装tree命令，记得yum install tree 就OK。**&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://zhusas.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux的基础知识</title>
    <link href="https://zhusas.github.io/2018/08/02/Linux%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>https://zhusas.github.io/2018/08/02/Linux的基础知识/</id>
    <published>2018-08-02T06:22:00.000Z</published>
    <updated>2018-08-02T07:05:52.405Z</updated>
    
    <content type="html"><![CDATA[<h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><h3 id="冯·洛伊曼体系"><a href="#冯·洛伊曼体系" class="headerlink" title="冯·洛伊曼体系"></a>冯·洛伊曼体系</h3><ol><li>控制器(Control)：是整个计算机的中枢神经，其功能是对程序规定的控制信息进行解释，根据其要求进行控制，调度程序、数据、地址，协调计算机各部分工作及内存与外设的访问等。</li><li>运算器(Datapath)：运算器的功能是对数据进行各种算术运算和逻辑运算，即对数据进行加工处理。</li><li>存储器(Memory)：存储器的功能是存储程序、数据和各种信号、命令等信息，并在需要时提供这些信息。</li><li>输入(Input system)：输入设备是计算机的重要组成部分，输入设备与输出设备合称为外部设备，简称外设，输入设备的作用是将程序、原始数据、文字、字符、控制命令或现场采集的数据等信息输入到计算机。常见的输入设备有键盘、鼠标器、光电输入机、磁带机、磁盘机、光盘机等。</li><li>输出(Output system)：输出设备与输入设备同样是计算机的重要组成部分，它把外算机的中间结果或最后结果、机内的各种数据符号及文字或各种控制信号等信息输出出来。微机常用的输出设备有显示终端CRT、打印机、激光印字机、绘图仪及磁带、光盘机等。<a id="more"></a></li></ol><h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2><h3 id="低级语言："><a href="#低级语言：" class="headerlink" title="低级语言："></a>低级语言：</h3><p>汇编语言，汇编器；写驱动</p><h3 id="高级语言："><a href="#高级语言：" class="headerlink" title="高级语言："></a>高级语言：</h3><p>系统级：C，C++，对性能要求较高的服务类程序<br>应用级：Java,Python,Ruby</p><h2 id="Linux-发行版"><a href="#Linux-发行版" class="headerlink" title="Linux 发行版"></a>Linux 发行版</h2><h2 id="RedHat-Enterprise-Linux"><a href="#RedHat-Enterprise-Linux" class="headerlink" title="RedHat Enterprise Linux"></a>RedHat Enterprise Linux</h2><p>Redhat系列，包括RHEL(Redhat Enterprise Linux，也就是所谓的Redhat Advance Server，收费版本)、Fedora Core(由原来的Redhat桌面版本发展而来，免费版本)、CentOS(RHEL的社区 克隆版本，免费)。Redhat是在国内使用人群最多的Linux版本，甚至有人将Redhat等同于Linux。所以这个版本的特点就是使用人群数量大，资料非常多，言下之意就是如果你有什么不明白的地方，很容易找到人来问，而且网上的一般Linux教程都是以Redhat为例来讲解的。Redhat系列的包管理方式采用的是基于RPM包的YUM包管理方式，包分发方式是编译好的二进制文件。稳定性方面RHEL和CentOS的稳定性非常好，适合于服务器使用，但是Fedora Core的稳定性较差，最好只用于桌面应用。 </p><p>CentOS 是一个基于Red Hat Linux 提供的可自由使用源代码的企业级Linux发行版本。每个版本的 CentOS都会获得十年的支持（通过安全更新方式）。新版本的 CentOS 大约每两年发行一次，而每个版本的 CentOS 会定期（大概每六个月）更新一次，以便支持新的硬件。这样，建立一个安全、低维护、稳定、高预测性、高重复性的 Linux 环境。CentOS是Community Enterprise Operating System的缩写。CentOS 是RHEL（Red Hat Enterprise Linux）源代码再编译的产物，而且在RHEL的基础上修正了不少已知的 Bug ，相对于其他 Linux 发行版，其稳定性值得信赖。</p><h2 id="Debian：只有社区的发行版"><a href="#Debian：只有社区的发行版" class="headerlink" title="Debian：只有社区的发行版"></a>Debian：只有社区的发行版</h2><p>Debian系列，包括Debian和Ubuntu等。Debian是社区类Linux的典范，是迄今为止最遵循GNU规范的Linux系统。Debian最早由Ian Murdock于1993年创建，分为三个版本分支（branch）： stable, testing 和unstable。其中，unstable为最新的测试版本，其中包括最新的软件包，但是也有相对较多的bug，适合桌面用户。testing的版本都经过unstable中的测试，相对较为稳定，也支持了不少新技术（比如SMP等）。而stable一般只用于服务器，上面的软件包大部分都比较过时，但是稳定和安全性都非常的高。Debian最具特色的是apt-get / dpkg包管理方式，其实Redhat的YUM也是在模仿Debian的APT方式，但在二进制文件发行方式中，APT应该是最好的了。Debian的资料也很丰富，有很多支持的社区，有问题求教也有地方可去。Debian是包括Ubuntu在内许多发行版的上游，而Ubuntu又是Linux Mint及其他发行版的上游。Debian在服务器和桌面电脑领域都有着广泛的应用。Debian是一个纯开源计划并着重在一个关键点上，稳定性。它同时也提供了最大的和完整的软件仓库给用户。 </p><p>Ubuntu是基于Debian的unstable版本加强而来，可以这么说，Ubuntu就是一个拥有Debian所有的优点，以及自己所加强的优点的近乎完美的 Linux桌面系统。根据选择的桌面系统不同，有三个版本可供选择，基于Gnome的Ubuntu，基于KDE的Kubuntu以及基于Xfc的Xubuntu。特点是界面非常友好，容易上手，对硬件的支持非常全面，是最适合做桌面系统的Linux发行版本。</p><h2 id="Slackware-Linux"><a href="#Slackware-Linux" class="headerlink" title="Slackware Linux"></a>Slackware Linux</h2><p>Slackware Linux是由Patrick Volkerding开发的GNU/Linux发行版。与很多其他的发行版不同，它坚持KISS(Keep It Simple Stupid)的原则。一开始，配置系统会有一些困难，但是更有经验的用户会喜欢这种方式的透明性和灵活性。 Slackware 很多特性体现出了KISS原则，最为有名的一些例子就是不依赖图形界面的文本化系统配置、传统的服务管理方式和不解决依赖的包管理方式。它的最大特点就是安装灵活，目录结构严谨，版本力求稳定而非追新。Slackware的软件包都是通常的tgz(tar/gzip) 或者txz(xz) 格式文件再加上安装脚本。Tgz/Txz 对于有经验的用户来说，比RPM更为灵活，并避免了APT 之类管理器可能带来的的依赖地狱。</p><p>作为开源软件，Slackware与商业版本的关系并不大，但与几家提供付费支持的厂商一直保持的合作关系。作为最早的可用版本之一，Slackware Linux是由Patrick Volkerding开发的GNU/Linux发行版。与很多其他的发行版不同，它坚持KISS(Keep It Simple Stupid)的原则，就是说尽量不依赖配置系统的图形界面工具。其安装程序也是一些Dialog界面的shell脚本写成，你可以在安装的任何时候跳到任何安装步骤，而且这些脚本在安装之后也可以很方便的使用</p><p>Slackware与其他的发行版本（Red Hat、Debian、Gentoo、SuSE、 Mandriva、Ubuntu等）不同的道路，它力图成为“UNIX风格”的Linux发行版本。只吸收稳定版本的应用程序，并且缺少其他linux版本中那些为发行版本定制的配置工具。在当今systemd大势所趋的情况下，Slackware仍然坚持BSD启动风格。</p><p>Slackware主要为x86 PC开发，从2005年起开始出现针对System/390架构的官方移植。同时ARM、DEC Alpha、SPARC和PowerPC也存在一些非官方的移植。Slackware官方维护着一个开发版本（Slackware Current），不断有新的软件被加入到这个源，用户可以实现类似Archlinux的滚动升级，等到一个开发版本足够稳定，便会发布一个稳定版。Slackware是支持x86、amd64（即x86_64）、ARM、Alpha、SPARC、PowerPC的一套GNU/Linux操作系统，其正式发布由PatrickVolkerding 负责。</p><h2 id="Linux发行版汇总"><a href="#Linux发行版汇总" class="headerlink" title="Linux发行版汇总"></a>Linux发行版汇总</h2><p><img src="http://i.imgur.com/JMpVlhj.png" alt=""></p><h2 id="Linux各发行版的联系与区别："><a href="#Linux各发行版的联系与区别：" class="headerlink" title="Linux各发行版的联系与区别："></a>Linux各发行版的联系与区别：</h2><h3 id="联系："><a href="#联系：" class="headerlink" title="联系："></a>联系：</h3><ol><li>各发行版本均采用Linux的内核（kernel）；</li><li>各发行版本均遵守GPL版权协定；</li><li>各发行版本均遵循 Linux Standard Base (LSB)等标准来开发；</li><li>各发行版本均遵循FHS（File system Hierarchy Standard）标准规范；</li></ol><h3 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h3><ol><li>不同的发行版采用的软件包管理方式不同；最有名的是 debain 的 deb 包，redhat 的 rpm 包，slackware 等的 tgz 包。</li><li>发行初衷不同，导致特点也不同，见下图：</li></ol><p><img src="http://i.imgur.com/xE0k8AB.png" alt=""></p><h2 id="三、Linux的哲学思想"><a href="#三、Linux的哲学思想" class="headerlink" title="三、Linux的哲学思想"></a>三、Linux的哲学思想</h2><ol><li>一切皆文件</li><li>由众多的单一的程序完成一件比较复杂的工作，一个程序只做一件事，并且做好他。</li><li>尽量避免与用户交互</li><li>使用文本文件保存配置信息</li><li>提供机制（可选的策略、是一种框架），而非策略，提供做大的灵活性。</li></ol><h2 id="四、Linux系统上常用命令的使用格式"><a href="#四、Linux系统上常用命令的使用格式" class="headerlink" title="四、Linux系统上常用命令的使用格式"></a>四、Linux系统上常用命令的使用格式</h2><h2 id="命令的语法通用格式："><a href="#命令的语法通用格式：" class="headerlink" title="命令的语法通用格式："></a>命令的语法通用格式：</h2><p>COMMAND OPTIONS ARGUMENTS</p><h3 id="COMMAND说明"><a href="#COMMAND说明" class="headerlink" title="COMMAND说明"></a>COMMAND说明</h3><p>发起命令时将请求内核将某个二进制程序运行为一个进程，命令本身是一个可执行的程序文件，二进制格式的文件有可能会调用共享库文件。[遵循ELF格式规范]</p><p>多数系统命令程序文件都存放在：/bin,/sbin,/usr/bin,/usr/sbin,/usr/local/bin,/usr/local/sbin，它们又分为普通命令和管理命令。 </p><p>普通命令：存放在/bin,/usr/bin,/usr/local/bin </p><p>管理命令：存放在/sbin,/usr/sbin,/usr/local/sbin </p><p>用到的库文件都存放在：/lib,/lib64,/usr/lib,/usr/lib64,/usr/local/lib,/usr/local/lib64，它们分为32位和64位的库文件，32位使用于32位的操作系统，64位使用于64位的操作系统，64位兼容32位，而32不兼容64 </p><p>32位库：存放在/lib,/usr/lib,/usr/local/lib </p><p>64位库：存放在/lib64,/usr/lib64,/usr/local/lib64 </p><h3 id="命令分为两类："><a href="#命令分为两类：" class="headerlink" title="命令分为两类："></a>命令分为两类：</h3><p>​<br>由shell自带的命令，叫作内嵌命令(builtin) </p><p>独立的可执行程序文件，文件名即命令名，叫作外部命令 </p><p>查看命令的内容的类型： </p><p>file命令：</p><p>例：~]# file /bin/ls </p><p>查看命令的类型： </p><p>type命令： </p><p>例：~]# type COMMAND </p><p>注意：并非所有的命令都有一个在某目录与之对应的可执行程序文件</p><h3 id="OPTIONS说明："><a href="#OPTIONS说明：" class="headerlink" title="OPTIONS说明："></a>OPTIONS说明：</h3><p>指定命令的运行特性，有两种表现形式： </p><p>短选项：-C，例如 ls -l ,-d 注：有的命令选项没有 – ，同一命令同时使用多个短选项可合并：ls -ld </p><p>长选项：–word，例如 ls –help，有时候选项也带参数，例：du -h –max-depth=1 注：长选项不能合并 </p><h3 id="ARGUMENTS说明："><a href="#ARGUMENTS说明：" class="headerlink" title="ARGUMENTS说明："></a>ARGUMENTS说明：</h3><p>参数：命令的作用对象，命令对什么生效，例：ls /etc ,作用在/etc 。注：有些命令可以可同时带多个参数，以空白分隔</p><h2 id="常用命令示例："><a href="#常用命令示例：" class="headerlink" title="常用命令示例："></a>常用命令示例：</h2><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h3><p>作用：显示和配置网络信息</p><p>语法：ifconfig [网络设备][参数]</p><p>示例：ifconfig -a</p><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>作用：显示文本</p><p>语法：echo [-ne][字符串]或 echo [–help][–version]</p><p>示例：echo ‘Hello World’</p><h3 id="tty"><a href="#tty" class="headerlink" title="tty"></a>tty</h3><p>作用：显示终端机连接标准输入设备的文件名称</p><p>语法：tty [-s][–help][–version]</p><p>示例：tty</p><h3 id="startx"><a href="#startx" class="headerlink" title="startx"></a>startx</h3><p>作用：进入图形操作界面</p><p>示例：startx &amp;</p><h3 id="export"><a href="#export" class="headerlink" title="export"></a>export</h3><p>作用：设置或显示环境变量</p><p>语法：export [-fnp][变量名称]=[变量设置值]</p><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME = /home/myuser/jdk1.7.0_03</span><br><span class="line"><span class="built_in">export</span> PATH = <span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br></pre></td></tr></table></figure><h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><p>作用：显示当前工作目录</p><p>语法：pwd[–help][–version]</p><p>示例：pwd</p><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p>作用：列出bash保存的所有历史命令</p><p>语法：history  [选项]</p><p>示例1：history</p><p>示例2:使用HISTTIMEFORMAT环境变量在历史中显示TIMESTAMP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">命令：</span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">'%F %T '</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$history</span></span><br><span class="line"></span><br><span class="line">输出如下：</span><br><span class="line">642  2016-10-25 17:05:46 ll</span><br><span class="line">643  2016-10-25 17:05:46 rm 333 </span><br><span class="line">644  2016-10-25 17:05:46 ll /etc/fstab </span><br><span class="line">645  2016-10-25 17:05:51 <span class="built_in">history</span> --<span class="built_in">help</span></span><br><span class="line">646  2016-10-25 17:05:59 <span class="built_in">history</span> -h</span><br><span class="line">647  2016-10-25 17:06:14 man <span class="built_in">history</span></span><br><span class="line">648  2016-10-25 17:07:53 <span class="built_in">history</span> </span><br><span class="line">649  2016-10-25 17:07:57 <span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">'%F %T '</span></span><br><span class="line">650  2016-10-25 17:07:59 <span class="built_in">history</span></span><br></pre></td></tr></table></figure><h3 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h3><p>作用：系统关机命令</p><p>语法：shutdown [-cfFhknr][-t 秒数][时间][警告信息]</p><p>示例：shuntdown -r +5</p><h3 id="poweroff"><a href="#poweroff" class="headerlink" title="poweroff"></a>poweroff</h3><p>作用：关机</p><p>语法：这个命令还说啥语法啊，生产环境上不要随便执行这个命令，否则会被捆绑、滴蜡、爆菊啊<del>~</del></p><p>示例：poweroff</p><h3 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h3><p>作用：重启</p><p>语法：运维常用作死命令之一，最好在头脑清醒的前提下执行。</p><p>示例：reboot</p><h3 id="hwclock"><a href="#hwclock" class="headerlink" title="hwclock"></a>hwclock</h3><p>作用：用来查询和设置硬件时钟</p><p>语法：  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-r, --show        读取并打印硬件时钟（<span class="built_in">read</span> hardware clock and <span class="built_in">print</span> result ）</span><br><span class="line">-s, --hctosys     将硬件时钟同步到系统时钟（<span class="built_in">set</span> the system time from the hardware clock ）</span><br><span class="line">-w, --systohc     将系统时钟同步到硬件时钟（<span class="built_in">set</span> the hardware clock to the current system time ）</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># hwclock -r</span></span><br><span class="line">2016年10月25日 星期二 17时32分28秒  -0.671802 seconds</span><br></pre></td></tr></table></figure><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>作用：取一个特定时间的linux时间戳</p><p>语法：date [参数]… [+格式]</p><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># date</span></span><br><span class="line">2016年 10月 25日 星期二 17:33:17 CST</span><br></pre></td></tr></table></figure><h2 id="五、如何在Linux系统上获取命令的帮助信息，请详细列出，并描述man文档的章节时如何划分的"><a href="#五、如何在Linux系统上获取命令的帮助信息，请详细列出，并描述man文档的章节时如何划分的" class="headerlink" title="五、如何在Linux系统上获取命令的帮助信息，请详细列出，并描述man文档的章节时如何划分的"></a>五、如何在Linux系统上获取命令的帮助信息，请详细列出，并描述man文档的章节时如何划分的</h2><h2 id="获取命令的使用帮助："><a href="#获取命令的使用帮助：" class="headerlink" title="获取命令的使用帮助："></a>获取命令的使用帮助：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">内部命令：</span><br><span class="line">    <span class="built_in">help</span> COMMAND</span><br><span class="line">外部命令：</span><br><span class="line">    (1) 命令自带简要格式的使用帮助</span><br><span class="line">        <span class="comment"># COMMAND –help</span></span><br><span class="line">    (2) 使用手册：manual</span><br><span class="line">        位置：/usr/share/man</span><br><span class="line">        <span class="comment"># man COMMAND</span></span><br></pre></td></tr></table></figure><p>先执行type COMMNAD 识别是内部命令还是外部命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(3) info COMMAND</span><br><span class="line">    获取命令的在线文档；</span><br><span class="line"></span><br><span class="line">(4) 很多应用程序会自带帮助文档：/usr/share/doc/APP-VERSION</span><br><span class="line">    README：程序的相关的信息；</span><br><span class="line">    INSTALL: 安装帮助；</span><br><span class="line">    CHANGES：版本迭代时的改动信息；</span><br><span class="line"></span><br><span class="line">(5) 主流发行版官方文档</span><br><span class="line">    http://www.redhat.com/doc</span><br><span class="line"></span><br><span class="line">(6) 程序官方的文档：</span><br><span class="line">    官方站点上的“Document”</span><br><span class="line"></span><br><span class="line">(7) 搜索引擎</span><br><span class="line">    google、baidu </span><br><span class="line"></span><br><span class="line">    keyword filetype:pdf   （输入文章类型更有针对性）</span><br><span class="line">    keyword site:domain.tld</span><br></pre></td></tr></table></figure><h2 id="man-文档章节如何划分"><a href="#man-文档章节如何划分" class="headerlink" title="man 文档章节如何划分"></a>man 文档章节如何划分</h2><p>使用手册：压缩格式的文件，有章节之分；<br>                    /usr/share/man<br>                        man1, man2, …</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1：用户命令；  （普通用户和管理员）</span><br><span class="line">2：系统调用；</span><br><span class="line">3：C库调用；</span><br><span class="line">4：设备文件及特殊文件；</span><br><span class="line">5：文件格式；（配置文件格式）</span><br><span class="line">6：游戏使用帮助；</span><br><span class="line">7：杂项；</span><br><span class="line">8：管理工具及守护进行；</span><br></pre></td></tr></table></figure><h2 id="Linux发行版的基础目录名称命名法则及其功用规定"><a href="#Linux发行版的基础目录名称命名法则及其功用规定" class="headerlink" title="Linux发行版的基础目录名称命名法则及其功用规定"></a>Linux发行版的基础目录名称命名法则及其功用规定</h2><h2 id="FHS："><a href="#FHS：" class="headerlink" title="FHS："></a>FHS：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FHS：全称Filesystem Hierarchy Standard，其定义了两层规范，</span><br></pre></td></tr></table></figure><h2 id="下面的各个目录应该要放什么数据："><a href="#下面的各个目录应该要放什么数据：" class="headerlink" title="/下面的各个目录应该要放什么数据："></a>/下面的各个目录应该要放什么数据：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/bin：所有用户可用的基本命令程序文件；</span><br><span class="line"></span><br><span class="line">/sbin：供系统管理使用的工具程序；</span><br><span class="line"></span><br><span class="line">/boot：引导加载器必须用到的各静态文件：kernel，initramfs（initrd），grub等；</span><br><span class="line"></span><br><span class="line">/dev：存储特殊文件或设备文件；设备有两种类型：字符设备（线性设备）例如：键盘、显示器；块设备（随机设备）例如：硬盘、内存；</span><br><span class="line"></span><br><span class="line">/etc：系统程序的配置文件，只能为静态</span><br><span class="line"></span><br><span class="line">/home：普通用户的家目录的集中位置；一般每个普通用户的家目录默认为此目录下与用户名同名的子目录，/home/USERNAME；</span><br><span class="line"></span><br><span class="line">/root：管理员的家目录；可选</span><br><span class="line"></span><br><span class="line">/lib：为系统启动或根文件系统上的应用程序（/bin，/sbin等）提供共享库，以及为内核提供的内核参数模块； libc.so.：动态链接的C库； ld：运行时链接器/加载器； modules：用于存储内核模块的目录；</span><br><span class="line"></span><br><span class="line">/lib64：64位系统特有的存放64位共享库的路径；</span><br><span class="line"></span><br><span class="line">/media：便携式设备挂载点，cdrom，floppy等；</span><br><span class="line"></span><br><span class="line">/mnt：其它文件系统的临时挂载点；</span><br><span class="line"></span><br><span class="line">/opt：附加应用程序的安装位置；可选路径；</span><br><span class="line"></span><br><span class="line">/srv：当前主机为服务提供的数据；</span><br><span class="line"></span><br><span class="line">/tmp：为那些会产生临时文件的程序提供的用于存储临时文件的目录；可供所有用户执行写入操作；有特殊权限；</span><br><span class="line"></span><br><span class="line">/usr：usr Hierarchy，全局共享的只读数据路径；</span><br><span class="line"></span><br><span class="line">/var：/var Hierarchy，存储经常发生变化的数据的目录；</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;硬件&quot;&gt;&lt;a href=&quot;#硬件&quot; class=&quot;headerlink&quot; title=&quot;硬件&quot;&gt;&lt;/a&gt;硬件&lt;/h2&gt;&lt;h3 id=&quot;冯·洛伊曼体系&quot;&gt;&lt;a href=&quot;#冯·洛伊曼体系&quot; class=&quot;headerlink&quot; title=&quot;冯·洛伊曼体系&quot;&gt;&lt;/a&gt;冯·洛伊曼体系&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;控制器(Control)：是整个计算机的中枢神经，其功能是对程序规定的控制信息进行解释，根据其要求进行控制，调度程序、数据、地址，协调计算机各部分工作及内存与外设的访问等。&lt;/li&gt;
&lt;li&gt;运算器(Datapath)：运算器的功能是对数据进行各种算术运算和逻辑运算，即对数据进行加工处理。&lt;/li&gt;
&lt;li&gt;存储器(Memory)：存储器的功能是存储程序、数据和各种信号、命令等信息，并在需要时提供这些信息。&lt;/li&gt;
&lt;li&gt;输入(Input system)：输入设备是计算机的重要组成部分，输入设备与输出设备合称为外部设备，简称外设，输入设备的作用是将程序、原始数据、文字、字符、控制命令或现场采集的数据等信息输入到计算机。常见的输入设备有键盘、鼠标器、光电输入机、磁带机、磁盘机、光盘机等。&lt;/li&gt;
&lt;li&gt;输出(Output system)：输出设备与输入设备同样是计算机的重要组成部分，它把外算机的中间结果或最后结果、机内的各种数据符号及文字或各种控制信号等信息输出出来。微机常用的输出设备有显示终端CRT、打印机、激光印字机、绘图仪及磁带、光盘机等。&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
    
      <category term="linux" scheme="https://zhusas.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>MySQL启用的SSL连接的思考与实践</title>
    <link href="https://zhusas.github.io/2018/08/01/mysql-ssl/"/>
    <id>https://zhusas.github.io/2018/08/01/mysql-ssl/</id>
    <published>2018-08-01T10:21:00.000Z</published>
    <updated>2018-08-02T02:36:02.010Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL启用的SSL连接的思考与实践"><a href="#MySQL启用的SSL连接的思考与实践" class="headerlink" title="MySQL启用的SSL连接的思考与实践"></a>MySQL启用的SSL连接的思考与实践</h2><p><img src="/2018/08/01/mysql-ssl/bodyguard.jpg" alt="SSL"></p><p>由于工作上的业务发展和等保三级合规的要求，需要考虑为MySQL启用SSL连接，那么今天就来说说这个怎么玩。其实一个月前已经在实现了用docker跑MySQL SSL了，只不过后到今天才有时间静下心来总结一下。</p><h3 id="有必要使用为MySQL启用SSL吗？"><a href="#有必要使用为MySQL启用SSL吗？" class="headerlink" title="有必要使用为MySQL启用SSL吗？"></a>有必要使用为MySQL启用SSL吗？</h3><p>先来了解一下SSL吧：</p><p><strong>SSL</strong>（Secure Socket Layer：安全套接字层）利用数据加密、身份验证和消息完整性验证机制，为基于TCP等可靠连接的应用层协议提供安全性保证。<a id="more"></a></p><p>SSL协议提供的功能主要有：</p><p>​    1、 数据传输的机密性：利用对称密钥算法对传输的数据进行加密。<br>    2.、身份验证机制：基于证书利用数字签名方法对服务器和客户端进行身份验证，其中客户端的身份验证是可选的。<br>    3、 消息完整性验证：消息传输过程中使用MAC算法来检验消息的完整性。</p><p>如果用户的传输不是通过SSL的方式，那么其在网络中数据都是以明文进行传输的，而这给别有用心的人带来了可乘之机。所以，现在很多大型网站都开启了SSL功能。同样地，在我们数据库方面，如果客户端连接服务器获取数据不是使用SSL连接，那么在传输过程中，数据就有可能被窃取。</p><p>所以，我认为启用SSL是一个不错的选择。</p><h3 id="那么SSL如何工作在MySQL中的"><a href="#那么SSL如何工作在MySQL中的" class="headerlink" title="那么SSL如何工作在MySQL中的"></a>那么SSL如何工作在MySQL中的</h3><p>这里分两说，因为工作中我涉及到MySQL5.6和MySQL 5.7两个版本，它们在SSL连接的实现上也有少许区别。</p><p><strong>MySQL5.6的SSL</strong></p><p>MySQL  5.6中的SSL文档非常详细，它解释了SSL的工作原理。但首先让我们说清楚一点：MySQL支持使用TLS（传输层安全性）协议在客户端和服务器之间建立安全（加密）连接。 TLS有时被称为SSL（安全套接字层），但MySQL实际上并不使用SSL协议进行安全连接，因为它提供弱加密。 </p><p>因此，当我们有人说MySQL正在使用SSL时，它实际上意味着它正在使用TLS。您可以使用以下命令检查您使用的协议： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">show status like &apos;Ssl_version&apos;;</span><br><span class="line">+---------------+---------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+---------+</span><br><span class="line">| Ssl_version | TLSv1.2 |</span><br><span class="line">+---------------+---------+</span><br></pre></td></tr></table></figure><p>TLS使用加密算法来确保可以信任通过公共网络接收的数据。它具有检测数据更改，丢失或重放的机制。 TLS还包含使用X509标准提供身份验证的算法。  X509可以识别互联网上的某个人。在基本术语中，应该有一些称为“证书颁发机构”（或CA）的实体，它将电子证书分配给需要它们的任何人。证书依赖于具有两个加密密钥（公钥和密钥）的非对称加密算法。证书所有者可以将证书提供给另一方作为身份证明。证书由其所有者的公钥组成。使用该公钥加密的任何数据只能使用由证书所有者持有的相应密钥解密。</p><p>MySQL5.6只支持TLSv1，MySQL5.7则支持TLSv1, TLSv1.1, and TLSv1.2 。</p><p>MySQL支持使用TLS协议的加密连接：<br>    使用OpenSSL 1.0.1或更高版本编译时，MySQL支持TLSv1，TLSv1.1和TLSv1.2协议。<br>    当使用捆绑版本的yaSSL进行编译时，MySQL支持TLSv1和TLSv1.1协议。 </p><p>使用SSL配置服务器时，客户端必须具有客户端证书。获得后，它可以使用SSL连接到服务器。MySQL5.6的客户端必须指定密钥和证书。否则，我们无法使用SSL连接到服务器。 如下：</p><p>my.cnf配置文件如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-host-cache</span><br><span class="line">skip-name-resolve</span><br><span class="line">pid-file= /var/run/mysqld/mysqld.pid</span><br><span class="line">socket= /var/run/mysqld/mysqld.sock</span><br><span class="line">datadir= /var/lib/mysql</span><br><span class="line">#log-error= /var/log/mysql/error.log</span><br><span class="line"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br><span class="line">symbolic-links=0</span><br><span class="line">ssl-ca=/etc/mysql/certs/ca.pem</span><br><span class="line">ssl-cert=/etc/mysql/certs/MySQL1-cert.pem</span><br><span class="line">ssl-key=/etc/mysql/certs/MySQL1-key.pem</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">ssl-ca=/etc/mysql/certs/ca.pem</span><br><span class="line">ssl-cert=/etc/mysql/certs/MySQL-client-cert.pem</span><br><span class="line">ssl-key=/etc/mysql/certs/MySQL-client-key.pem</span><br></pre></td></tr></table></figure><p>客户端连接：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --ssl-ca=/etc/mysql/certs/ca.pem  --ssl-cert=/etc/mysql/certs/MySQL-client-cert.pem --ssl-key=/etc/mysql/certs/MySQL-client-key.pem</span><br></pre></td></tr></table></figure><p><strong>MySQL5.7的SSL</strong></p><p>默认情况下，如果服务器支持加密连接，MySQL程序将尝试使用加密进行连接，如果无法建立加密连接，则会回退到未加密的连接。有关影响加密连接使用的选项的信息 。<br>MySQL基于每个连接执行加密，并且对给定用户使用加密可以是可选的或强制的。可以根据各个应用程序的要求选择加密或未加密的连接。在CREATE USER的时候，有SSL相关的参数可以选择，这个创建用户参数取决于其用户连接时，是否必须使用密钥文件连接MySQL。</p><p>这些在官方文档里面都有说明，可以去详细了解下。这里就不铺开了。</p><p><strong>MySQL 5.7中的加密连接支持进行了一些改进。以下时间表总结了这些变化：</strong>        </p><p>5.7.3：在客户端，明确的–ssl选项不再是建议性的，而是规定性的。如果服务器支持加密连接，则客户端程序可以通过仅指定–ssl选项来要求加密连接。 （以前，客户端必须指定–ssl-ca选项，或者所有三个–ssl-ca， –ssl-key和–ssl-cert选项。）连接尝试失败如果无法建立加密连接。客户端的其他–ssl-xxx选项在没有–ssl的情况下是建议性的：客户端尝试使用加密进行连接，但如果无法建立加密连接，则会回退到未加密的连接。        </p><p>5.7.5：默认情况下启用服务器端–ssl选项值。        对于使用OpenSSL编译的服务器，auto_generate_certs和sha256_password_auto_generate_rsa_keys系统变量可用于在启动时启用SSL /  RSA证书和密钥文件的自动生成和自动发现。对于证书和密钥自动发现，如果启用了–ssl并且未给出其他–ssl-xxx选项以明确配置加密连接，则服务器会在启动时尝试自动启用对加密连接的支持，如果它发现必需的证书和密钥文件在数据目录中。        </p><p>5.7.6：mysql_ssl_rsa_setup实用程序可用于手动生成SSL / RSA证书和密钥文件。启动时自动发现SSL / RSA文件将扩展为适用于所有服务器，无论是使用OpenSSL还是使用yaSSL编译。  （这意味着无需启用auto_generate_certs即可进行自动发现。）        如果服务器在启动时发现CA证书是自签名的，则会向错误日志写入警告。 （如果服务器自动创建证书，则证书是自签名的，或者使用mysql_ssl_rsa_setup手动创建证书。）        </p><p>5.7.7：如果服务器支持加密连接，则C客户端库会默认尝试建立加密连接。这会影响客户程序，如下所示：            </p><ul><li>如果没有–ssl选项，客户端将尝试使用加密进行连接，如果无法建立加密连接，则会回退到未加密的连接。            </li><li>显式–ssl选项或同义词（–ssl = 1， -  enable-ssl）的存在是规定性的：客户端需要加密连接，如果无法建立，则会失败。</li><li>使用–ssl = 0选项或同义词（–skip-ssl， -  disable-ssl），客户端使用未加密的连接.此更改还会影响基于C客户端库的MySQL连接器的后续版本：Connector / C，Connector / C ++和Connector / ODBC。        </li></ul><p>5.7.8：require_secure_transport系统变量可用于控制与服务器的客户端连接是否必须使用某种形式的安全传输。        </p><p>5.7.10：TLS协议支持从TLSv1扩展到TLSv1.1和TLSv1.2。服务器端的tls_version系统变量和客户端的–tls-version选项可以选择支持级别。   </p><p>5.7.11：MySQL客户端程序支持–ssl-mode选项，使您可以指定与服务器的连接的安全状态。  –ssl-mode选项包括客户端–ssl和–ssl-verify-server-cert选项的功能。因此，不推荐使用–ssl和–ssl-verify-server-cert，MySQL 8.0中已经删除它们。 </p><p>好，上边说了这么多，各位都看明白了吗？不明白也没关系，我下面用docker来演示</p><p><strong>坑点：我用许多客户端应用程序对它进行了测试，无论是MySQL5.6或5.7，MySQL客户端连接服务端时必须指定客户端密钥。没有密钥，无法连接到服务器。某些较旧的应用程序可能不支持此功能。 所以啊，官档说的也不一定全对。</strong></p><h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p>这里以MySQL5.6为例</p><p>1、建立目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir -pv mysql_ssl_&#123;data,config,cert&#125;</span></span><br><span class="line">mkdir: created directory <span class="string">'mysql_ssl_data'</span></span><br><span class="line">mkdir: created directory <span class="string">'mysql_ssl_config'</span></span><br><span class="line">mkdir: created directory <span class="string">'mysql_ssl_cert'</span></span><br></pre></td></tr></table></figure><p>准备好数据、证书、配置等文件</p><p>2、启动容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql5.6_ssl_test -v /data/mysql_ssl_data/:/var/lib/mysql -v /data/mysql_ssl_config/my.cnf:/etc/my.cnf -v /data/mysql_ssl_cert/:/etc/mysql/certs -p 3306:3306 mysql:5.6.40</span><br></pre></td></tr></table></figure><p>3、因为MySQL5.6默认用户是不开启SSL认证的，需要进行如下操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改已存在用户 </span></span><br><span class="line">GRANT USAGE ON *.* TO `user`@`%` REQUIRE X509;</span><br><span class="line"><span class="comment">#新建必须使用SSL用户</span></span><br><span class="line">grant all privileges on *.* to <span class="string">'user'</span>@<span class="string">'%'</span> identified by <span class="string">'111111'</span> with grant option;</span><br><span class="line">GRANT USAGE ON *.* TO `user`@`%` REQUIRE X509;</span><br></pre></td></tr></table></figure><p>对于具有REQUIRE  X509的帐户，客户端必须指定要连接的–ssl-key和–ssl-cert选项。  （建议但不要求也指定–ssl-ca，以便验证服务器提供的公共证书。）对于ISSUER和SUBJECT也是如此，因为这些REQUIRE选项意味着X509的要求。 </p><p>好，现在无论是用图形化工具还是使用命令行客户端，都必须指定客户端的证书及密钥文件，加上账户密码，才能连接登录MySQL了。</p><p><strong>参考资料：</strong></p><p><a href="https://www.cnblogs.com/mysql-dba/p/7061300.html" target="_blank" rel="noopener">https://www.cnblogs.com/mysql-dba/p/7061300.html</a></p><p><a href="https://dev.mysql.com/doc/refman/5.7/en/encrypted-connection-protocols-ciphers.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/encrypted-connection-protocols-ciphers.html</a></p><p><a href="https://dev.mysql.com/doc/refman/5.6/en/encrypted-connection-protocols-ciphers.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/encrypted-connection-protocols-ciphers.html</a></p><p><a href="https://dev.mysql.com/doc/refman/5.6/en/encrypted-connections.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/encrypted-connections.html</a></p><p><a href="https://dev.mysql.com/doc/refman/5.7/en/encrypted-connections.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/encrypted-connections.html</a></p><p>​</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MySQL启用的SSL连接的思考与实践&quot;&gt;&lt;a href=&quot;#MySQL启用的SSL连接的思考与实践&quot; class=&quot;headerlink&quot; title=&quot;MySQL启用的SSL连接的思考与实践&quot;&gt;&lt;/a&gt;MySQL启用的SSL连接的思考与实践&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/2018/08/01/mysql-ssl/bodyguard.jpg&quot; alt=&quot;SSL&quot;&gt;&lt;/p&gt;
&lt;p&gt;由于工作上的业务发展和等保三级合规的要求，需要考虑为MySQL启用SSL连接，那么今天就来说说这个怎么玩。其实一个月前已经在实现了用docker跑MySQL SSL了，只不过后到今天才有时间静下心来总结一下。&lt;/p&gt;
&lt;h3 id=&quot;有必要使用为MySQL启用SSL吗？&quot;&gt;&lt;a href=&quot;#有必要使用为MySQL启用SSL吗？&quot; class=&quot;headerlink&quot; title=&quot;有必要使用为MySQL启用SSL吗？&quot;&gt;&lt;/a&gt;有必要使用为MySQL启用SSL吗？&lt;/h3&gt;&lt;p&gt;先来了解一下SSL吧：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SSL&lt;/strong&gt;（Secure Socket Layer：安全套接字层）利用数据加密、身份验证和消息完整性验证机制，为基于TCP等可靠连接的应用层协议提供安全性保证。&lt;/p&gt;
    
    </summary>
    
    
      <category term="SSL,MySQL" scheme="https://zhusas.github.io/tags/SSL-MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB备份数据引擎升级</title>
    <link href="https://zhusas.github.io/2018/07/09/mongodb/"/>
    <id>https://zhusas.github.io/2018/07/09/mongodb/</id>
    <published>2018-07-09T05:38:00.000Z</published>
    <updated>2018-07-31T06:42:32.431Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MongoDB备份数据引擎升级"><a href="#MongoDB备份数据引擎升级" class="headerlink" title="MongoDB备份数据引擎升级"></a>MongoDB备份数据引擎升级</h2><p><strong>准备工作</strong></p><ol><li>确认已经安装需要运行的MongoDB版本</li><li>确保有足够的空间进行数据导出导入</li><li>您必须使用MongoDB版本3.0或更高版本才能使用WireldTiger存储引擎。 如果使用较早的MongoDB版本，则必须在继续更改存储引擎之前升级MongoDB版本。本文使用的是MongoDB 3.6</li><li>本文使用docker来操作，请自行安装好docker环境。<a id="more"></a></li><li>直接在裸机安装MongoDB 3.6进行操作亦可。</li><li>这里演示从MongoDB 2.6备份出来的数据还原到MongoDB 3.6 并以WireldTiger引擎启动运行</li></ol><p><strong>步骤</strong></p><p>1、启动你要运行的MongoDB版本，本文用的是3.6 ，Docker运行，配置文件写明要以<code>wiredTiger</code>  启动。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name <span class="variable">$CONTAINER_NAME</span> -v <span class="variable">$DATA_PATH</span>:/data/db -v <span class="variable">$OLD_DATA_PATH</span>:/data2 -v /<span class="variable">$CONFIG_PATH</span>/mongod.conf:/etc/mongod.conf.orig -p <span class="variable">$IP</span>:27017:27017 mongo:3.6</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">变量名</th><th style="text-align:center">作用说明</th></tr></thead><tbody><tr><td style="text-align:center">$CONTAINER_NAME</td><td style="text-align:center">自定义的容器名字</td></tr><tr><td style="text-align:center">$DATA_PATH</td><td style="text-align:center">容器在宿主机上的数据卷路径</td></tr><tr><td style="text-align:center">$OLD_DATA_PATH</td><td style="text-align:center">待升级的老版本MongoDB备份数据</td></tr><tr><td style="text-align:center">$CONFIG_PATH</td><td style="text-align:center">新版MongoDB的配置文件目录</td></tr><tr><td style="text-align:center">$IP</td><td style="text-align:center">MongoDB容器对外提供服务的IP地址</td></tr></tbody></table><p>配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Where and how to store data.</span></span><br><span class="line"><span class="attr">storage:</span></span><br><span class="line"><span class="attr">  dbPath:</span> <span class="string">/var/lib/mongodb</span></span><br><span class="line"><span class="attr">    journal:</span></span><br><span class="line"><span class="attr">      enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    engine:</span> <span class="string">wiredTiger</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># where to write logging data.</span></span><br><span class="line"><span class="attr">  systemLog:</span></span><br><span class="line"><span class="attr">    destination:</span> <span class="string">file</span></span><br><span class="line"><span class="attr">    logAppend:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    path:</span> <span class="string">/var/log/mongodb/mongod.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># network interfaces</span></span><br><span class="line"><span class="attr">    net:</span></span><br><span class="line"><span class="attr">     port:</span> <span class="number">27017</span></span><br><span class="line"><span class="attr">     bindIp:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># how the process runs</span></span><br><span class="line"><span class="attr">    processManagement:</span></span><br><span class="line"><span class="attr">    timeZoneInfo:</span> <span class="string">/usr/share/zoneinfo</span></span><br></pre></td></tr></table></figure><p>2、把 MongoDB 2.6的备份数据解压到$OLD_DATA_PATH</p><p>3、进入MongoDB 3.6的容器中执行以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it <span class="variable">$CONTAINER_NAME</span> /bin/bash <span class="comment">#进入docker并分配bash终端</span></span><br><span class="line">mongorestore data2/<span class="comment">#从data2目录中导入备份数据</span></span><br></pre></td></tr></table></figure><p>OK，接下来静候佳音即可。中间会有一段漫长的导入数据，转换引擎，重建索引的过程。</p><p>当然，你要是土豪，用固态硬盘也是极好的。</p><p>4、最后一步，查看一下数据引擎。运行db.serverStatus()命令,查询结果包含如下内容即可：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"storageEngine" : &#123;</span><br><span class="line">"name" : "wiredTiger",</span><br><span class="line">"supportsCommittedReads" : true,</span><br><span class="line">"readOnly" : false,</span><br><span class="line">"persistent" : true</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MongoDB备份数据引擎升级&quot;&gt;&lt;a href=&quot;#MongoDB备份数据引擎升级&quot; class=&quot;headerlink&quot; title=&quot;MongoDB备份数据引擎升级&quot;&gt;&lt;/a&gt;MongoDB备份数据引擎升级&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;准备工作&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;确认已经安装需要运行的MongoDB版本&lt;/li&gt;
&lt;li&gt;确保有足够的空间进行数据导出导入&lt;/li&gt;
&lt;li&gt;您必须使用MongoDB版本3.0或更高版本才能使用WireldTiger存储引擎。 如果使用较早的MongoDB版本，则必须在继续更改存储引擎之前升级MongoDB版本。本文使用的是MongoDB 3.6&lt;/li&gt;
&lt;li&gt;本文使用docker来操作，请自行安装好docker环境。&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
    
      <category term="MongoDB,Docker" scheme="https://zhusas.github.io/tags/MongoDB-Docker/"/>
    
  </entry>
  
</feed>
