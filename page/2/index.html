<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Jerry" />


    
    


<meta name="description" content="ops.linux">
<meta property="og:type" content="website">
<meta property="og:title" content="Jerry&#39;s Blog">
<meta property="og:url" content="https://zhusas/github.io/page/2/index.html">
<meta property="og:site_name" content="Jerry&#39;s Blog">
<meta property="og:description" content="ops.linux">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jerry&#39;s Blog">
<meta name="twitter:description" content="ops.linux">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Jerry&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Jerry&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Jerry</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:zhusas@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/zhusas" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于运维</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Jerry</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Jerry</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zhusas@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/zhusas" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-第十八周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第十八周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.817Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>1、为LNMP架构添加memcached支持，并完成对缓存效果的测试报告；<br>2、部署配置haproxy，能够实现将来自用户的80端口的http请求转发至后端8000上的server服务，写出其配置过程。<br>3、阐述varnish的功能及其应用场景，并通过实际的应用案例来描述配置、测试、调试过程.<br>4、用Keepalived实现nginx与lvs的高可用集群。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第三周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第三周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.681Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>###一，列出当前系统上所有已经登录的用户的用户名，注意，同一个用户登录多次只显示一次即可</p>
<pre><code>w -h | cut -d&quot; &quot; -f1 | uniq
who |cut -d&quot; &quot; -f1|uniq
</code></pre><p>###二，取出最后登录到当前系统的用户相关信息</p>
<pre><code>w| tail -n 1
</code></pre><p>###三，取出当前系统上被用户当作默认shell的最多的那个shell</p>
<pre><code>cat /etc/passwd |cut -d &quot;:&quot; -f7|grep /bin/bash|uniq
</code></pre><p>###四，将/etc/passwd中的第三个字段数值最大的后10个用户的信息全部改为大写后保存至/tmp/maxusers.txt文件中</p>
<pre><code>sort -t: -k3 -n /etc/passwd |tail -10|tr &apos;a-z&apos; &apos;A-Z&apos; &gt; /tmp/maxusers.txt
</code></pre><p>###五，取出当前主机的IP地址，提示：对ifconfig命令的结果进行切分。</p>
<pre><code>CentOS7    
ifconfig |grep inet |cut -d&apos; &apos; -f10|head -1
</code></pre><p>###六，列出/etc/目录下所有以.conf结尾的文件的文件名，并将其名字转换为大写后保存至/tmp/etc.conf文件中</p>
<pre><code>ll /etc/*.conf|cut -d&apos;/&apos; -f3|tr &apos;a-z&apos; &apos;A-Z&apos; &gt;/tmp/etc.conf
</code></pre><p>###七，显示/var目录下一级子目录或文件的总个数</p>
<pre><code>ls -al /var/|head -1|cut -d&apos; &apos; -f2
</code></pre><p>###八，取出/etc/group文件中第三个字段数值最小的10个组的名字</p>
<pre><code>sort -t: -k3 -n /etc/group|head -10|cut -d&apos;:&apos; -f1
</code></pre><p>###九，将/etc/fstab和/etc/issue文件的内容合并为同一个内容保存至/tmp/etc.test文件中</p>
<pre><code>cat /etc/fstab /etc/issue &gt; /tmp/etc.test
</code></pre><p>###十，请总结描述用户和组管理类命令的使用方法并完成练习</p>
<p>(1)、创建组distro，其GID为2016;</p>
<pre><code>groupadd distro -g 2016
</code></pre><p>(2)、创建用户mandriva, 其ID号为1005；基本组为distro;</p>
<pre><code>adduser mandriva -u 1005 -g distro
</code></pre><p>(3)、创建用户mageia，其ID号为1100，家目录为/home/linux;</p>
<pre><code>useradd mageia -u 1100 -d /home/linux
</code></pre><p>(4)、给用户mageia添加密码，密码为mageedu;</p>
<pre><code>[root@centos7 home]# passwd mageia 
更改用户 mageia 的密码 。
新的 密码：
无效的密码： 密码少于 8 个字符
重新输入新的 密码：
passwd：所有的身份验证令牌已经成功更新。
[root@centos7 home]# 
</code></pre><p>(5)、删除mandriva，但保留其家目录;</p>
<pre><code>userdel mandriva     
</code></pre><p>(6)、创建用户slackware，其ID号为2002，基本组为distro，附加组peguin;</p>
<pre><code>groupadd peguin &amp;&amp; useradd slackware -u 2002 -g distro -G peguin
</code></pre><p>(7)、修改slackware的默认shell为/bin/tcsh;</p>
<pre><code>usermod -s /usr/bin/tcsh slackware 
</code></pre><p>(8)、为用户slackware新增附加组admins;</p>
<pre><code>groupadd admins &amp;&amp; usermod -G admins slackware
</code></pre><p>(9)、为slackware添加密码，且要求密码最短使用期限为3天，最长为180天，警告为3天;</p>
<pre><code>echo &quot;123456&quot; | passwd --stdin slackware
passwd -n 3 -x 180 -w 3 slackware
</code></pre><p>(10)、添加用户openstack，其ID号为3003, 基本组为clouds，附加组为peguin和nova;</p>
<pre><code>groupadd nova &amp;&amp; groupadd clouds &amp;&amp; useradd openstack -u 3003 -g clouds -G peguin,nova
</code></pre><p>(11)、添加系统用户mysql，要求其shell为/sbin/nologin;</p>
<pre><code>useradd -s /sbin/nologin mysql
</code></pre><p>(12)、使用echo命令，非交互式为openstack添加密码.</p>
<pre><code>echo &quot;123456&quot; | passwd –stdin openstack
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第七周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第七周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.641Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>##1、创建一个10G分区，并格式为ext4文件系统；</p>
<p>###(1) 要求其block大小为2048, 预留空间百分比为2, 卷标为MYDATA, 默认挂载属性包含acl；</p>
<p>###(2) 挂载至/data/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳；</p>
<pre><code>[root@centos ~]# fdisk -l   #马哥说不写注释的都是耍流氓

Disk /dev/sda: 171.8 GB, 171798691840 bytes
255 heads, 63 sectors/track, 20886 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00098b32

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64       20887   167259136   8e  Linux LVM

Disk /dev/sdb: 10.7 GB, 10737418240 bytes   #创建一个10G分区
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_centos-lv_root: 170.2 GB, 170196467712 bytes
255 heads, 63 sectors/track, 20691 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_centos-lv_swap: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

[root@centos ~]# fdisk /dev/sdb 
Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
Building a new DOS disklabel with disk identifier 0x248136bc.
Changes will remain in memory only, until you decide to write them.
After that, of course, the previous content won&apos;t be recoverable.

Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)

WARNING: DOS-compatible mode is deprecated. It&apos;s strongly recommended to
         switch off the mode (command &apos;c&apos;) and change display units to
         sectors (command &apos;u&apos;).

Command (m for help): n
Command action
   e   extended
   p   primary partition (1-4)
p
Partition number (1-4): 1
First cylinder (1-1305, default 1): 
Using default value 1
Last cylinder, +cylinders or +size{K,M,G} (1-1305, default 1305): 
Using default value 1305

Command (m for help): wq
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.
[root@centos ~]# fdisk -l

Disk /dev/sda: 171.8 GB, 171798691840 bytes
255 heads, 63 sectors/track, 20886 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00098b32

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64       20887   167259136   8e  Linux LVM

Disk /dev/sdb: 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x248136bc

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1        1305    10482381   83  Linux

Disk /dev/mapper/vg_centos-lv_root: 170.2 GB, 170196467712 bytes
255 heads, 63 sectors/track, 20691 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_centos-lv_swap: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


[root@centos ~]# mkfs -b 2048 -t ext4 -L MYDATA -m 2 /dev/sdb1  #格式为ext4文件系统，其block大小为2048, 预留空间百分比为2, 卷标为MYDATA
mke2fs 1.41.12 (17-May-2010)
文件系统标签=MYDATA
操作系统:Linux
块大小=2048 (log=1)
分块大小=2048 (log=1)
Stride=0 blocks, Stripe width=0 blocks
655360 inodes, 5241190 blocks
262059 blocks (5.00%) reserved for the super user
第一个数据块=0
Maximum filesystem blocks=542113792
320 block groups
16384 blocks per group, 16384 fragments per group
2048 inodes per group
Superblock backups stored on blocks: 
    16384, 49152, 81920, 114688, 147456, 409600, 442368, 802816, 1327104, 
    2048000, 3981312

正在写入inode表: 完成                            
Creating journal (32768 blocks): 完成
Writing superblocks and filesystem accounting information: 完成

This filesystem will be automatically checked every 20 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.

[root@centos ~]# tune2fs -o acl /dev/sdb1  #默认挂载属性包含acl
tune2fs 1.41.12 (17-May-2010)
[root@centos ~]# mkdir -p /data/mydata &amp;&amp; mount -o noexec,noatime /dev/sdb1 /data/mydata #挂载至/data/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳
[root@centos ~]# echo $? 
0
[root@centos ~]# cd /data/
[root@centos data]# ll
总用量 2
drwxr-xr-x 3 root root 2048 12月 26 17:36 mydata
[root@centos data]# cd mydata/
[root@centos mydata]# ll
总用量 16
drwx------ 2 root root 16384 12月 26 17:36 lost+found
[root@centos mydata]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_centos-lv_root
                      156G  3.8G  145G   3% /
tmpfs                 1.9G   72K  1.9G   1% /dev/shm
/dev/sda1             477M  160M  292M  36% /boot
/dev/sdb1             9.8G   13M  9.3G   1% /data/mydata
[root@centos mydata]# 
</code></pre><p>##2、创建一个大小为1G的swap分区，并创建好文件系统，并启用之；</p>
<pre><code>[root@centos ~]# fdisk /dev/sdb 
Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
Building a new DOS disklabel with disk identifier 0x70af3aab.
Changes will remain in memory only, until you decide to write them.
After that, of course, the previous content won&apos;t be recoverable.

Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)

WARNING: DOS-compatible mode is deprecated. It&apos;s strongly recommended to
         switch off the mode (command &apos;c&apos;) and change display units to
         sectors (command &apos;u&apos;).

Command (m for help): n
Command action
   e   extended
   p   primary partition (1-4)

Command action
   e   extended
   p   primary partition (1-4)
p
Partition number (1-4): 1
First cylinder (1-130, default 1): 
Using default value 1
Last cylinder, +cylinders or +size{K,M,G} (1-130, default 130): 
Using default value 130

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.

[root@centos ~]# mkswap /dev/sdb1
Setting up swapspace version 1, size = 1044188 KiB
no label, UUID=85de9eea-a86d-48f4-a24d-00615a9812f8
[root@centos ~]# swapon /dev/sdb1 
[root@centos ~]# free -m
             total       used       free     shared    buffers     cached
Mem:          3816        517       3299          1         27        289
-/+ buffers/cache:        200       3615
Swap:         1019          0       1019
[root@centos ~]# echo &quot;/dev/sdb1 swap swap defaults 0 0&quot; &gt;&gt; /etc/fstab #swap现已加入开机挂载全家桶！
</code></pre><p>##3、写一个脚本</p>
<p>###(1)、获取并列出当前系统上的所有磁盘设备；(2)、显示每个磁盘设备上每个分区相关的空间使用信息；</p>
<pre><code>[root@centos gogogogogogogogoo]# cat DiskInfo_Jerry.sh  #马哥说过，脚本就是命令的拼凑，所以，命令学好，脚本风骚。
#!/bin/bash
#Author: Jerry
lsblk
df -ahT

[root@centos gogogogogogogogoo]# bash DiskInfo_Jerry.sh 
NAME                          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda                             8:0    0   160G  0 disk 
├─sda1                          8:1    0   500M  0 part /boot
└─sda2                          8:2    0 159.5G  0 part 
  ├─vg_centos-lv_root (dm-0)  253:0    0 158.5G  0 lvm  /
  └─vg_centos-lv_swap (dm-1)  253:1    0     1G  0 lvm  
sdb                             8:16   0    10G  0 disk 
└─sdb1                          8:17   0    10G  0 part 
  ├─vg_mage-mylv1-real (dm-3) 253:3    0     5G  0 lvm  
  │ ├─vg_mage-mylv1 (dm-2)    253:2    0     5G  0 lvm  
  │ └─vg_mage-snvg1 (dm-5)    253:5    0     5G  1 lvm  
  └─vg_mage-snvg1-cow (dm-4)  253:4    0   160M  1 lvm  
    └─vg_mage-snvg1 (dm-5)    253:5    0     5G  1 lvm  
sdc                             8:32   0    60G  0 disk 
└─sdc1                          8:33   0    60G  0 part 

Filesystem           Type                 Size  Used Avail Use% Mounted on
/dev/mapper/vg_centos-lv_root
                     ext4                 156G  3.4G  145G   3% /
proc                 proc                    0     0     0    - /proc
sysfs                sysfs                   0     0     0    - /sys
devpts               devpts                  0     0     0    - /dev/pts
tmpfs                tmpfs                1.9G   68K  1.9G   1% /dev/shm
/dev/sda1            ext4                 477M   35M  418M   8% /boot
/dev/mapper/vg_mage-mylv1
                     ext4                 4.8G   10M  4.6G   1% /users
none                 binfmt_misc             0     0     0    - /proc/sys/fs/binfmt_misc
vmware-vmblock       fuse.vmware-vmblock     0     0     0    - /var/run/vmblock-fuse

[root@centos gogogogogogogogoo]# 
</code></pre><p>##4、总结RAID的各个级别及其组合方式和性能的不同；</p>
<pre><code>RAID-0: 
    读、写性能提升；
    可用空间：N*min(S1,S2,...)
    无容错能力
    最少磁盘数：2, 2+

RAID-1：
    读性能提升、写性能略有下降；
    可用空间：1*min(S1,S2,...)
    有冗余能力
    最少磁盘数：2, 2+

RAID-4：
    1101, 0110, 1011

RAID-5：
    读、写性能提升
    可用空间：(N-1)*min(S1,S2,...)
    有容错能力：1块磁盘
    最少磁盘数：3, 3+

RAID-6：
    读、写性能提升
    可用空间：(N-2)*min(S1,S2,...)
    有容错能力：2块磁盘
    最少磁盘数：4, 4+


混合类型
    RAID-10：
        读、写性能提升
        可用空间：N*min(S1,S2,...)/2
        有容错能力：每组镜像最多只能坏一块；
        最少磁盘数：4, 4+
</code></pre><p>##5、创建一个大小为10G的RAID1，要求有一个空闲盘，而且CHUNK大小为128k;</p>
<pre><code>生产环境都是用服务器自带的磁盘阵列卡来做raid，具体详见各厂商的操作文档，此题我就跳过了，请老湿原谅我的直接。
</code></pre><p>##6、创建一个大小为4G的RAID5设备，chunk大小为256k，格式化ext4文件系统，要求可开机自动挂载至/backup目录，而且不更新访问时间戳，且支持acl功能；</p>
<pre><code>生产环境都是用服务器自带的磁盘阵列卡来做raid，具体详见各厂商的操作文档，此题我就跳过了，请老湿原谅我的直接。
更新访问时间戳我要说一下，生产环境一般都是要更新访问时间戳的
</code></pre><p>##7、写一个脚本，(1) 接受一个以上文件路径作为参数；(2) 显示每个文件拥有的行数；(3) 总结说明本次共为几个文件统计了其行数；</p>
<pre><code>[root@centos gogogogogogogogoo]# bash Sum_wc-l.sh /etc/ssh/sshd_config /etc/fstab /etc/rc.local 
Number of rows in /etc/ssh/sshd_config is 138
Number of rows in /etc/fstab is 16
Number of rows in /etc/rc.local is 7
total of 3  files
[root@centos gogogogogogogogoo]# cat Sum_wc-l.sh 
#!/bin/bash
#
if [ $# -lt 1 ];then
    echo &quot;At least one filesname &quot;
    exit 2
fi

    for i in $*;do
       line=$(cat $i | wc -l)
       echo &quot;Number of rows in $i is $line&quot;
    done 

echo &quot;total of $#  files&quot;
[root@centos gogogogogogogogoo]# 
</code></pre><p>##8、写一个脚本 (1) 传递两个以上字符串当作用户名；(2) 创建这些用户；且密码同用户名；(3) 总结说明共创建了几个用户；</p>
<pre><code>[root@centos gogogogogogogogoo]# bash Creat_user.sh 
At least two username 
[root@centos gogogogogogogogoo]# bash Creat_user.sh abb1 abb2 abb3 abb4
Add user abb1 finished
Add user abb2 finished
Add user abb3 finished
Add user abb4 finished
total of Create 4 users
[root@centos gogogogogogogogoo]# cat Creat_user.sh 
#!/bin/bash

if [ $# -lt 2 ];then
    echo &quot;At least two username &quot;
    exit 2
fi    

    for i in $*;do
        if grep &quot;^$i\&gt;&quot; /etc/passwd &amp;&gt; /dev/null;then

            echo &quot;User $i exists&quot;
    else
        useradd $i
            echo $i | passwd --stdin $i &amp;&gt; /dev/null
            echo &quot;Add user $i finished&quot;
        fi

    done 

echo &quot;total of Create $# users&quot;
[root@centos gogogogogogogogoo]# 
</code></pre><p>##9、写一个脚本，新建20个用户，visitor1-visitor20；计算他们的ID之和；</p>
<pre><code>[root@centos gogogogogogogogoo]# bash sum_userid.sh 
The users ID sum is: 10330
[root@centos gogogogogogogogoo]# cat sum_userid.sh 
#!/bin/bash

num=0

for i in {1..20};do
    if id visitor$i &amp;&gt; /dev/null;then
    echo &quot;visitor$i exists&quot;
        else
            useradd visitor$i
        id=$(grep &quot;^visitor$i\&gt;&quot; /etc/passwd | cut -d: -f 3)
        let num+=$id
    fi
done

echo &quot;The users ID sum is: $num&quot;
[root@centos gogogogogogogogoo]# 
</code></pre><p>##10、写一脚本，分别统计/etc/rc.d/rc.sysinit、/etc/rc.d/init.d/functions和/etc/fstab文件中以#号开头的行数之和，以及总的空白行数；</p>
<pre><code>[root@centos jerry_go]# cat title10-2.sh 
#!/bin/bash
#Author:Jerry
#Description
#
#

    if [ -e $1 ]; then
        jinghao1=$(grep &quot;^#&quot; $1 | wc -l)
        blank_line1=$(grep &quot;^$&quot; $1 | wc -l)
        echo &quot;The file $1 Jinghao_lines:$jinghao1    Blank_lines:$blank_line1  &quot; 
    else
        echo &quot;The file $1 no exist&quot;
        exit 2
    fi


    if [ -e $2 ]; then
        jinghao2=$(grep &quot;^#&quot; $2 | wc -l)
        blank_line2=$(grep &quot;^$&quot; $2 | wc -l)
        echo &quot;The file $2 Jinghao_lines:$jinghao2    Blank_lines:$blank_line2  &quot; 
    else
        echo &quot;The file $2 no exist&quot;
        exit 2
   fi


    if [ -e $3 ]; then
        jinghao3=$(grep &quot;^#&quot; $3 | wc -l)
        blank_line3=$(grep &quot;^$&quot; $3 | wc -l)
        echo &quot;The file $3 Jinghao_lines:$jinghao3    Blank_lines:$blank_line3  &quot;  
    else
        echo &quot;The file $3 no exist&quot;
        exit 2
    fi

    echo &quot;Total jinghao lines: $[$jinghao1+$jinghao2+$jinghao3]&quot;   
    echo &quot;Total blank lines: $[$blank_line1+$blank_line2+$blank_line3]&quot; &amp;&amp; exit 0  

走一个！come on baby！
[root@centos jerry_go]# bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/functions /etc/fstab 
The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  
The file /etc/rc.d/init.d/functions Jinghao_lines:43    Blank_lines:105  
The file /etc/fstab Jinghao_lines:8    Blank_lines:1  
Total jinghao lines: 95
Total blank lines: 206
[root@centos jerry_go]# 

异常的走一个！ 欧耶！
[root@centos jerry_go]# bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/funct234ions /etc/fstab 
The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  
The file /etc/rc.d/init.d/funct234ions no exist
[root@centos jerry_go]#

异常的再走一个！    
[root@centos jerry_go]# bash title10-2.sh /etc/rc.d/rc.sysinit /etc/rc.d/init.d/functions /etc/fst123ab 
The file /etc/rc.d/rc.sysinit Jinghao_lines:44    Blank_lines:100  
The file /etc/rc.d/init.d/functions Jinghao_lines:43    Blank_lines:105  
The file /etc/fst123ab no exist
[root@centos jerry_go]# 

最后发现井号的英文是well number ， 脚本里面用拼音实在是很low，不过我是刚开始嘛，who care......
</code></pre><p>##11、写一个脚本，显示当前系统上所有默认shell为bash的用户的用户名、UID以及此类所有用户的UID之和；</p>
<pre><code>[root@centos jerry_go]# cat week7_title11.sh
#!/bin/bash
#Author:Jerry
#Description
#
#

grep &quot;bin/bash$&quot; /etc/passwd  |cut -d&quot;:&quot; -f1,3

for i in `grep &quot;bin/bash$&quot; /etc/passwd  |awk -F &quot;:&quot; &apos;{print $3}&apos;`;do
    let sum+=$i
done

 echo &quot;Users ID sum is:$sum&quot;

[root@centos jerry_go]# bash week7_title11.sh 
root:0
magedu:500
mamamamam:501
magedu1:502
abb1:503
abb2:504
abb3:505
abb4:506
visitor1:507
visitor2:508
visitor3:509
visitor4:510
visitor5:511
visitor6:512
visitor7:513
visitor8:514
visitor9:515
visitor10:516
visitor11:517
visitor12:518
visitor13:519
visitor14:520
visitor15:521
visitor16:522
visitor17:523
visitor18:524
visitor19:525
visitor20:526
Users ID sum is:13851
</code></pre><p>##12、写一个脚本，显示当前系统上所有，拥有附加组的用户的用户名；并说明共有多少个此类用户；</p>
<pre><code>[root@centos jerry_go]# bash week7_title12.sh 
bin
daemon
sys
adm
lp
mail
haldaemon
This users has 7.

[root@centos jerry_go]# cat week7_title12.sh 
#!/bin/bash
#Author:Jerry
#Description
#

grep -v &quot;:$&quot; /etc/group |awk -F &quot;:&quot; &apos;{print $1}&apos;
echo &quot;This users has $(grep -v &quot;:$&quot; /etc/group |awk -F &quot;:&quot; &apos;{print $1}&apos;|wc -l).&quot;
[root@centos jerry_go]# 
</code></pre><p>###13、创建一个由至少两个物理卷组成的大小为20G的卷组；要求，PE大小为8M；而在卷组中创建一个大小为5G的逻辑卷mylv1，格式化为ext4文件系统，开机自动挂载至/users目录，支持acl；</p>
<pre><code>[root@centos ~]# pvdisplay   #先看看环境
  --- Physical volume ---
  PV Name               /dev/sda2
  VG Name               vg_centos
  PV Size               159.51 GiB / not usable 3.00 MiB
  Allocatable           yes (but full)
  PE Size               4.00 MiB
  Total PE              40834
  Free PE               0
  Allocated PE          40834
  PV UUID               1O2YO5-7puR-3Pfu-nR15-tqCc-JjPN-giIZeh

  &quot;/dev/sdb1&quot; is a new physical volume of &quot;10.00 GiB&quot;
  --- NEW Physical volume ---
  PV Name               /dev/sdb1
  VG Name               
  PV Size               10.00 GiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               dmUkps-1j6e-q50O-yOh8-nBlT-lw6t-nGKnat

  &quot;/dev/sdc1&quot; is a new physical volume of &quot;60.00 GiB&quot;
  --- NEW Physical volume ---
  PV Name               /dev/sdc1
  VG Name               
  PV Size               60.00 GiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               WfoY2H-efkl-qx0z-Yetm-wyV0-3lUU-u815Aq

[root@centos ~]# vgcreate -s 8m vg_mage /dev/sdb1 /dev/sdc1  #创建一个由至少两个物理卷组成的大小为20G的卷组，我这里不止了，无伤大雅。
  Volume group &quot;vg_mage&quot; successfully created
[root@centos ~]# lvcreate -L 5G -n mylv1 vg_mage &amp;&amp; mkfs.ext4 /dev/vg_mage/mylv1 #在卷组中创建一个大小为5G的逻辑卷mylv1，格式化为ext4文件系统
[root@centos ~]# mkdir /users &amp;&amp; echo &quot;/dev/vg_mage/mylv1 /users ext4 defaults,acl 0 0&quot; &gt;&gt; /etc/fstab  #自动挂载至/users目录，支持acl
[root@centos ~]# cat /etc/fstab 

#
# /etc/fstab
# Created by anaconda on Thu Jun 23 18:40:21 2016
#
# Accessible filesystems, by reference, are maintained under &apos;/dev/disk&apos;
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/vg_centos-lv_root /                       ext4    defaults        1 1
UUID=7b714956-acd7-44cb-af53-4eacde793fd9 /boot                   ext4    defaults        1 2
#/dev/mapper/vg_centos-lv_swap swap                    swap    defaults        0 0
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
/dev/vg_mage/mylv1 /users ext4 defaults,acl 0 0

 [root@centos ~]#
</code></pre><p>###14、新建用户magedu；其家目录为/users/magedu，而后su切换至此用户，复制多个文件至家目录；</p>
<pre><code>[root@centos ~]# useradd magedu -d /users/magedu
[root@centos ~]# su - magedu
[magedu@centos ~]$ cp /etc/*.conf ~
[magedu@centos ~]$ ls -al
总用量 188
drwx------  4 magedu magedu  4096 12月 27 12:52 .
drwxr-xr-x. 4 root   root    4096 12月 27 12:48 ..
-rw-r--r--  1 magedu magedu   148 12月 27 12:52 asound.conf
-rw-r--r--  1 magedu magedu    18 5月  11 2016 .bash_logout
-rw-r--r--  1 magedu magedu   176 5月  11 2016 .bash_profile
-rw-r--r--  1 magedu magedu   124 5月  11 2016 .bashrc
-rw-r--r--  1 magedu magedu  1780 12月 27 12:52 cas.conf
-rw-r--r--  1 magedu magedu 21214 12月 27 12:52 dnsmasq.conf
-rw-r--r--  1 magedu magedu   519 12月 27 12:52 dracut.conf
-rw-r--r--  1 magedu magedu    20 12月 27 12:52 fprintd.conf
-rw-r--r--  1 magedu magedu     0 12月 27 12:52 gai.conf
drwxr-xr-x  2 magedu magedu  4096 11月 12 2010 .gnome2
-rw-r--r--  1 magedu magedu     9 12月 27 12:52 host.conf
-rw-r--r--  1 magedu magedu     0 12月 27 12:52 init.conf
-rw-r--r--  1 magedu magedu  8120 12月 27 12:52 kdump.conf
-rw-r--r--  1 magedu magedu   449 12月 27 12:52 krb5.conf
-rw-r--r--  1 magedu magedu  1662 12月 27 12:52 latrace.conf
-rw-r--r--  1 magedu magedu    47 12月 27 12:52 ld.so.conf
-rw-r--r--  1 magedu magedu  2293 12月 27 12:52 libuser.conf
-rw-r--r--  1 magedu magedu   662 12月 27 12:52 logrotate.conf
-rw-r--r--  1 magedu magedu 10814 12月 27 12:52 ltrace.conf
-rw-r--r--  1 magedu magedu   827 12月 27 12:52 mke2fs.conf
drwxr-xr-x  4 magedu magedu  4096 6月  23 2016 .mozilla
-rw-r--r--  1 magedu magedu  2620 12月 27 12:52 mtools.conf
-rw-r--r--  1 magedu magedu  1688 12月 27 12:52 nsswitch.conf
-rw-r--r--  1 magedu magedu  1698 12月 27 12:52 ntp.conf
-rw-r--r--  1 magedu magedu   370 12月 27 12:52 pm-utils-hd-apm-restore.conf
-rw-r--r--  1 magedu magedu   789 12月 27 12:52 prelink.conf
-rw-r--r--  1 magedu magedu   966 12月 27 12:52 readahead.conf
-rw-r--r--  1 magedu magedu    81 12月 27 12:52 resolv.conf
-rw-r--r--  1 magedu magedu  2875 12月 27 12:52 rsyslog.conf
-rw-r--r--  1 magedu magedu   216 12月 27 12:52 sestatus.conf
-rw-r--r--  1 magedu magedu  6717 12月 27 12:52 smartd.conf
-rw-r--r--  1 magedu magedu   256 12月 27 12:52 sos.conf
-rw-r--r--  1 magedu magedu  1800 12月 27 12:52 sysctl.conf
-rw-r--r--  1 magedu magedu  1309 12月 27 12:52 tpvmlp.conf
-rw-r--r--  1 magedu magedu    45 12月 27 12:52 Trolltech.conf
-rw-r--r--  1 magedu magedu   485 12月 27 12:52 updatedb.conf
-rw-r--r--  1 magedu magedu  3008 12月 27 12:52 warnquota.conf
-rw-r--r--  1 magedu magedu   969 12月 27 12:52 yum.conf
[magedu@centos ~]$ 
</code></pre><p>15、扩展mylv1至9G，确保扩展完成后原有数据完全可用；</p>
<pre><code>lvextend -L +4G /dev/mapper/myvg-mylv1 
resize2fs /dev/mapper/myvg-mylv1
</code></pre><p>16、缩减mylv1至7G，确保缩减完成后原有数据完全可用；</p>
<pre><code># umount /dev/vg_mage/mylv1
# e2fsck -f /dev/vg_mage/mylv1
# resize2fs /dev/vg_mage/mylv11 7G
# lvreduce -L 7G /dev/vg_mage/mylv1
# mount /dev/vg_mage/mylv1 /users/
</code></pre><p>17、对mylv1创建快照，并通过备份数据；要求保留原有的属主属组等信息；</p>
<pre><code>[root@centos users]# lvcreate -s -l 20 -n snvg1 -p r /dev/vg_mage/mylv1
Logical volume &quot;snvg1&quot; created.
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第六周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第六周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.493Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>;##请详细总结vim编辑器的使用并完成以下练习题</p>
<p>VIM很强大，但是万变不离其宗，最核心的三模式以下图表示：</p>
<p><img src="http://i.imgur.com/6np2y0D.jpg" alt=""></p>
<p>###1、复制/etc/rc.d/rc.sysinit文件至/tmp目录，将/tmp/rc.sysinit文件中的以至少一个空白字符开头的行的行首加#；</p>
<pre><code>:%s/^[[:blank:]]\+.*/\0#/g
</code></pre><p>###2、复制/boot/grub/grub.conf至/tmp目录中，删除/tmp/grub.conf文件中的行首的空白字符；</p>
<pre><code>:%s/^[[:space:]]\+//g
</code></pre><p>###3、删除/tmp/rc.sysinit文件中的以#开头，且后面跟了至少一个空白字符的行行的#和空白字符</p>
<pre><code>:%s/^#[[:blank:]]\+//g
</code></pre><p>###4、为/tmp/grub.conf文件中前三行的行首加#号；</p>
<pre><code>:1,3s/^/\0#/g
</code></pre><p>###5、将/etc/yum.repos.d/CentOS-Media.repo文件中所有的enabled=0或gpgcheck=0的最后的0修改为1；</p>
<pre><code>:%s/\(enabled\|gpgcheck\)=0/\1=1/g
</code></pre><p>###6、每4小时执行一次对/etc目录的备份，备份至/backup目录中，保存的目录名为形如etc-201504020202</p>
<pre><code>* */4 * * * /usr/bin/cp /etc /backup/etc-$(date +%Y%m%d%H%M)/
</code></pre><p>###7、每周2，4，6备份/var/log/messages文件至/backup/messages_logs/目录中，保存的文件名形如messages-20150402</p>
<pre><code>* * * * 2,4,6   /usr/bin/cp /var/log/messages /backupmessages_logs/messages-$(date +%Y%m%d)
</code></pre><p>###8、每天每两小时取当前系统/proc/meminfo文件中的所有以S开头的信息至/stats/memory.txt文件中</p>
<pre><code>* */2 * * * /usr/bin/grep -E &quot;S.*&quot; /proc/meminfo&gt;&gt;/stats/memory.txt
</code></pre><p>###9、工作日的工作时间内，每两小时执行一次echo “howdy”</p>
<pre><code>* 9-18/2 * * 1-5        /usr/bin/echo &quot;howdy&quot;
</code></pre><p>##脚本编程练习</p>
<p>###10、创建目录/tmp/testdir-当前日期时间; 在此目录创建100个空文件：file1-file100</p>
<pre><code>[root@centos7 ~]# cat testdir
#!/bin/bash
#Author:Jerry

cd /tmp &amp;&amp; mkdir testdir-$(date +%Y%m%d%H%M%S)

cd testdir-$(date +%Y%m%d%H%M%S)

for i in {1..100}; do
    touch file$i
done




[root@centos7 ~]# bash testdir
[root@centos7 ~]# ls /tmp/testdir-20161219144412/
file1    file14  file2   file25  file30  file36  file41  file47  file52  file58  file63  file69  file74  file8   file85  file90  file96
file10   file15  file20  file26  file31  file37  file42  file48  file53  file59  file64  file7   file75  file80  file86  file91  file97
file100  file16  file21  file27  file32  file38  file43  file49  file54  file6   file65  file70  file76  file81  file87  file92  file98
file11   file17  file22  file28  file33  file39  file44  file5   file55  file60  file66  file71  file77  file82  file88  file93  file99
file12   file18  file23  file29  file34  file4   file45  file50  file56  file61  file67  file72  file78  file83  file89  file94
file13   file19  file24  file3   file35  file40  file46  file51  file57  file62  file68  file73  file79  file84  file9   file95
[root@centos7 ~]# 
</code></pre><p>###12、显示/etc/passwd文件中位于第偶数行的用户的用户名；</p>
<pre><code>[root@centos7 ~]# sed -n &apos;2~2p&apos; /etc/passwd |cut -d &quot;:&quot; -f1
bin
adm
sync
halt
operator
ftp
avahi-autoipd
systemd-network
polkitd
apache
abrt
unbound
saslauth
amandabackup
geoclue
setroubleshoot
ntp
nfsnobody
qemu
mysql
pulse
gnome-initial-setup
sshd
tcpdump
hadoop
testbash
nologin
user1
</code></pre><p>###13、创建10用户user10-user19；密码同用户名；</p>
<pre><code>#!/bin/bash
#

    for i in {10..19};do
            if id user$i ;then
                    echo &quot;user$i exists.&quot;
            else
                    useradd user$i
                    echo &quot;user$i&quot; | passwd --stdin user$i
            fi
    done
</code></pre><p>###14、在/tmp/创建10个空文件file10-file19; 把file10的属主和属组改为user10，依次类推。</p>
<pre><code>#!/bin/bash
#
            cd /tmp/
    for i in {10..19};do
            if [ -e file$i ] ;then
                    echo &quot;file$i exists.&quot;
                    chown user$i:user$i file$i
            else

                    touch file$i
                    chown user$i:user$i file$i
            fi
    done
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第九周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第九周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.469Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>1、写一个脚本，判断当前系统上所有用户的shell是否为可登录shell（即用户的shell不是/sbin/nologin）；分别这两类用户的个数；通过字符串比较来实现；</p>
<pre><code>#脚本内容
[root@centos script]# cat week9_title1.sh 
#!/bin/bash
#Author Jerry
#

#Display shell is nologin user&apos;s shell count 
echo &quot;The shell is  nologin user count is $(grep -o &quot;nologin&quot; /etc/passwd |wc -l)&quot; 

#Display shell not&apos;s nologin user&apos;s shell count 
echo &quot;The shell not&apos;s nologin user count is $(grep -v &quot;nologin&quot; /etc/passwd |wc -l)&quot; 

#测试脚本
[root@centos script]# bash week9_title1.sh 
The shell is  nologin user count is 25
The shell not&apos;s nologin user count is 7
[root@centos script]# 
</code></pre><p>2、写一个脚本</p>
<p>(1) 获取当前主机的主机名，保存于hostname变量中；</p>
<p>(2) 判断此变量的值是否为localhost，如果是，则将当前主机名修改为<a href="http://www.magedu.com；" target="_blank" rel="noopener">www.magedu.com；</a></p>
<p>(3) 否则，则显示当前主机名；</p>
<pre><code>[root@centos script]# cat week9_title2.sh 
#!/bin/bash
#Author Jerry
#

hostname=$(hostname)

if [ $hostname == &quot;localhost&quot; ];then
    hostname www.magedu.com
    echo &quot;current hostname is:$hostname&quot;
else
    echo &quot;current hostname is:$hostname&quot;

fi
[root@centos script]# 
</code></pre><p>3、写一个脚本，完成如下功能</p>
<p>(1) 传递一个磁盘设备文件路径给脚本，判断此设备是否存在；</p>
<p>(2) 如果存在，则显示此设备上的所有分区信息；</p>
<pre><code>[root@centos script]# cat week9_title3.sh 
#!/bin/bash
#Author Jerry
#


[ $# -lt 1 ] &amp;&amp; echo &quot;please atleast input on&quot;

if [ -b $1 ];then
    fdisk -l $1
else
    echo &quot;nothing&quot;
fi
</code></pre><p>4、写一个脚本，完成如下功能, 脚本能够接受一个参数；</p>
<p>   (1) 如果参数1为quit，则显示退出脚本，并执行正常退出；</p>
<p>   (2) 如果参数1为yes，则显示继续执行脚本；</p>
<p>   (3) 否则，参数1为其它任意值，均执行非正常退出；</p>
<pre><code>[root@centos script]# bash week9_title4.sh 
please input one atleast
error!!!!!
[root@centos script]# bash week9_title4.sh quit
exit....
[root@centos script]# bash week9_title4.sh yes
go!go! go! 
[root@centos script]# echo $?
0
[root@centos script]# 
[root@centos script]# cat week9_title4.sh 
#!/bin/bash
#Author Jerry
#

[ $# -eq 0 ] &amp;&amp; echo &quot;please input one atleast&quot;

case $1 in

yes)
    echo &quot;go!go! go! &quot;
;;

quit)
    echo &quot;exit....&quot;
    exit 0
;;

*)
    echo &quot;error!!!!!&quot;
    exit 2
;;

esac
[root@centos script]# 
</code></pre><p>5、写一个脚本，完成如下功能</p>
<p>   传递一个参数给脚本，此参数为gzip、bzip2或者xz三者之一；</p>
<p>   (1) 如果参数1的值为gzip，则使用tar和gzip归档压缩/etc目录至/backups目录中，并命名为/backups/etc-20160613.tar.gz；</p>
<p>   (2) 如果参数1的值为bzip2，则使用tar和bzip2归档压缩/etc目录至/backups目录中，并命名为/backups/etc-20160613.tar.bz2；</p>
<p>   (3) 如果参数1的值为xz，则使用tar和xz归档压缩/etc目录至/backups目录中，并命名为/backups/etc-20160613.tar.xz；</p>
<p>   (4) 其它任意值，则显示错误压缩工具，并执行非正常退出；</p>
<pre><code>[root@www /]# cat /script/week9_title5.sh 
#!/bin/bash

    if [ $# -eq 0 ];then
       echo &quot;give me a argument,the argument is gzip bzip2 xz &quot;
       exit 19
    fi


      mkdir /backups &amp;&gt; /dev/null

       case $1 in
       gzip)
        tar -zcvf  /backups/etc-`date +%Y%m%d`.tar.gz /etc
        ;;
       bzip2)
        tar -jvf  /backups/etc-`date +%Y%m%d`.tar.bz2 /etc
        ;;
       xz)
        tar -Jvf  /backups/etc-`date +%Y%m%d`.tar.xz /etc
        ;;
       *)
         echo &quot;error!!!&quot;
         ;;
       esac
[root@www /]# 
</code></pre><p>6、写一个脚本，接受一个路径参数：</p>
<p>   (1) 如果为普通文件，则说明其可被正常访问；</p>
<p>   (2) 如果是目录文件，则说明可对其使用cd命令；</p>
<p>   (3) 如果为符号链接文件，则说明是个访问路径；</p>
<p>   (4) 其它为无法判断；</p>
<pre><code>[root@www script]# cat week9_title6.sh 
#!/bin/bash
#Author Jerry
#

#Check whether the user is to script a path parameter
[ $# -lt 1 ] &amp;&amp; echo &quot;Please give a path to the script parameters&quot;

if [ -f $1 ]; then

    echo &quot;这是一个普通文件，可以被正常访问&quot;

elif [ -d $1 ];then

    echo &quot;这是一个目录文件，可以使用cd命令&quot;

elif [ -h $1 ];then

    echo &quot;这是一个符号链接文件，它是一个访问路径&quot;

elif [ ! -h $1 ] &amp;&amp; [ ! -d $1 ] &amp;&amp; [ ! -f $1 ];then

    echo &quot;这是什么鬼，不想跟你说话并向你扔了一只狗！！！&quot;
    exit

fi
</code></pre><p>7、写一个脚本，取得当前主机的主机名，判断</p>
<p>   (1) 如果主机名为空或为localhost，或为””(none)””，则将其命名为mail.magedu.com；</p>
<p>   (2) 否则，显示现有的主机名即可；</p>
<pre><code>#!/bin/bash
hostname=$(hostname)
if [ -z &quot;$hostname&quot; -o &quot;$hostname&quot; == &quot;localhost&quot; -o  &quot;$hostname&quot; == &quot;none&quot; ];then
    hostname mail.magedu.com
else
    echo &quot;$hostname&quot;
fi
</code></pre><p>8、写一脚本，接受一个用户名为参数；</p>
<p>   (1) 如果用户的id号为0,则显示其为管理员；</p>
<p>   (2) 如果用户的id号大于0且小于500, 则显示其为系统用户；</p>
<p>   (3) 否则，则显示其为普通用户；</p>
<pre><code>#!/bin/bash
if [ $# -eq 0 ];then
    echo &quot;input argu&quot;
    exit 1
fi
    userid=$(id -u)
if [ $userid -eq 0 ];then
    echo &quot;admin&quot;
elif [ $userid -gt 0 -a $userid -lt 500 ];then
    echo &quot;system&quot;
else
    echo &quot;user&quot;
fi
</code></pre><p>10、写一个脚本，传递一个用户名参数给脚本；</p>
<p>   (1) 如果用户的id号大于等于500，且其默认shell为以sh结尾的字符串，则显示“a user can log system.”类的字符串；</p>
<p>   (2) 否则，则显示无法登录系统；</p>
<pre><code>#!/bin/bash
if [ $# -eq 0 ];then
    echo &quot;input argu&quot;
    exit 1
fi
    userid=grep ^$1 /etc/passwd | grep sh$ | cut -d: -f3
if [ $userid -ge 500 ];then
    echo &quot; a user can log system&quot;
else
    echo &quot;nologin&quot;
fi
</code></pre><p>11、写一个脚本，完成如下任务 ：</p>
<p>   (1) 按顺序分别复制/var/log目录下的每个直接文件或子目录至/tmp/test1-testn目录中；</p>
<p>   (2) 复制目录时，才使用cp -r命令；</p>
<p>   (3) 复制文件时使用cp命令；</p>
<p>   (4) 复制链接文件时使用cp -d命令；</p>
<p>   (5) 余下的所有类型，使用cp -a命令；”</p>
<pre><code>#!/bin/bash
for i in &apos;ls /var/log&apos;;do
    if [ -d $i ];then
        cp -r /var/log/$i /tmp/test/test1-testn/$i
    elif [ -f $i ];then
        cp /var/log/$i /tmp/test/test1-testn/$i
    elif [ -L $i ];then
        cp -d /var/log/$i /tmp/test/test1-testn/$i
    else
        cp -a /var/log/$i /tpm/test/test1-testn/$i
    fi
done
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第二周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第二周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.325Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#Linux上的文件管理类命令都有哪些，其常用的使用方法及其相关示例演示。</p>
<p>##目录管理类的命令</p>
<p>###mkdir<br>用法：</p>
<pre><code>mkdir [选项]... 目录...
</code></pre><p>选项： </p>
<pre><code>-p 递归创建多个目录
</code></pre><p>实例：</p>
<pre><code>[root@centos7 ~]# mkdir -p /tmp/jerry/2016/11/4
[root@centos7 /]# tree /tmp
 /tmp
├── akonadi-root.9I0Ba3
├── anaconda.log
├── hogsuspend
├── hsperfdata_root
│   └── 88148
├── hsperfdata_user
├── ifcfg.log
├── jerry
│   └── 2016
│       └── 11
│           └── 4


**注意：**
**centos7&amp;6默认没有安装tree命令，记得yum install tree 就OK。**
</code></pre><p>选项：</p>
<pre><code>-v 显示创建过程即命令执行过程
</code></pre><p>实例：</p>
<pre><code>[root@centos7 /]# mkdir -pv /tmp/aaa/bbb/ccc/2016/11qa
mkdir: 已创建目录 &quot;/tmp/aaa&quot;
mkdir: 已创建目录 &quot;/tmp/aaa/bbb&quot;
mkdir: 已创建目录 &quot;/tmp/aaa/bbb/ccc&quot;
mkdir: 已创建目录 &quot;/tmp/aaa/bbb/ccc/2016&quot;
mkdir: 已创建目录 &quot;/tmp/aaa/bbb/ccc/2016/11qa&quot;
</code></pre><p>选项：</p>
<pre><code>-m：设定目录权限，不加则为默认权限
</code></pre><p>实例：</p>
<pre><code>[root@centos7 /]# mkdir -m 777 -pv /tmp/fbi/cia
mkdir: 已创建目录 &quot;/tmp/fbi&quot;
mkdir: 已创建目录 &quot;/tmp/fbi/cia&quot;    
[root@centos7 /]# ll /tmp/fbi
总用量 0
drwxrwxrwx. 2 root root 6 11月  4 15:52 cia

[root@centos7 /]# mkdir -m 775 -pv /tmp/hbo/oom/ubuntu
mkdir: 已创建目录 &quot;/tmp/hbo&quot;
mkdir: 已创建目录 &quot;/tmp/hbo/oom&quot;
mkdir: 已创建目录 &quot;/tmp/hbo/oom/ubuntu
[root@centos7 /]# ll /tmp/hbo/oom/
总用量 0
drwxrwxr-x. 2 root root 6 11月  4 16:00 ubuntu

注意：-m 参数设定的目录权限只对最后一级的目录生效，其上级目录均是默认的755。哈哈~~
</code></pre><p>###rmdir<br>用法：</p>
<pre><code>rmdir [选项]... 目录...
</code></pre><p>选项参数：</p>
<pre><code>    --ignore-fail-on-non-empty
                忽略仅由目录非空产生的所有错误
-p, --parents   remove DIRECTORY and its ancestors; e.g., &apos;rmdir -p a/b/c&apos; is
                similar to &apos;rmdir a/b/c a/b a&apos;
-v, --verbose   output a diagnostic for every directory processed
    --help         显示此帮助信息并退出
    --version     显示版本信息并退出
</code></pre><p>实例：</p>
<pre><code>[root@centos7 tmp]# rmdir -pv fbi/cia/
rmdir: 正在删除目录 &quot;fbi/cia/&quot;
rmdir: 正在删除目录 &quot;fbi&quot;
</code></pre><p>##文件查看类命令</p>
<p>###cat<br>用法：</p>
<pre><code>用法：cat [选项]... [文件]...
将[文件]或标准输入组合输出到标准输出。
</code></pre><p>选项：</p>
<pre><code>-A, --show-all           等于-vET
-b, --number-nonblank    对非空输出行编号
-e                       等于-vE
-E, --show-ends          在每行结束处显示&quot;$&quot;
-n, --number             对输出的所有行编号
-s, --squeeze-blank      不输出多行空行
-t                       与-vT 等价
-T, --show-tabs          将跳格字符显示为^I
-u                       (被忽略)
-v, --show-nonprinting   使用^ 和M- 引用，除了LFD和 TAB 之外
    --help        显示此帮助信息并退出
    --version        显示版本信息并退出
</code></pre><p>平时可能用到的选项就是输出行号了，实例如下：</p>
<pre><code>[root@centos7 /]# cat -n /etc/rc.local 
 1    #!/bin/bash
 2    # THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES
 3    #
 4    # It is highly advisable to create own systemd services or udev rules
 5    # to run scripts during boot instead of using this file.
 6    #
 7    # In contrast to previous versions due to parallel execution during boot
 8    # this script will NOT be run after all other services.
 9    #
10    # Please note that you must run &apos;chmod +x /etc/rc.d/rc.local&apos; to ensure
11    # that this script will be executed during boot.
12    
13    touch /var/lock/subsys/local
[root@centos7 /]# 
</code></pre><p>###tac<br>tac命令：与cat功能相近，只是逆序显示文件内容</p>
<p>###head<br>用法：</p>
<pre><code>head [选项]... [文件]...
查看文件的前N行，默认为10行
</code></pre><p>选项：</p>
<pre><code>-n 
-#
</code></pre><p>实例：</p>
<pre><code>[root@centos7 ~]# head  /etc/passwd
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
[root@centos7 ~]# head - 15 /etc/passwd

[root@centos7 ~]# head -15 /etc/passwd
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
nobody:x:99:99:Nobody:/:/sbin/nologin
avahi-autoipd:x:170:170:Avahi IPv4LL Stack:/var/lib/avahi-autoipd:/sbin/nologin
systemd-bus-proxy:x:999:997:systemd Bus Proxy:/:/sbin/nologin
</code></pre><p>###tail<br>用法：</p>
<pre><code>tail [选项]... [文件]...
</code></pre><p>选项参数：</p>
<pre><code>-n：指定显示的行数。不加任何参数默认显示10行，从最后一行开始；
-#：直接指定显示的行数，从最后一行开始；
-f：查看文件尾部内容结束后不退出，跟随显示新增的行；
</code></pre><p>实例：</p>
<pre><code>[root@centos7 ~]# tail -2 /etc/passwd
tcpdump:x:72:72::/:/sbin/nologin
user:x:1000:1000:user:/home/user:/bin/bash

[root@centos7 ~]# tail /etc/passwd
mysql:x:27:27:MariaDB Server:/var/lib/mysql:/sbin/nologin
pcp:x:988:985:Performance Co-Pilot:/var/lib/pcp:/sbin/nologin
pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin
gdm:x:42:42::/var/lib/gdm:/sbin/nologin
gnome-initial-setup:x:987:982::/run/gnome-initial-setup/:/sbin/nologin
avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
oprofile:x:16:16:Special user account to be used by OProfile:/var/lib/oprofile:/sbin/nologin
tcpdump:x:72:72::/:/sbin/nologin
user:x:1000:1000:user:/home/user:/bin/bash
</code></pre><p>###more<br>用法：</p>
<pre><code>more [选项] 文件...
特点：翻屏至文件尾部后自动退出；
</code></pre><p>选项参数：</p>
<pre><code>-d        显示帮助，而不是响铃
-f        统计逻辑行数而不是屏幕行数
-l        抑制换页(form feed)后的暂停
-p        不滚屏，清屏并显示文本
-c        不滚屏，显示文本并清理行尾
-u        抑制下划线
-s        将多个空行压缩为一行
-NUM      指定每屏显示的行数为 NUM
+NUM      从文件第 NUM 行开始显示
+/STRING  从匹配搜索字符串 STRING 的文件位置开始显示
-V        输出版本信息并退出
</code></pre><p>实例：</p>
<pre><code>略过，给你个眼神自己体会^_^
</code></pre><p>###less</p>
<p> 特点： 其实man读取帮助手册就是调用的less指令。所以less命令的操作方式同man</p>
<p>##文件管理类命令</p>
<p>###cp<br>用法：</p>
<pre><code>单源复制：cp [OPTION]... [-T] SOURCE DEST
多源复制：cp [OPTION]... SOURCE... DIRECTORY
         cp [OPTION]... -t DIRECTORY SOURCE...

单源复制：cp [OPTION]... [-T] SOURCE DEST
         如果DEST不存在：则事先创建此文件，并复制源文件的数据流至DEST中；
            如果DEST存在：
                如果DEST是非目录文件：则覆盖目标文件；
                如果DEST是目录文件：则先在DEST目录下创建一个与源文件同名的文件，并复制其数据流；

多源复制：cp [OPTION]... SOURCE... DIRECTORY
         cp [OPTION]... -t DIRECTORY SOURCE...

            如果DEST不存在：错误；
            如果DEST存在：
                如果DEST是非目录文件：错误；
                如果DEST是目录文件：分别复制每个文件至目标目录中，并保持原名；
</code></pre><p>选项参数：</p>
<pre><code>-i：交互式复制，即覆盖之前提醒用户确认；
-f：强制覆盖目标文件；
-r, -R：递归复制目录；
-d：复制符号链接文件本身，而非其指向的源文件；
-a：-dR --preserve=all, archive，用于实现归档；
--preserv=
      mode：权限
      ownership：属主和属组
      timestamps: 时间戳
      context：安全标签
      xattr：扩展属性
      links：符号链接
      all：上述所有属性
</code></pre><p>实例：</p>
<pre><code>`单源复制-目标文件不存在情况`
[root@centos ~]# ls /tmp/
whatis.q3Uigb  yum.log
[root@centos ~]# cp /etc/issue /tmp
[root@centos ~]# ls /tmp/
issue  whatis.q3Uigb  yum.log
[root@centos ~]# cat /tmp/issue 
CentOS release 6.5 (Final)
Kernel \r on an \m

`单源复制-目标文件已存在情况`
[root@centos ~]# cp /etc/hosts /tmp/issue 
cp: overwrite `/tmp/issue&apos;? y
[root@centos ~]# cat /tmp/issue 
 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
 ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

`多源复制-目标目录不存在情况`
[root@centos ~]# cp /etc/hosts /etc/issue /tmp/x
cp: target `/tmp/x&apos; is not a directory

`多源复制-目标目录已存在情况`
[root@centos ~]# mkdir /tmp/x
[root@centos ~]# cp /etc/hosts /etc/issue /tmp/x
[root@centos ~]# ls /tmp/x
hosts  issue
[root@centos ~]# 

`-r选项实例`
[root@centos ~]# mkdir -p /tmp/souce/x/y/z
[root@centos ~]# mkdir /tmp/dest
[root@centos ~]# cp -r /tmp/souce/ /tmp/dest/
[root@centos ~]# tree /tmp/dest/    /tmp/dest/
└── souce
    └── x
        └── y
            └── z

4 directories, 0 files
[root@centos ~]# 

`--preserve选项实例`
[root@centos ~]# ls -l /tmp/ |grep liubin
-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:56 liubin    
[root@centos ~]# cp --preserve=ownership /tmp/liubin /tmp/root
[root@centos ~]# ls -l /tmp/
total 16
drwxr-xr-x. 3 root   root   4096 Sep 27 04:53 dest
-rw-r--r--. 1 root   root    158 Sep 27 04:43 issue    
-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:56 liubin    
-rw-rw-r--. 1 liubin liubin    0 Sep 27 04:59 root    
drwxr-xr-x. 3 root   root   4096 Sep 27 04:49 souce
drwxr-xr-x. 2 root   root   4096 Sep 27 04:44 x
-rw-------. 1 root   root      0 Sep 27 03:07 yum.log    
</code></pre><p>###mv<br>用法：</p>
<pre><code>mv [OPTION]... [-T] SOURCE DEST
mv [OPTION]... SOURCE... DIRECTORY
mv [OPTION]... -t DIRECTORY SOURCE..            
</code></pre><p>选项参数：</p>
<pre><code>-i：交互式    
-f：强制移动
</code></pre><p>实例：</p>
<pre><code>[root@localhost ~]# tree test
test
|-- 1p2a
|-- 28pa
|-- Pa99
|-- cpdoc.txt
|-- hahaha
|   |-- cpdoc.txt
|   |-- cpdoc1.txt
|   `-- text.txt
|-- p,a
|-- pa
|-- pa12
`-- papi

1 directory, 11 files

[root@localhost ~]# mv test/1p2a test/hahaha
[root@localhost ~]# tree test
test
|-- 28pa
|-- Pa99
|-- cpdoc.txt
|-- hahaha
|   |-- 1p2a
|   |-- cpdoc.txt
|   |-- cpdoc1.txt
|   `-- text.txt
|-- p,a
|-- pa
|-- pa12
`-- papi

1 directory, 11 files

[root@localhost ~]# mv test/hahaha test/mvtest
[root@localhost ~]# tree test
test
|-- 28pa
|-- Pa99
|-- cpdoc.txt
|-- mvtest
|   |-- 1p2a
|   |-- cpdoc.txt
|   |-- cpdoc1.txt
|   `-- text.txt
|-- p,a
|-- pa
|-- pa12
`-- papi

1 directory, 11 files
</code></pre><p>###rm<br>用法：</p>
<pre><code>rm [OPTION]... FILE...
</code></pre><p>选项参数：</p>
<pre><code>-i：interactive
-f：force
-r: recursive
</code></pre><p>实例：</p>
<pre><code>[root@centos ~]# ls /tmp
dest  issue  liubin  root  souce  yum.log
[root@centos ~]# tree /tmp/souce/
/tmp/souce/
└── x
    └── y
        └── z    
3 directories, 0 files
[root@centos ~]# rm -rf /tmp/souce/
[root@centos ~]# ls
anaconda-ks.cfg  install.log  install.log.syslog
[root@centos ~]#
</code></pre><p>#bash的工作特性之命令执行状态返回值和命令行展开所涉及的内容及其示例演示。</p>
<p>##用法<br>echo $?：显示最近一条命令的执行结果</p>
<p>只能查看最近一条命令的执行的状态结果返回值</p>
<p>命令执行成功，则显示：0</p>
<p>命令执行失败，则显示：1-255之间的任意数字 </p>
<p>##实例</p>
<pre><code>[root@centos7 ~]# ls /var
account  cache  db     games   kerberos  local  log   nis  preserve  spool   tmp  yp
adm      crash  empty  gopher  lib       lock   mail  opt  run       target  www
[root@centos7 ~]# echo $?
0
[root@centos7 ~]# ls /varte
ls: 无法访问/varte: 没有那个文件或目录
[root@centos7 ~]# echo $?
2
[root@centos7 ~]# lsd /var
bash: lsd: 未找到命令...
[root@centos7 ~]# echo $?
127
[root@centos7 ~]# 
</code></pre><p>###请使用命令行展开功能来完成以下练习：</p>
<p>##创建/tmp目录下的：a_c, a_d, b_c, b_d</p>
<pre><code>[root@centos7 ~]#  mkdir -v /tmp/{a,b}_{c,d}
mkdir: 已创建目录 &quot;/tmp/a_c&quot;
mkdir: 已创建目录 &quot;/tmp/a_d&quot;
mkdir: 已创建目录 &quot;/tmp/b_c&quot;
mkdir: 已创建目录 &quot;/tmp/b_d&quot;
[root@centos7 ~]# ls /tmp/
a_c
a_d
anaconda.log
b_c 
b_d
</code></pre><p>##创建/tmp/mylinux目录下的：</p>
<pre><code>mylinux
├── bin
├── boot
│   └── grub
├── dev
├── etc
│   ├── rc.d
│   │   └── init.d
│   └── sysconfig
│       └── network-scripts
├── lib
│   └── modules
├── lib64
├── proc
├── sbin
├── sys
├── tmp
├── usr
│   └── local
│       ├── bin
│       └── sbin
└── var
    ├── lock
    ├── log
    └── run



[root@centos7 ~]# mkdir -pv /tmp/mylinux/{bin,boot/grub,dev,etc/{rc.d/init.d,sysconfig/network-scripts},lib/modules,lib64,proc,sbin,sys,tmp,usr/local/{bin,sbin},var/{lock,log,run}}
mkdir: 已创建目录 &quot;/tmp/mylinux&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/bin&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/boot&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/boot/grub&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/dev&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/etc&quot; 
mkdir: 已创建目录 &quot;/tmp/mylinux/etc/rc.d&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/etc/rc.d/init.d&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/etc/sysconfig&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/etc/sysconfig/network-scripts&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/lib&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/lib/modules&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/lib64&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/proc&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/sbin&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/sys&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/tmp&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/usr&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/usr/local&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/usr/local/bin&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/usr/local/sbin&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/var&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/var/lock&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/var/log&quot;
mkdir: 已创建目录 &quot;/tmp/mylinux/var/run&quot;
[root@centos7 ~]# 
</code></pre><p>##文件的元数据信息有哪些，分别表示什么含义，如何查看？如何修改文件的时间戳信息。</p>
<pre><code>[root@centos7 etc]# stat /bin/bash
文件：&quot;/bin/bash&quot;
大小：960392        块：1880       IO 块：4096   普通文件
设备：fd00h/64768d    Inode：67111627    硬链接：1
权限：(0755/-rwxr-xr-x)  Uid：(    0/    root)   Gid：(    0/    root)
环境：system_u:object_r:shell_exec_t:s0 
最近访问：2016-11-06 13:06:17.318000042 +0800
最近更改：2016-08-03 00:00:07.000000000 +0800
最近改动：2016-11-03 13:47:45.414998262 +0800
创建时间：-

touch命令：
touch - change file timestamps

touch [OPTION]... FILE...
 -c: 指定的文件路径不存在时不予创建；
 -a: 仅修改access time；
 -m：仅修改modify time；
 -t STAMP
    [[CC]YY]MMDDhhmm[.ss]



实例一：创建不存在的文件

命令：
touch log2012.log log2013.log

输出：
［root@localhost test］# touch log2012.log log2013.log
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log

如果log2014.log不存在，则不创建文件
［root@localhost test］# touch -c log2014.log
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log

实例二：更新log.log的时间和log2012.log时间戳相同

命令：
touch -r log.log log2012.log

输出：
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 16:01 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log
 -rw-r--r-- 1 root root 0 10-28 14:48 log.log
［root@localhost test］# touch -r log.log log2012.log
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log
 -rw-r--r-- 1 root root 0 10-28 14:48 log.log

实例三：设定文件的时间戳

命令：
touch -t 201211142234.50 log.log

输出：
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log
 -rw-r--r-- 1 root root 0 10-28 14:48 log.log
［root@localhost test］# touch -t 201211142234.50 log.log
［root@localhost test］# ll
 -rw-r--r-- 1 root root 0 10-28 14:48 log2012.log
 -rw-r--r-- 1 root root 0 10-28 16:01 log2013.log
 -rw-r--r-- 1 root root 0 2012-11-14 log.log

说明：
 -t time 使用指定的时间值 time 作为指定文件相应时间戳记的新值．此处的 time规定为如下形式的十进制数：
［［CC］YY］MMDDhhmm［.SS］

 这里，CC为年数中的前两位，即”世纪数”；YY为年数的后两位，即某世纪中的年数．如果不给出CC的值，则touch 将把年数CCYY限定1969--2068之内．MM为月数，DD为天将把年数CCYY限定在1969--2068之内．MM为月数，DD为天数，hh 为小时数（几点），mm为分钟数，SS为秒数．此处秒的设定范围是0--61，这样可以处理闰秒．这些数字组成的时间是环境变量TZ指定的时区中的一个时 间．由于系统的限制，早于1970年1月1日的时间是错误的
</code></pre><p>##如何定义一个命令的别名，如何在命令中引用另一个命令的执行结果？</p>
<p>命令别名查看：</p>
<p>[root@centos ~]# alias</p>
<p>alias cp=’cp -i’</p>
<p>alias l.=’ls -d .* –color=auto’</p>
<p>alias ll=’ls -l –color=auto’</p>
<p>alias ls=’ls –color=auto’</p>
<p>alias mv=’mv -i’</p>
<p>alias rm=’rm -i’</p>
<p>创建别名：</p>
<p>[root@centos ~]# alias clear=’cls’</p>
<p>[root@centos ~]# alias</p>
<p>alias clear=’cls’</p>
<p>alias cp=’cp -i’</p>
<p>alias l.=’ls -d .* –color=auto’</p>
<p>alias ll=’ls -l –color=auto’</p>
<p>alias ls=’ls –color=auto’</p>
<p>alias mv=’mv -i’</p>
<p>alias rm=’rm -i’</p>
<p>引用命令的执行结果：</p>
<p> 使用“引用：</p>
<p>[root@centos ~]# echo <code>date</code></p>
<p>Tue Sep 27 06:45:08 CST 2016</p>
<p>[root@centos ~]#</p>
<p>使用$(COMMAND)引用</p>
<p>[root@centos ~]# file $(which –skip-alias ls)</p>
<p>/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.18, stripped</p>
<p>[root@centos ~]#</p>
<p>##显示var目录下所有以l开头，以一个小写字母结尾，且中间至少出现一位数字（可以有其它字符）的文件或目录。</p>
<pre><code>[root@centos7 /]# ls -dl /var/l*[0-9]*[a-z]
drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l42opm
drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l47wsd
-rw-r--r--. 1 root root 0 11月  6 15:38 /var/l9cxz
drwxr-xr-x. 2 root root 6 11月  6 15:35 /var/ls4gs
drwxr-xr-x. 2 root root 6 11月  6 15:34 /var/lw56tcp
-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw89cxz
-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw99cxz


[root@centos7 /]# ls -dl /var/l*[[:digit:]]*[[:alpha:]]
drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l42opm
drwxr-xr-x. 2 root root 6 11月  6 14:58 /var/l47wsd
-rw-r--r--. 1 root root 0 11月  6 15:38 /var/l9cxz
drwxr-xr-x. 2 root root 6 11月  6 15:35 /var/ls4gs
drwxr-xr-x. 2 root root 6 11月  6 15:34 /var/lw56tcp
-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw89cxz
-rw-r--r--. 1 root root 0 11月  6 15:37 /var/lw99cxz
</code></pre><p>##显示/etc目录下，以任意一个数字开头，且以非数字结尾的文件或目录。</p>
<pre><code>[root@centos7 /]# ls -dl /etc/[[:digit:]]*[[:alpha:]]
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad
-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg
-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf


[root@centos7 /]# ls -dl /etc/[0-9]*[^0-9]
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad
-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg
-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf
</code></pre><p>##显示/etc目录下，以非字母开头，后面跟了一个字母以及其它任意长度任意字符的文件或目录。</p>
<pre><code>[root@centos7 /]# ls -dl /etc/[^a-z]*[a-z]
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/12sad
-rw-r--r--. 1 root root 29 11月  6 15:45 /etc/12sd
drwxr-xr-x. 2 root root  6 11月  6 15:43 /etc/23gfhg
-rw-r--r--. 1 root root 35 11月  6 15:46 /etc/4543sdcsf
</code></pre><p>##在/tmp目录下创建以tfile开头，后跟当前日期和时间的文件，文件名形如：tfile-2016-05-27-09-32-22。<br>    touch /tmp/tfile-$(date +%F-%H-%M-%S)</p>
<p>##复制/etc目录下所有以p开头，以非数字结尾的文件或目录到/tmp/mytest1目录中。</p>
<pre><code>mkdir /tmp/mytest1 &amp;&amp; cp -r /etc/p*[^0-9] /tmp/mytest1/
</code></pre><p>##复制/etc目录下所有以.d结尾的文件或目录至/tmp/mytest2目录中。</p>
<pre><code>mkdir /tmp/mytest2 &amp;&amp; cp -r /etc/*.d /tmp/mytest2/
</code></pre><p>##复制/etc/目录下所有以l或m或n开头，以.conf结尾的文件至/tmp/mytest3目录中。</p>
<pre><code>mkdir -p /tmp/mytest3 &amp;&amp; cp  /etc/[lmn]*.conf /tmp/mytest3/
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-第八周作业" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/第八周作业/" class="article-date">
      <time datetime="2018-06-04T08:29:45.305Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#1、请描述网桥、集线器、二层交换机、三层交换机、路由器的功能、使用场景与区别。</p>
<p>集线器是属于物理层的设备，可以理解为一根网线中间串接出了多个接口，这么多接口共享这一根网线的带宽，<br>因此这些接口上的设备在使得网络时就会出现冲突，或者‘道路’挤占的情况。（所有的设备在一个广播域，冲突域中），集线器现在很少使用了。</p>
<p>交换机、网桥都是数据链路层的设备，网桥的出现就是为了解决集线器多个接口共处于一个冲突域的问题，网桥具有2个接口，<br>且每个接口设备发送接收数据都是独立的互不影响（每个接口是一个冲突域）。现在这种设备不再使用。<br>交换机可以理解为是一个多接口的网桥，当然具备了网桥分割冲突的功能（每个接口是一个冲突域）。<br>但是交换机（2层交换机）所有接口都在一个广播域中。</p>
<p>路由器属于网络层设备，路由器不但可以隔离冲突域，同时也可以隔离广播。每个接口是一个冲突域，一个广播域。<br>路由器对于广播数据包不做转发。路由器根据3层地址（现用的IP地址）进行转发数据包到相应的接口。实现不同的IP网段互相通讯。</p>
<p>二层交换机属数据链路层设备，可以识别数据包中的MAC地址信息，根据MAC地址进行转发，并将这些MAC地址与对应的端口记录在自己内部的一个地址表中。</p>
<p>三层交换机就是具有部分路由器功能的交换机，三层交换机的最重要目的是加快大型局域网内部的数据交换，<br>所具有的路由功能也是为这目的服务的，能够做到一次路由，多次转发。对于数据包转发等规律性的过程由硬件高速实现，<br>而像路由信息更新、路由表维护、路由计算、路由确定等功能，由软件实现。三层交换技术就是二层交换技术+三层转发技术。<br>传统交换技术是在OSI网络标准模型第二层–数据链路层进行操作的，<br>而三层交换技术是在网络模型中的第三层实现了数据包的高速转发，既可实现网络路由功能，又可根据不同网络状况做到最优网络性能。</p>
<p>#2、IP地址的分类有哪些？子网掩码的表示形式及其作用</p>
<p>##IP地址分类</p>
<p>一般分类是指ipv4,<br>IP地址有5类，A类到E类，各用在不同类型的网络中。地址分类反映了网络的大小以及数据包是单播还是组播的。</p>
<p>A类到C类地址用于单点编址方法，但每一类代表着不同的网络大小。<br>A类地址（1.0.0.0-126.255.255.255）用于最大型的网络，该网络的节点数可达16,777,216个。</p>
<p>B类地址（128.0.0.0-191.255.255.25 5）用于中型网络，节点数可达65,536个。</p>
<p>C类地址（192.0.0.0-223.255.255.255）用于256个节点以下的小型网络的单点网络通信。</p>
<p>D类地址并不反映网络的大小，只是用于组播，用来指定所分配的接收组播的节点组，这个节点组由组播订阅成员组成。<br>D类地址的范围为224.0.0.0-239.255.255.255。</p>
<p>E类（240.0.0.0-255.255.255.254）地址用于试验。</p>
<p><img src="http://i.imgur.com/CeQISYa.jpg" alt=""></p>
<p>##作用</p>
<p>子网掩码是一个32位地址，是与IP地址结合使用的一种技术。</p>
<p>它的主要作用有两个，<br>一是用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。<br>二是用于将一个大的IP网络划分为若干小的子网络。</p>
<p>使用子网是为了减少IP的浪费。因为随着互联网的发展，越来越多的网络产生，有的网络多则几百台，<br>有的只有区区几台，这样就浪费了很多IP地址，所以要划分子网。使用子网可以提高网络应用的效率。</p>
<p>通过IP 地址的二进制与子网掩码的二进制进行与运算，确定某个设备的网络地址和主机号，<br>也就是说通过子网掩码分辨一个网络的网络部分和主机部分。</p>
<p>子网掩码一旦设置，网络地址和主机地址就固定了。子网一个最显著的特征就是具有子网掩码。<br>与IP地址相同，子网掩码的长度也是32位，也可以使用十进制的形式。<br>例如，为二进制形式的子网掩码：1111 1111.1111 1111.1111 1111.0000 0000，采用十进制的形式为：255.255.255.0。</p>
<p>通过计算机的子网掩码判断两台计算机是否属于同一网段的方法是，将计算机十进制的IP地址和子网掩码转换为二进制的形式，<br>然后进行二进制“与”(AND)计算（全1则得1，不全1则得0），如果得出的结果是相同的，那么这两台计算机就属于同一网段。</p>
<p>##子网掩码表现形式</p>
<p>IP标识法<br>一个完整IP描述包含IP 地址和子网掩码</p>
<p>具体标识有两种</p>
<p>点分十进制<br>192.168.0.n  255.255.255.0（点分十进制） </p>
<p>这种暂时成为简写吧，懒人写法<br>192.168.0.n/24 （/24表示子网掩码二进制标识法中前面24位1）</p>
<p>#3、计算机网络的分成模型有哪些（OSI模型和TCP/IP模型），每一层的功能及涉及到的物理设备有哪些。</p>
<p>##OSI模型</p>
<p><img src="http://i.imgur.com/YO5Nz0D.gif" alt=""></p>
<p>##常见对应各层的设备<br>   物理层：网卡，网线，集线器，中继器，调制解调器</p>
<p>   数据链路层：网桥，交换机</p>
<p>   网络层：路由器</p>
<p>   网关工作在第四层传输层及其以上</p>
<p>###物理层<br> 在OSI参考模型中，物理层（Physical Layer）是参考模型的最低层，也是OSI模型的第一层。<br> 物理层的主要功能是：利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。<br> 物理层的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。</p>
<p>###数据链路层<br>数据链路层（Data Link Layer）是OSI模型的第二层，负责建立和管理节点间的链路。该层的主要功能是：通过各种控制协议，将有差错的物理信道变为无差错的、能可靠传输数据帧的数据链路。<br>在计算机网络中由于各种干扰的存在，物理链路是不可靠的。因此，这一层的主要功能是在物理层提供的比特流的基础上，通过差错控制、流量控制方法，使有差错的物理线路变为无差错的数据链路，即提供可靠的通过物理介质传输数据的方法。<br>该层通常又被分为介质访问控制（MAC）和逻辑链路控制（LLC）两个子层。<br>MAC子层的主要任务是解决共享型网络中多用户对信道竞争的问题，完成网络介质的访问控制；<br>LLC子层的主要任务是建立和维护网络连接，执行差错校验、流量控制和链路控制。<br>数据链路层的具体工作是接收来自物理层的位流形式的数据，并封装成帧，传送到上一层；同样，也将来自上层的数据帧，拆装为位流形式的数据转发到物理层；并且，还负责处理接收端发回的确认帧的信息，以便提供可靠的数据传输。</p>
<p>###网络层<br>网络层（Network Layer）是OSI模型的第三层，它是OSI参考模型中最复杂的一层，也是通信子网的最高一层。它在下两层的基础上向资源子网提供服务。其主要任务是：通过路由选择算法，为报文或分组通过通信子网选择最适当的路径。该层控制数据链路层与传输层之间的信息转发，建立、维持和终止网络的连接。具体地说，数据链路层的数据在这一层被转换为数据包，然后通过路径选择、分段组合、顺序、进/出路由等控制，将信息从一个网络设备传送到另一个网络设备。<br>一般地，数据链路层是解决同一网络内节点之间的通信，而网络层主要解决不同子网间的通信。例如在广域网之间通信时，必然会遇到路由（即两节点间可能有多条路径）选择问题。<br>在实现网络层功能时，需要解决的主要问题如下：<br> 寻址：数据链路层中使用的物理地址（如MAC地址）仅解决网络内部的寻址问题。在不同子网之间通信时，为了识别和找到网络中的设备，每一子网中的设备都会被分配一个唯一的地址。由于各子网使用的物理技术可能不同，因此这个地址应当是逻辑地址（如IP地址）。<br> 交换：规定不同的信息交换方式。常见的交换技术有：线路交换技术和存储转发技术，后者又包括报文交换技术和分组交换技术。<br> 路由算法：当源节点和目的节点之间存在多条路径时，本层可以根据路由算法，通过网络为数据分组选择最佳路径，并将信息从最合适的路径由发送端传送到接收端。<br> 连接服务：与数据链路层流量控制不同的是，前者控制的是网络相邻节点间的流量，后者控制的是从源节点到目的节点间的流量。其目的在于防止阻塞，并进行差错检测。</p>
<p>###传输层<br>OSI下3层的主要任务是数据通信，上3层的任务是数据处理。而传输层（Transport Layer）是OSI模型的第4层。因此该层是通信子网和资源子网的接口和桥梁，起到承上启下的作用。<br>该层的主要任务是：向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输。传输层的作用是向高层屏蔽下层数据通信的细节，即向用户透明地传送报文。该层常见的协议：TCP/IP中的TCP协议、Novell网络中的SPX协议和微软的NetBIOS/NetBEUI协议。<br>传输层提供会话层和网络层之间的传输服务，这种服务从会话层获得数据，并在必要时，对数据进行分割。然后，传输层将数据传递到网络层，并确保数据能正确无误地传送到网络层。因此，传输层负责提供两节点之间数据的可靠传送，当两节点的联系确定之后，传输层则负责监督工作。综上，传输层的主要功能如下：<br>传输连接管理：提供建立、维护和拆除传输连接的功能。传输层在网络层的基础上为高层提供“面向连接”和“面向无接连”的两种服务。<br>处理传输差错：提供可靠的“面向连接”和不太可靠的“面向无连接”的数据传输服务、差错控制和流量控制。在提供“面向连接”服务时，通过这一层传输的数据将由目标设备确认，如果在指定的时间内未收到确认信息，数据将被重发。<br>监控服务质量。</p>
<p>###会话层<br>会话层（Session Layer）是OSI模型的第5层，是用户应用程序和网络之间的接口，主要任务是：向两个实体的表示层提供建立和使用连接的方法。将不同实体之间的表示层的连接称为会话。因此会话层的任务就是组织和协调两个会话进程之间的通信，并对数据交换进行管理。<br>用户可以按照半双工、单工和全双工的方式建立会话。当建立会话时，用户必须提供他们想要连接的远程地址。而这些地址与MAC（介质访问控制子层）地址或网络层的逻辑地址不同，它们是为用户专门设计的，更便于用户记忆。域名（DN）就是一种网络上使用的远程地址例如：<a href="http://www.163.com就是一个域名。会话层的具体功能如下：" target="_blank" rel="noopener">www.163.com就是一个域名。会话层的具体功能如下：</a><br>会话管理：允许用户在两个实体设备之间建立、维持和终止会话，并支持它们之间的数据交换。例如提供单方向会话或双向同时会话，并管理会话中的发送顺序，以及会话所占用时间的长短。<br> 会话流量控制：提供会话流量控制和交叉会话功能。<br>寻址：使用远程地址建立会话连接。l<br>出错控制：从逻辑上讲会话层主要负责数据交换的建立、保持和终止，但实际的工作却是接收来自传输层的数据，并负责纠正错误。会话控制和远程过程调用均属于这一层的功能。但应注意，此层检查的错误不是通信介质的错误，而是磁盘空间、打印机缺纸等类型的高级错误。</p>
<p>###表示层<br>表示层（Presentation Layer）是OSI模型的第六层，它对来自应用层的命令和数据进行解释，对各种语法赋予相应的含义，并按照一定的格式传送给会话层。其主要功能是“处理用户信息的表示问题，如编码、数据格式转换和加密解密”等。表示层的具体功能如下：<br>数据格式处理：协商和建立数据交换的格式，解决各应用程序之间在数据格式表示上的差异。<br>数据的编码：处理字符集和数字的转换。例如由于用户程序中的数据类型（整型或实型、有符号或无符号等）、用户标识等都可以有不同的表示方式，因此，在设备之间需要具有在不同字符集或格式之间转换的功能。<br>压缩和解压缩：为了减少数据的传输量，这一层还负责数据的压缩与恢复。<br>数据的加密和解密：可以提高网络的安全性。</p>
<p>###应用层<br>应用层（Application Layer）是OSI参考模型的最高层，它是计算机用户，以及各种应用程序和网络之间的接口，其功能是直接向用户提供服务，完成用户希望在网络上完成的各种工作。它在其他6层工作的基础上，负责完成网络中应用程序与网络操作系统之间的联系，建立与结束使用者之间的联系，并完成网络用户提出的各种网络服务及应用所需的监督、管理和服务等各种协议。此外，该层还负责协调各个应用程序间的工作。<br>应用层为用户提供的服务和协议有：文件服务、目录服务、文件传输服务（FTP）、远程登录服务（Telnet）、电子邮件服务（E-mail）、打印服务、安全服务、网络管理服务、数据库服务等。上述的各种网络服务由该层的不同应用协议和程序完成，不同的网络操作系统之间在功能、界面、实现技术、对硬件的支持、安全可靠性以及具有的各种应用程序接口等各个方面的差异是很大的。应用层的主要功能如下：<br>用户接口：应用层是用户与网络，以及应用程序与网络间的直接接口，使得用户能够与网络进行交互式联系。<br>实现各种服务：该层具有的各种应用程序可以完成和实现用户请求的各种服务。</p>
<p>###OSI7层模型的小结<br>由于OSI是一个理想的模型，因此一般网络系统只涉及其中的几层，很少有系统能够具有所有的7层，并完全遵循它的规定。<br>在7层模型中，每一层都提供一个特殊的网络功能。从网络功能的角度观察：下面4层（物理层、数据链路层、网络层和传输层）主要提供数据传输和交换功能，即以节点到节点之间的通信为主；第4层作为上下两部分的桥梁，是整个网络体系结构中最关键的部分；而上3层（会话层、表示层和应用层）则以提供用户与应用程序之间的信息和数据处理功能为主。简言之，下4层主要完成通信子网的功能，上3层主要完成资源子网的功能。</p>
<p>##TCP/IP模型</p>
<p><img src="http://i.imgur.com/EoJ2Exf.jpg" alt=""></p>
<p>###TCP/IP模型包括4层：</p>
<p>　　网络接口层–对应OSI参考模型的物理层和数据链路层；</p>
<p>　　网络层–对应OSI参考模型的网络层；</p>
<p>　　运输层–对应OSI参考模型的运输层；</p>
<p>　　应用层–对应OSI参考模型的5、6、7层。</p>
<p>###TCP/IP协议的主要特点如下：</p>
<p><strong>高可靠性</strong></p>
<p>TCP/IP采用重新确认的方法保证数据的可靠传输，并采用“窗口”流量控制机制使可靠性得到进一步保证。</p>
<p><strong>安全性</strong></p>
<p>为建立TCP连接，在连接的每一端都必须与该连接的安全性控制达成一致。IP在它的控制分组头中有若干字段允许有选择地对传输的信息实施保护。</p>
<p><strong>灵活性</strong></p>
<p>TCP/IP要求下层支持该协议，而对上层应用协议不作特殊要求。因此，TCP/IP的使用不受传输介质和网络应用软件的限制。</p>
<p><strong>总结</strong></p>
<p>从网络通信的观点来看，Internet是一个由TCP/IP把各个国家、机构、部门的内部网络连接起来的庞大的数据通信网； 从信息资源的角度来看，Internet是一个集各个领域、部门内各种信息资源，以共享为目的的信息资源网；从技术的角度来看，Internet是一个“不同网络互连的网络（网际网）”,是由许多网络（包括局域网、城域网和广域网）互连形成的。</p>
<p>#4、如何将Linux主机接入到TCP/IP网络，请描述详细的步骤。（手动指定的方式）</p>
<p><strong>我就不瞎BB了，直接上操作步骤，分centos和ubuntu两种操作系统，这是一道送分题。</strong></p>
<p>总体来说有以下几步：</p>
<p>1、配置IP地址和掩码</p>
<p>2、配置网关</p>
<p>3、配置dns的IP地址</p>
<p>###CentOS6</p>
<pre><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0

TYPE=Ethernet        #90%以上都是以太网啦
BOOTPROTO=none       #如果是自动获取，此处是DHCP，手动指定就是none
IPADDR=192.168.0.243 #修改此处
PREFIX=24            #修改此处
GATEWAY=192.168.0.1  #修改此处
DNS1=202.103.44.150  #修改此处
DNS2=202.103.24.68   #修改此处
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
NAME=eth0
UUID=b33d04cb-b415-4874-b5a2-e201bb20b46e   #网卡的唯一标识
ONBOOT=yes          #是否开机启动

最后：wq  保存退出，  再执行 service network restart  #使其生效
</code></pre><p>###Ubuntu 14.04</p>
<pre><code>root@ubuntu:~# vim /etc/network/interfaces   #配置IP、掩码、网关

# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet static
address 192.168.0.245
netmask 255.255.255.0
gateway 192.168.0.1


root@ubuntu:~# vim /etc/resolvconf/resolv.conf.d/base   #配置DNS

nameserver 202.103.24.68
nameserver 202.103.44.150

最后：wq  保存退出

root@ubuntu:~# service networking restart   #使其生效
</code></pre><p>#5、为Linux主机配置网络信息的方式有哪些，请描述各个过程。</p>
<p>##方法一：使用ifconfig或者ip 临时添加网络信息，并使用route命令添加默认网关</p>
<pre><code>**注意：所有操作均使用root用户**
修改IP：
ifconfig eth0 192.168.0.66
则直接将第一张网卡的IP修改成192.168.0.66

增加IP：
ifconfig eth0 add 192.168.2.77 #增加一个IP
ifconfig eth0:0 broadcast 192.168.2.255 ##修改刚刚增加IP的广播地址

再增加一个IP：
ifconfig eth0:0 add 10.10.44.145
ifconfig eth0:0:1 broadcast 10.10.44.255 #修改刚刚增加IP的广播地址


上述增加完，立刻生效，但是机器重新启动后，就无效了。


route add -net 192.168.0.0/24 gw 192.168.0.1 dev eth1 #增加网关

[root@centos ~]# vim /etc/resolv.conf  #增加dns
[root@centos ~]# cat /etc/resolv.conf 
#Generated by NetworkManager
nameserver 202.103.44.150
nameserver 202.103.24.68
</code></pre><p>不过这种方法是临时的，服务器一重启就失效了</p>
<p>##方法二：使用修改/etc/sysconfig/network-scripts/ifcfg-IF_NAME文件</p>
<pre><code>[root@centos ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth0
ifcfg-IFACE 配置文件参数：
DEVICE：此配置文件对应的设备的名称；
ONBOOT：在系统引导过程中，是否激活此接口；
UUID：此设备的惟一标识；
IPV6INIT：是否初始化 IPv6；
BOOTPROTO：激活此接口时使用什么协议来配置接口属性，常用的有 dhcp、bootp、
static、none；
TYPE：接口类型，常见的有 Ethernet, Bridge；
DNS1：第一 DNS 服务器指向；
DNS2：备用 DNS 服务器指向；
DOMAIN：DNS 搜索域；
IPADDR： IP 地址；
NETMASK：子网掩码；CentOS 7 支持使用 PREFIX 以长度方式指明子网掩码；
GATEWAY：默认网关；
USERCTL：是否允许普通用户控制此设备；
PEERDNS：如果 BOOTPROTO 的值为“dhcp”，是否允许 dhcp server 分配的 dns 服务器指
向覆盖本地手动指定的 DNS 服务器指向；默认为允许；
HWADDR：设备的 MAC 地址；     

[root@centos ~]# cat /etc/resolv.conf #示例
# Generated by NetworkManager
nameserver 202.103.44.150
nameserver 202.103.24.68
[root@centos ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0 
TYPE=Ethernet
BOOTPROTO=none
IPADDR=192.168.0.243
PREFIX=24
GATEWAY=192.168.0.1
DNS1=202.103.44.150
DNS2=202.103.24.68
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
NAME=eth0
UUID=b33d04cb-b415-4874-b5a2-e201bb20b46e
ONBOOT=yes
</code></pre><p>一般最常用的就是这两种了。</p>
<p>#6、写一个脚本，使用ping命令探测172.16.250.1-172.16.250.254之间的所有主机的在线状态；在线的主机使用绿色显示；不在线的主使用红色显示；</p>
<p><strong>这道题一开始我很茫然，无从下手，看了同学们的作业参考，都是用for循环，记得马哥说for循环大了会占用内存空间，例如ping B类局域网地址的话，就想着不用for，用while或者until实现可否，折腾了一天多的时间（处女座作的），精益求精，经过N次死循环及失败，于是有了下面的脚本:</strong></p>
<pre><code>[root@centos Jerry_go]# wc -l ping4.sh 
14 ping4.sh
[root@centos Jerry_go]# cat ping4.sh 
#!/bin/sh
#ping IP
#Author Jerry

ip=0
while [ $ip -lt 254 ];do
    ip=$[$ip+1] 
    ping -c 2 192.168.0.$ip &gt;&gt; /dev/null
    if [ $? == 0 ];then
        echo -e &quot;\e[1;32m 192.168.0.$ip ok \e[0m&quot; &amp;&amp; continue 
    else
        echo -e &quot;\e[1;31m 192.168.0.$ip no response \e[0m&quot; &amp;&amp; continue 
    fi
done
[root@centos Jerry_go]# 
</code></pre><p>###执行效果：</p>
<p><img src="http://i.imgur.com/SEJr8bx.png" alt=""></p>
<p><strong>用for实现</strong></p>
<pre><code>[root@centos Jerry_go]# cat ping.sh 
#!/bin/bash
#ping ip
#Author Jerry

for ((i=1;i&lt;255;i++));do
    ping -w 1 -c 1 172.16.250.$i &amp;&gt;/dev/null
    if [ $? -eq 0 ];then
    echo -e &quot;\e[1;32m 172.16.250.$i ok \e[0m&quot;
    else
        echo -e &quot;\e[1;31m 172.16.250.$i no response \e[0m&quot;
    fi
done
[root@centos Jerry_go]# 
</code></pre><p>经测试效果一样</p>
<p>#7、详细描述每个网络接口的配置文件中各个参数的含义和其所对应的值；</p>
<pre><code>ifcfg-IFACE配置文件参数：
    DEVICE：此配置文件对应的设备的名称；
    ONBOOT：在系统引导过程中，是否激活此接口；
    UUID：此设备的惟一标识；
    IPV6INIT：是否初始化IPv6；
    BOOTPROTO：激活此接口时使用什么协议来配置接口属性，常用的有dhcp、bootp、static、none；
    TYPE：接口类型，常见的有Ethernet, Bridge；
    DNS1：第一DNS服务器指向；
    DNS2：备用DNS服务器指向；
    DOMAIN：DNS搜索域；
    IPADDR： IP地址；
    NETMASK：子网掩码；CentOS 7支持使用PREFIX以长度方式指明子网掩码；
    GATEWAY：默认网关；
    USERCTL：是否允许普通用户控制此设备；
    PEERDNS：如果BOOTPROTO的值为“dhcp”，是否允许dhcp server分配的dns服务器指向覆盖本地手动指定的DNS服务器指向；默认为允许；
    HWADDR：设备的MAC地址；

    NM_CONTROLLED：是否使用NetworkManager服务来控制接口；
</code></pre><p>#8、如何给网络接口配置多个地址，有哪些方式？</p>
<p>这个也分快捷跟永久两种方式。主要用到ifconfig</p>
<p>快捷方式呢，即生效，如下：</p>
<pre><code>[root@centos ~]# ifconfig eth0:0 192.168.3.243 netmask 255.255.255.0 up 
[root@centos ~]# ifconfig eth0:1 192.168.3.2 netmask 255.255.255.0 up 
[root@centos ~]# ip addr show  #查看网卡IP地址方法一
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 00:0c:29:04:bd:c1 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.243/24 brd 192.168.0.255 scope global eth0
    inet 192.168.3.243/24 brd 192.168.3.255 scope global eth0:0
    inet 192.168.3.2/24 brd 192.168.3.255 scope global secondary eth0:1
[root@centos ~]# ifconfig #查看网卡IP地址方法二
eth0      Link encap:Ethernet  HWaddr 00:0C:29:04:BD:C1  
          inet addr:192.168.0.243  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:8122248 errors:0 dropped:0 overruns:0 frame:0
          TX packets:51751 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:526472342 (502.0 MiB)  TX bytes:3884350 (3.7 MiB)

eth0:0    Link encap:Ethernet  HWaddr 00:0C:29:04:BD:C1  
          inet addr:192.168.3.243  Bcast:192.168.3.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth0:1    Link encap:Ethernet  HWaddr 00:0C:29:04:BD:C1  
          inet addr:192.168.3.2  Bcast:192.168.3.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:290 errors:0 dropped:0 overruns:0 frame:0
          TX packets:290 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:26660 (26.0 KiB)  TX bytes:26660 (26.0 KiB)

[root@centos ~]# 
</code></pre><p>永久方式呢，稍微麻烦点，不过永久嘛，一劳永逸，值得</p>
<p>是仿照/etc/sysconfig/network-scripts/ifcfg-eth0增加一文件根据网络虚拟接口的名字进行命名<br>例如ifcfg-eth0:0或者ifcfg-eth0:1等等 </p>
<p><strong>开始飙车了啊，系好安全带！</strong></p>
<p><img src="http://i.imgur.com/XtjrnlJ.gif" alt=""></p>
<p><strong>[root@centos ~]# cd /etc/sysconfig/network-scripts/</strong></p>
<p><strong>[root@centos network-scripts]# cp ifcfg-eth0 ifcfg-eth0:0</strong></p>
<p><img src="http://i.imgur.com/fmsMaXU.png" alt=""></p>
<p><strong>[root@centos network-scripts]# vim ifcfg-eth0:0</strong></p>
<p><img src="http://i.imgur.com/Sppht0x.png" alt=""></p>
<p>保存退出，重启系统，再看。应该是没问题的啦。</p>
<p>#9、常用的网络管理类工具有哪些，并用示例形式描述他们的使用方法。</p>
<p>##ifconfig命令:接口及地址查看和管理</p>
<p>可以使用ifconfig命令配置网卡属性,设置后立即生效，重启后失效。</p>
<p>显示活动接口信息 ifconfig eth0</p>
<p>显示所有接口信息 ifconfig -a</p>
<p>启用或禁用给定接口 ifconfig eth0 up/down</p>
<p>设置IP地址及掩码 ifconfig eth0 172.168.1.100/24</p>
<p>##route命令：路由查看及管理</p>
<p>添加主机路由 route add -host 192.168.1.3 gw 172.16.0.1 dev eth0</p>
<p>添加网络路由 route add -net 192.168.0.0/24 gw 172.16.0.1 dev eth0</p>
<p>添加默认路由 route add default gw 172.16.0.1</p>
<p>删除主机路由 route del -host 192.168.1.3</p>
<p>删除网络路由 route del -net 192.168.0.0 netmask 255.255.255.0</p>
<p>##netstat命令:打印网络连接，路由表，接口统计信息</p>
<p>以数字形式显示TCP协议相关所有状态 netstat -tan</p>
<p>以数字形式显示UDP协议相关所有状态 netstat -uan</p>
<p>以数字形式显示TCP协议相关的监听状态 netstat -tnl</p>
<p>以数字形式显示UDP协议相关的监听状态 netstat -unl</p>
<p>显示内核路由表 netstat -r</p>
<p>显示所有接口统计数据 netstat -i</p>
<p>显示指定接口信息 netstat -I eth0</p>
<p>##dig命令:解析DNS地址工具</p>
<p>正解DNS 域名至IP地址 dig -t A <a href="http://www.magedu.com" target="_blank" rel="noopener">www.magedu.com</a></p>
<p>反解DNS IP地址至域名 dig -x 127.0.0.1</p>
<p>##ip命令:显示/操纵路由，设备，策略路由和隧道</p>
<p>禁用接口 ip link set dev eth0 down</p>
<p>启用接口 ip link set dev eth0 up</p>
<p>显示接口信息 ip link show dev eth0</p>
<p>显示主地址 ip addr show dev eth0 primary</p>
<p>显示次地址 ip addr show dev eth0 secondary</p>
<p>添加IP地址 ip addr add 172.16.100.13/16 dev eth0</p>
<p>添加网卡别名 ip addr add 172.16.100.13/16 dev eth0 label ‘eth:0’</p>
<p>删除别名 ip addr flush dev eth0 label ‘eth0:0’</p>
<p>添加主路由 ip route add 192.168.1.3 via 172.16.0.1 dev eth0</p>
<p>添加网络路由 ip route add 192.168.0.0/16 via 172.16.0.1 dev eth0</p>
<p>添加默认路由 ip route add default via 127.16.0.1</p>
<p>删除路由 ip route del 192.168.1.3</p>
<p>查看路由 ip route show</p>
<p>清空路由 ip route flush dev eth0</p>
<p>##ss命令:显示网络连接工具<br>参数用法同netstat</p>
<p>指定显示某种状态ss -t state established ‘( dport = :ssh or sport = :ssh )’</p>
<p>#10、Linux系统软件包管理方法（安装、升级、卸载等操作）有哪些，以及如何管理的。</p>
<p>Linux的软件系统包管理那就好玩了，根据这多年的使用经验，主要分为yum和apt两大系列，</p>
<p>Debian 及其衍生产品如：Ubuntu、Linux Mint 和 Raspbian 的包格式为.deb文件，APT 是最常见包操作命令，可：搜索库、安装包及其依赖和管理升级,而要直接安装现成.deb包时需要使用dpkg命令。</p>
<p>APT还自吹有超级牛力，有图有真相:</p>
<p><img src="http://i.imgur.com/YTRW8SC.png" alt=""></p>
<p>CentOS、Fedora 及 Red Hat 系列 Linux 使用RPM包文件，并使用yum命令管理包文件及与软件库交互。在最新的 Fedora 版本中，yum命令已被dnf取代进行包管理,而要直接安装现成.rpm包时需要使用rpm命令。</p>
<p>好嘛，都是利器啊。下边且看我分解。</p>
<p><img src="http://i.imgur.com/8bK5w7n.gif" alt=""></p>
<p>##RPM 包的安装 / 升级 / 查询 / 卸载<br>一个 RPM 包包含了已压缩的软件文件集以及该软件的内容信息（在头文件中保存），通常表现为以 .rpm 扩展名结尾的文件，例如 package.rpm 。对其操作，需要使用 rpm 命令。下面介绍 rpm 工具的参数和使用方法。</p>
<p>###RPM 命令常用参数</p>
<p>RPM 的常规使用方法为 rpm -参数 package.rpm  ( 更多信息，请查阅帮助 $man rpm)：</p>
<p>-q 在系统中查询软件或查询指定 rpm 包的内容信息</p>
<p>-i 在系统中安装软件</p>
<p>-U 在系统中升级软件</p>
<p>-e 在系统中卸载软件</p>
<p>-h 用 #(hash) 符显示 rpm 安装过程</p>
<p>-v 详述安装过程</p>
<p>-p 表明对 RPM 包进行查询，通常和其它参数同时使用，如：<br>-qlp 查询某个 RPM 包中的所有文件列表<br>-qip 查询某个 RPM 包的内容信息</p>
<p>###RPM 命令参数使用方法<br>以上参数有些需要组合使用，比如说 rpm -h package.rpm 是没有意义的，但 rpm -ih package.rpm 即表示安装 package 并用 # 符显示安装进度。</p>
<p><strong>安装 RPM 包</strong></p>
<p>rpm -ivh package.rpm</p>
<p><strong>升级 RPM 包命令</strong></p>
<p>rpm -Uvh package.rpm</p>
<p><strong>卸载 RPM 包命令</strong></p>
<p>rpm -ev package</p>
<p><strong>查询 RPM 包中包含的文件列表命令</strong></p>
<p>rpm -qlp package</p>
<p><strong>查询 RPM 包中包含的文件列表命令</strong></p>
<p>rpm -qlp package</p>
<p><strong>查询 RPM 包中包含的内容信息命令</strong></p>
<p>rpm -qip package</p>
<p><strong>查询系统中所有已安装 RPM 包</strong></p>
<p>rpm -qa</p>
<p>##DEB 包的安装 / 升级 / 查询 / 卸载<br>一个 DEB 包包含了已压缩的软件文件集以及该软件的内容信息（在头文件中保存），通常表现为以 .deb 扩展名结尾的文件，例如 package.deb 。对其操作，需要使用 dpkg 命令。下面介绍 dpkg 工具的参数和使用方法，并以 IBM Lotus Notes 在 UBUNTU 904 安装为例做具体说明。</p>
<p>###DPKG 命令常用参数</p>
<p>DPKG 的常规使用方法为 dpkg -参数 Package(.rpm),( 更多信息，请查阅帮助 $man rpm)</p>
<p>-l 在系统中查询软件内容信息</p>
<p>–info 在系统中查询软件或查询指定 rpm 包的内容信息</p>
<p>-i 在系统中安装 / 升级软件</p>
<p>-r 在系统中卸载软件 , 不删除配置文件</p>
<p>-P 在系统中卸载软件以及其配置文件</p>
<p>###DPKG 命令参数使用方法</p>
<p><strong>安装 DEB 包命令</strong></p>
<p>dpkg -i package.deb</p>
<p><strong>升级 DEB 包命令</strong></p>
<p>dpkg -i package.deb ( 和安装命令相同）</p>
<p><strong>卸载 DEB 包命令</strong></p>
<p>dpkg -r package.deb # 不卸载配置文件或 </p>
<p>dpkg -P package.deb # 卸载配置文件</p>
<p><strong>查询 DEB 包中包含的文件列表命令</strong></p>
<p>dpkg-deb -c package.deb</p>
<p><strong>查询 DEB 包中包含的内容信息命令</strong></p>
<p>dpkg –info package.deb</p>
<p><strong>查询系统中所有已安装 DEB 包</strong></p>
<p>dpkg -l package</p>
<p>##YUM/APT</p>
<p>大多数 Linux 都使用本地数据库来存储远程可用的包仓库列表，所以在安装或升级包之前最好更新一下这个数据库。</p>
<p><strong>Debian/Ubuntu</strong></p>
<p>sudo apt-get update</p>
<p><strong>CentOS</strong></p>
<p>yum check-update</p>
<p><strong>Fedora</strong></p>
<p>dnf check-update</p>
<p><strong>升级已安装的包</strong></p>
<p><strong>Debian/Ubuntu</strong>    </p>
<p>sudo apt-get upgrade    #仅升级已安装的软件包</p>
<p>sudo apt-get dist-upgrade    #可添加或删除程序包，以满足新的依赖。</p>
<p><strong>CentOS</strong>    </p>
<p>sudo yum update     </p>
<p><strong>Fedora</strong>    </p>
<p>sudo dnf upgrade</p>
<p><strong>查找/搜索软件包</strong></p>
<p><strong>Debian/Ubuntu</strong><br>apt-cache search  #搜索内容     </p>
<p><strong>CentOS</strong><br>yum search     #搜索内容<br>yum search all #搜索内容    搜索所有内容，包括包描述。</p>
<p><strong>Fedora</strong><br>dnf search     #搜索内容<br>dnf search all #搜索内容    搜索所有内容，包括包描述。</p>
<p><strong>查看某个软件包信息</strong></p>
<p><strong>Debian/Ubuntu</strong>    </p>
<p>apt-cache show 包名    #显示有关软件包的本地缓存信息</p>
<p>dpkg -s 包名         #显示包的当前安装状态</p>
<p><strong>CentOS</strong>    </p>
<p>yum info 包名     </p>
<p>yum deplist 包名    #列出包的以来</p>
<p><strong>Fedora</strong><br>dnf info 包名<br>dnf repoquery –requires 包名  #列出包的以来</p>
<p><strong>从软件仓库安装包</strong></p>
<p>一旦我们知道某个软件包的名称之后，便可以使用如下命令从软件仓库安装包。</p>
<p><strong>Debian/Ubuntu</strong></p>
<p>sudo apt-get install 包名<br>sudo apt-get install 包1 包2 …       #安装所有列出的包<br>sudo apt-get install -y 包名       #无需提示直接安装</p>
<p><strong>CentOS</strong><br>sudo yum install 包名<br>sudo yum install 包1 包2 …         #安装所有列出的包<br>sudo yum install -y 包名               #无需提示直接安装</p>
<p><strong>Fedora</strong><br>sudo dnf install 包名<br>sudo dnf install 包1 包2 …         #安装所有列出的包<br>sudo dnf install -y 包名               #无需提示直接安装</p>
<p>#11、如何使用发行版光盘作为yum repository，请描述该过程。</p>
<p>##1、将主机base源及media源备份并将media源切换至iso mount目录</p>
<pre><code>[root@centos /]# cd /etc/yum.repos.d
[root@centos yum.repos.d]# mv CentOS-Base.repo CentOS-Base.repo.bak
[root@centos yum.repos.d]# cp CentOS-Media.repo CentOS-Media.repo.bak
[root@centos yum.repos.d]# vim CentOS-Media.repo
</code></pre><p><img src="http://i.imgur.com/IsPfQwB.png" alt=""></p>
<p>[root@centos yum.repos.d]# </p>
<p>##2、将iso光盘插入光驱或将iso包挂载到机器中（本次测试直接将iso挂载到虚拟机centos中）</p>
<p>[root@centos /]# mkdir /media/CentOS   #建立光盘挂载目录 ，其实就是跟CentOS-Media.repo里面默认的一样啦</p>
<p>[root@centos dev]# mount /dev/sr0 /media/CentOS/   #挂载光盘</p>
<p>##3、测试安装policycoreutils-python</p>
<p>先清空yum的缓存，再重建yum缓存，看看从光盘的yum repository能否正常读取。</p>
<p><img src="http://i.imgur.com/vAkQtzi.png" alt=""></p>
<p>貌似是OK的。</p>
<p>再来一发</p>
<p><img src="http://i.imgur.com/HN3jFqR.png" alt=""><br>大功告成！</p>
<p>#12、写一个脚本，完成以下功能<br>   (1) 假设某目录(/etc/rc.d/rc3.d/)下分别有K开头的文件和S开头的文件若干；</p>
<p>   (2) 显示所有以K开头的文件的文件名，并且给其附加一个stop字符串；</p>
<p>   (3) 显示所有以S开头的文件的文件名，并且给其附加一个start字符串；</p>
<p>   (4) 分别统计S开头和K开头的文件各有多少；</p>
<pre><code>#!/bin/bash
#

#定义统计文件个数的变量，初始化啦
filename_S_sum=0
filename_K_sum=0

#利用for循环列表支持文件路径*通配S开头的文件
for filename_S in /etc/rc.d/rc3.d/S*;do
        echo $(basename $filename_S) start
        let filename_S_sum++
done

#利用for循环列表支持文件路径*通配S开头的文件
for filename_K in /etc/rc.d/rc3.d/K*;do
        echo $(basename $filename_K) stop
        let filename_K_sum++
done


echo &quot;There is $filename_S_sum files by S At the beginning of the file name&quot;
echo &quot;There is $filename_K_sum files by K At the beginning of the file name&quot;


[root@centos Jerry_go]# bash week8_title12-2.sh &gt; week8_title12-2.txt &amp;&amp; cat week8_title12-2.txt 
S01sysstat start
S02lvm2-monitor start
S10network start
S11portreserve start
S12rsyslog start
S22messagebus start
S23NetworkManager start
S25blk-availability start
S26haldaemon start
S26udev-post start
S55memcached start
S55sshd start
S58ntpd start
S90crond start
S95atd start
S99local start
K01smartd stop
K05wdaemon stop
K10psacct stop
K10saslauthd stop
K16abrt-ccpp stop
K16abrtd stop
K30spice-vdagentd stop
K50kdump stop
K61nfs-rdma stop
K75netfs stop
K75ntpdate stop
K75quota_nld stop
K84wpa_supplicant stop
K87restorecond stop
K88auditd stop
K89netconsole stop
K89rdisc stop
K92ip6tables stop
K92iptables stop
K95firstboot stop
K95rdma stop
K99rngd stop
There is 16 files by S At the beginning of the file name
There is 22 files by K At the beginning of the file name
</code></pre><p>#13、写一个脚本，完成以下功能<br>   (1) 脚本能接受用户名作为参数；</p>
<p>   (2) 计算此些用户的ID之和；</p>
<pre><code>[root@centos Jerry_go]# cat week8_title13.sh  #开始装逼
#!/bin/bash
#

[ $# -lt 1 ] &amp;&amp; echo “At least input one users name ” &amp;&amp; exit 1  #提前判断一下，最少输入一个脚本参数并提示用户


userid_sum=0   #初始化userid_sum变量

for user in $*;do  #开始用for循环，$*参数表示读取脚本后的任意个参数作为循环列表
    if id $user &amp;&gt; /dev/null;then  #判断一下用户是否存在
        echo &quot;$user userid is $(id -u $user)&quot;  #显示每次循环的当前系统用户的ID
        let userid_sum+=$(id -u $user)  #变量自增
    else
        echo &quot;$user is not an existing user&quot;  #如果用户不存在，输出提示给用户
    fi
done

echo &quot;They&apos;re userid sum is $userid_sum&quot;  #输出用户ID的总和



[root@centos Jerry_go]# bash week8_title13.sh root bin jerry sshd FBI
root userid is 0
bin userid is 1
jerry userid is 500
sshd userid is 74
FBI is not an existing user
They&apos;re userid sum is 575
[root@centos Jerry_go]# 
</code></pre><p>#14、写一个脚本<br>   (1) 传递一些目录给此脚本；</p>
<p>   (2) 逐个显示每个目录的所有一级文件或子目录的内容类型；</p>
<p>   (3) 统计一共有多少个目录；且一共显示了多少个文件的内容类型；</p>
<pre><code>[root@centos Jerry_go]# cat week8_title14.sh 
#!/bin/bash
#Author Jerry
#

#Not less than one script parameters
[ $# -lt 1 ] &amp;&amp; echo &quot;please aleast input one directory&quot; &amp;&amp; exit 1

#Judge whether the script parameters of the input from the user directory
[ -d $* ] || echo &quot;Please enter the directory!!!&quot; 


dsum=0
fsum=0

for file_name in $1;do
    ls -l $* |awk &apos;{print $NF}&apos;
    let dsum+=$(ls -l $* |grep ^d |wc -l)        
    let fsum+=$(ls -l $* |grep -v ^d |wc -l)  
    shift 
    break  

done

echo &quot;the directories sum:$dsum&quot;
echo &quot;the file sum:$fsum&quot;
</code></pre><p>#15、写一个脚本<br>  通过命令行传递一个参数给脚本，参数为用户名</p>
<p>  如果用户的id号大于等于500，则显示此用户为普通用户；</p>
<pre><code>[root@centos jerry_go]# cat week8_title14.sh 
#!/bin/bash

#Determine the user&apos;s input
grep &quot;^$1\&gt;&quot; /etc/passwd &amp;&gt; /dev/null || echo &quot;Please enter a user name&quot; 

userid=$(id -u $1)

[ $userid -ge 500 ] &amp;&amp; echo &quot;This is a  common user,it&apos;s userid is $userid &quot; || echo &quot;This is a  system user,it&apos;s userid is $userid &quot;
</code></pre><p>#16、写一个脚本<br>   (1) 添加10用户user1-user10；密码同用户名；</p>
<p>   (2) 用户不存在时才添加；存在时则跳过；</p>
<p>   (3) 最后显示本次共添加了多少用户；</p>
<pre><code>#!/bin/bash
declare -i num
for((i=1;i&lt;11;i++)){
    if ! id user$i &amp;&gt; /dev/null;then
        useradd user$i
        echo user$i:user$i | chpasswd
        let num++
    fi
}
echo &quot;Add $num users!&quot;
</code></pre><p>#17、写一脚本，用ping命令测试172.16.250.20-172.16.250.100以内有哪些主机在线，将在线的显示出来；</p>
<pre><code>#!/bin/bash
net=&quot;172.16.250.&quot;
for((i=20;i&lt;=100;i++)){
    ping -c 1 $net$i &amp;&gt; /dev/null
    if [ $? -eq 0 ];then
    echo $net$i
    fi
}
</code></pre><p>#18、打印九九乘法表；</p>
<pre><code>[root@centos jerry_go]# bash week8_title18.sh 
1*1=1    
1*2=2    2*2=4    
1*3=3    2*3=6    3*3=9    
1*4=4    2*4=8    3*4=12    4*4=16    
1*5=5    2*5=10    3*5=15    4*5=20    5*5=25    
1*6=6    2*6=12    3*6=18    4*6=24    5*6=30    6*6=36    
1*7=7    2*7=14    3*7=21    4*7=28    5*7=35    6*7=42    7*7=49    
1*8=8    2*8=16    3*8=24    4*8=32    5*8=40    6*8=48    7*8=56    8*8=64    
1*9=9    2*9=18    3*9=27    4*9=36    5*9=45    6*9=54    7*9=63    8*9=72    9*9=81    

[root@centos jerry_go]# cat week8_title18.sh 
#!/bin/bash
for ((i=1;i&lt;=9;i++)){
    for((j=1;j&lt;=i;j++));do
        echo -e -n &quot;$j*$i=$(($i*$j))\t&quot;
    done
    echo 
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-test1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/04/test1/" class="article-date">
      <time datetime="2018-06-04T08:28:24.000Z" itemprop="datePublished">2018-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/04/test1/">test1</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/31/hello-world/" class="article-date">
      <time datetime="2018-05-31T09:11:18.408Z" itemprop="datePublished">2018-05-31</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/31/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2018 Jerry
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>